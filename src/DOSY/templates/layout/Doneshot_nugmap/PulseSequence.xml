<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PulseSequence" element="pages" type="acquisition" >
  <group size="760 265"
    style="Heading1"
    label="Pulse Sequence"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;29)"
    bg=""
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PulseSequence"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <group loc="260 20" size="255 145"
      style="Heading1"
      label="DOSY Setup"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="DOSYsetup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <group loc="10 5" size="235 130"
        style="Heading1"
        label="DOSY Setup"
        bg=""
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="155 45" size="55 20"
          style="PlainText"
          vq="gzlvl1_inc"
          vc="gzlvl1_inc=$VALUE"
          set="$VALUE=gzlvl1_inc"
          digits="0"
          />
        <entry loc="155 65" size="55 20"
          style="PlainText"
          vq="gzlvl1_min"
          vc="gzlvl1_min=$VALUE"
          set="$VALUE=gzlvl1_min"
          digits="0"
          />
        <entry loc="155 85" size="55 20"
          style="PlainText"
          vq="gzlvl1_max"
          vc="gzlvl1_max=$VALUE"
          set="$VALUE=gzlvl1_max"
          />
        <label loc="5 85" size="140 20"
          style="Label1"
          label="Highest gradient value"
          />
        <label loc="5 65" size="140 20"
          style="Label1"
          label="Lowest gradient value"
          />
        <label loc="5 45" size="140 20"
          style="Label1"
          label="Number of increments"
          />
        <button loc="5 110" size="225 20"
          style="Heading2"
          label="Setup DOSY using conditions above"
          vc="setup_dosy('panelread') vnmrjcmd('array','popup')"
          bg=""
          decor1=""
          />
        <button loc="5 20" size="225 20"
          style="Heading2"
          label="Setup coarse gradient array"
          vc="if gradtype='nnl' then gzlvl1=60,300,600,940,1200,1560,2040 else gzlvl1=1000,5000,10000,15000,20000,25000,30000 endif vnmrjcmd('array','popup')"
          bg=""
          decor1=""
          />
      </group>
    </group>
    <group loc="260 165" size="255 95"
      style="Heading1"
      label="Sequence parameters"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="DOSY_acq_1"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <label loc="220 65" size="35 20"
        style="Heading1"
        label="DAC"
        justify="Left"
        />
      <entry loc="165 45" size="55 20"
        style="PlainText"
        vq="gzlvl_read"
        vc="gzlvl_read=$VALUE"
        set="$VALUE=gzlvl_read"
        />
      <check loc="10 25" size="220 20"
        style="Label1"
        label="Absolute-value acquisition mode"
        vq="avflag tweak"
        vc="avflag='y' sinebell av"
        vc2="avflag='n' gaussian ph"
        set="$VALUE=(avflag='y')"
        />
      <label loc="10 45" size="145 20"
        style="Label1"
        label="Read gradient level"
        />
      <entry loc="165 65" size="55 20"
        style="PlainText"
        vq="tweak avflag"
        vc="tweak=$VALUE"
        set="$VALUE=tweak"
        show="$ENABLE=(avflag='n')"
        digits="0"
        />
      <label loc="10 65" size="155 20"
        style="Label1"
        label="Tweak to last grad. pulse"
        />
    </group>
    <group loc="10 25" size="245 235"
      style="Heading1"
      label="Gradients"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="DOSYbuttons"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="10 185" size="150 20"
        style="Heading1"
        label="Max. gradient amplitude"
        justify="Left"
        />
      <label loc="215 95" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="10 95" size="145 20"
        style="Label1"
        label="Grad. stab. delay"
        justify="Left"
        />
      <entry loc="160 95" size="55 20"
        style="PlainText"
        vq="gstab"
        vc="gstab=$VALUE/1000"
        set="$VALUE=gstab*1000"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="160 115" size="55 20"
        style="PlainText"
        vq="kappa"
        vc="kappa=$VALUE"
        set="$VALUE=kappa"
        digits="2"
        disable="Grayed out"
        />
      <label loc="10 115" size="145 20"
        style="Label1"
        label="Unbalancing factor"
        justify="Left"
        />
      <label loc="215 45" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="215 65" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="215 165" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <entry loc="160 185" size="55 20"
        style="PlainText"
        vc="gzlvl_max=$VALUE"
        set="$VALUE=gzlvl_max"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="160 165" size="55 20"
        style="PlainText"
        vc="gt3=$VALUE/1000"
        set="$VALUE=gt3*1000"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="160 145" size="55 20"
        style="PlainText"
        vc="gzlvl3=$VALUE"
        set="$VALUE=gzlvl3"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="160 65" size="55 20"
        style="PlainText"
        vq="del"
        vc="del=$VALUE/1000"
        set="$VALUE=del*1000"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="160 45" size="55 20"
        style="PlainText"
        vq="gt1"
        vc="gt1=$VALUE/1000"
        set="$VALUE=gt1*1000"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="160 25" size="55 20"
        style="PlainText"
        vq="gzlvl1"
        vc="gzlvl1=$VALUE"
        set="$VALUE=gzlvl1"
        disable="Grayed out"
        />
      <label loc="10 25" size="150 20"
        style="Label1"
        label="Diffusion gradient level"
        justify="Left"
        />
      <label loc="10 45" size="150 20"
        style="Label1"
        label="Diffusion gradient length"
        justify="Left"
        />
      <label loc="10 145" size="145 20"
        style="Label1"
        label="HS gradient level"
        justify="Left"
        />
      <label loc="10 165" size="145 20"
        style="Label1"
        label="HS gradient duration"
        justify="Left"
        />
      <label loc="10 65" size="145 20"
        style="Label1"
        label="Diffusion delay"
        justify="Left"
        />
    </group>
    <group loc="520 190" size="220 70"
      style="Heading1"
      label="Probe"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Probeused"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 20" size="215 50"
        bg=""
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <textmessage loc="85 25" size="130 20"
          style="PlainText"
          label="AutoX_DB_8868"
          vq="probe_"
          set="$VALUE=probe_"
          digits="3"
          />
        <label loc="115 0" size="100 20"
          style="Label1"
          label="Gauss/cm/DAC"
          />
        <textmessage loc="45 0" size="70 20"
          style="PlainText"
          label="0.001770"
          vq="gcal_"
          set="$VALUE=gcal_"
          digits="6"
          />
        <label loc="5 0" size="40 20"
          style="Label1"
          label="gcal_:"
          justify="Left"
          />
        <label loc="5 25" size="80 20"
          style="Label1"
          label="Probe used:"
          justify="Left"
          />
      </group>
    </group>
    <group loc="520 105" size="220 85"
      style="Heading1"
      label="Steady State"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="sspulgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <entry loc="105 40" size="85 20"
        style="PlainText"
        vq="hsglvl sspul PFGflg"
        vc="hsglvl=$VALUE"
        set="$VALUE=hsglvl"
        show="$ENABLE=(sspul='y' and PFGflg='y')"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="105 60" size="85 20"
        style="PlainText"
        vq="hsgt sspul PFGflg"
        vc="hsgt=$VALUE/1000"
        set="$VALUE=hsgt*1000"
        show="$ENABLE=(sspul='y' and PFGflg='y')"
        digits="0"
        disable="Grayed out"
        />
      <label loc="190 60" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="10 40" size="75 20"
        style="Label1"
        label="G- strength"
        justify="Left"
        />
      <check loc="10 20" size="150 20"
        style="Label1"
        label="Grad-90-Grad option"
        vq="sspul PFGflg"
        vc="sspul='y'"
        vc2="sspul='n'"
        set="$VALUE=(sspul='y' and PFGflg='y')"
        />
      <label loc="10 60" size="60 20"
        style="Label1"
        label="G- time"
        justify="Left"
        />
    </group>
    <group loc="520 20" size="220 85"
      style="Heading1"
      label="DOSY Options"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="DOSYacq_2"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <check loc="10 40" size="170 20"
        style="Label1"
        label="Alternate gradient sign"
        vq="alt_grd"
        vc="alt_grd='y'"
        vc2="alt_grd='n'"
        set="$VALUE=(alt_grd='y')"
        />
      <check loc="10 60" size="190 20"
        style="Label1"
        label="Lock gating during gradients"
        vq="lkgate_flg"
        vc="lkgate_flg='y'"
        vc2="lkgate_flg='n'"
        set="$VALUE=(lkgate_flg='y')"
        />
      <check loc="10 20" size="140 20"
        style="Label1"
        label="DOSY on/off"
        vq="delflag"
        vc="delflag='y' ddrpm='e' setrc"
        vc2="delflag='n' ddrpm='p' setrc"
        set="$VALUE=(delflag='y')"
        />
    </group>
    <textmessage loc="10 0" size="220 20"
      style="PlainText"
      label="Doneshot_nugmap"
      vq="pslabel"
      set="$VALUE=pslabel"
      />
  </group>
</template>
