<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acqScanFidelity" element="pages" type="acquisition" >
  <group size="840 260"
    label="Scan"
    vc="amp_params"
    bg=""
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acqScanFidelity"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <group loc="470 0" size="320 205"
      style="Heading1"
      label="Correction"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="RFPulsePara"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <group loc="10 155" size="295 45"
        label="Plot"
        bg=""
        border="Etched"
        tab="no"
        enable="no"
        reference="Figures"
        useref="no"
        subtype="Titled"
        expanded="yes"
        >
        <check loc="105 15" size="65 25"
          style="Label1"
          label="tables"
          vq="ampargs"
          vc="ampargs[4]=16*trunc(ampargs[4]/16)+(ampargs[4] mod 8)+8"
          vc2="ampargs[4]=16*trunc(ampargs[4]/16)+(ampargs[4] mod 8)"
          set="if( trunc(ampargs[4] /8) mod 2=1) then $VALUE=1 else $VALUE=0 endif"
          tooltip="Show tpwr calibration tables"
          />
        <check loc="5 15" size="45 25"
          style="Label1"
          label="fit"
          vq="ampargs"
          vc="ampargs[4]=2*trunc(ampargs[4]/2)+1"
          vc2="ampargs[4]=2*trunc(ampargs[4]/2)"
          set="if((ampargs[4] mod 2)=1) then $VALUE=1 else $VALUE=0 endif"
          tooltip="Show Data Analysis Plots"
          />
        <check loc="50 15" size="55 25"
          style="Label1"
          label="raw"
          vq="ampargs"
          vc="ampargs[4]=4*trunc(ampargs[4]/4)+(ampargs[4] mod 2)+2"
          vc2="ampargs[4]=4*trunc(ampargs[4]/4)+(ampargs[4] mod 2)"
          set="if( trunc(ampargs[4] /2) mod 2=1) then $VALUE=1 else $VALUE=0 endif"
          tooltip="Show Raw Data Plots"
          />
        <check loc="225 15" size="60 25"
          style="Label1"
          label="jpgs"
          vq="ampargs"
          vc="ampargs[4]=32*trunc(ampargs[4]/32)+(ampargs[4] mod 16)+16"
          vc2="ampargs[4]=32*trunc(ampargs[4]/32)+(ampargs[4] mod 16)"
          set="if((trunc(ampargs[4] /16) mod 2)=1) then $VALUE=1 else $VALUE=0 endif"
          show="$VALUE=1"
          tooltip="Generate jpg images from plots"
          />
      </group>
      <button loc="245 125" size="60 25"
        style="Heading2"
        label="Install"
        vq="ampargs"
        vc="fidelityFit('install')"
        show="if(ampargs[1]=0) then $VALUE=1 else $VALUE=-1 endif"
        bg=""
        decor1=""
        tooltip="Install linearization data  in /vnmr "
        />
      <group loc="145 50" size="160 45"
        label="Fit Method"
        bg=""
        border="Etched"
        tab="no"
        enable="no"
        reference="Tables"
        useref="no"
        subtype="Titled"
        expanded="yes"
        >
        <radio loc="10 20" size="55 20"
          style="Label1"
          label="spline"
          vq="ampargs"
          vc="ampargs[3]=0"
          set="if(ampargs[3]=0) then $VALUE=1 else $VALUE=0 endif"
          tooltip="Piecewise Quadratic spline"
          />
        <radio loc="70 20" size="85 20"
          style="Label1"
          label="polynomial"
          vq="ampargs"
          vc="ampargs[3]=1"
          set="if(ampargs[3]=1) then $VALUE=1 else $VALUE=0 endif"
          tooltip="Single Polynomial"
          />
      </group>
      <selmenu loc="55 100" size="50 20"
        style="PlainText"
        vq="ampargs"
        vc="ampargs[2] = $VALUE'"
        set="$VALUE = ampargs[2]"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="rf1"
          chval="1"
          />
        <mlabel 
          label="rf2"
          chval="2"
          />
        <mlabel 
          label="rf3"
          chval="3"
          />
        <mlabel 
          label="rf4"
          chval="4"
          />
        <mlabel 
          label="rf5"
          chval="5"
          />
      </selmenu>
      <group loc="10 50" size="135 45"
        label="Tables"
        bg=""
        border="Etched"
        tab="no"
        enable="no"
        reference="Tables"
        useref="no"
        subtype="Titled"
        expanded="yes"
        >
        <radio loc="60 20" size="70 20"
          style="Label1"
          label="system"
          vq="ampargs"
          vc="ampargs[1]=1"
          set="if(ampargs[1]=1) then $VALUE=1 else $VALUE=0 endif"
          tooltip="Save tables in system directory (must have write access)"
          />
        <radio loc="10 20" size="55 20"
          style="Label1"
          label="user"
          vq="ampargs"
          vc="ampargs[1]=0"
          set="if(ampargs[1]=0) then $VALUE=1 else $VALUE=0 endif"
          tooltip="Save tables in user directory "
          />
      </group>
      <button loc="185 125" size="30 25"
        style="Heading2"
        vq="ampargs"
        vc="fidelityFit('plot_validate')"
        bg=""
        decor1=""
        icon="matlabicon"
        tooltip="show selected validation plots"
        />
      <button loc="125 125" size="60 25"
        style="Heading2"
        label="Validate"
        vq="amptables"
        vc="fidelityFit('validate')"
        show=" if amptables&gt;0  then $VALUE=1 else $VALUE=0 endif"
        bg=""
        decor1=""
        tooltip="Validate using hardware correction"
        />
      <entry loc="10 25" size="295 25"
        style="PlainText"
        vq="ampargs tn"
        set="ampdir:$VALUE"
        show="$VALUE=-1"
        disable="Label"
        />
      <check loc="240 100" size="60 25"
        style="Label1"
        label="HP"
        vq="hipwrampenable ampargs"
        vc="ampargs[5] =1"
        vc2="ampargs[5] =0"
        set="if ampargs[5] =1 then $VALUE=1 else $VALUE=0 endif"
        show="exists('hipwrampenable','parameter','global'):$e if($e=1) then $VALUE=1 else $VALUE=-1 endif"
        tooltip="Use High Power Amp Tables"
        />
      <entry loc="180 100" size="50 20"
        style="PlainText"
        vq="tn"
        vc="tn='$VALUE'"
        set="$VALUE=tn"
        disable="Grayed out"
        />
      <label loc="125 100" size="55 20"
        style="Label1"
        label="Nucleus"
        justify="Left"
        />
      <label loc="10 100" size="45 20"
        style="Label1"
        label="RFchnl"
        justify="Left"
        />
      <button loc="75 125" size="35 25"
        style="Heading2"
        vq="ampargs"
        vc="fidelityFit('plot_calibrate')"
        bg=""
        decor1=""
        icon="matlabicon"
        tooltip="show selected calibration plots"
        />
      <button loc="10 125" size="65 25"
        style="Heading2"
        label="Calibrate"
        vc="fidelityFit('calibrate')"
        show="$VALUE=1"
        bg=""
        decor1=""
        tooltip="Calibrate Amplifier channel"
        />
    </group>
    <group loc="240 0" size="230 205"
      style="Heading1"
      label="RF Pulses"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="RFPulsePara"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <label loc="5 150" size="60 20"
        style="Heading1"
        label="tpwrf"
        justify="Left"
        />
      <label loc="5 130" size="60 20"
        style="Label1"
        label="tpwr"
        justify="Left"
        />
      <label loc="5 105" size="55 20"
        style="Label1"
        label="tpwr2"
        justify="Left"
        />
      <label loc="5 85" size="55 20"
        style="Label1"
        label="tpwr1"
        justify="Left"
        />
      <label loc="140 105" size="25 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <label loc="140 85" size="25 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <label loc="140 45" size="25 20"
        style="Label1"
        label="us"
        justify="Left"
        />
      <textmessage loc="140 150" size="75 20"
        style="PlainText"
        label="344.9"
        vq="tpwr tpwrf"
        set="calc_power(tpwr,tpwrf):$dum,$VALUE"
        digits="1"
        />
      <label loc="180 130" size="25 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <textmessage loc="140 130" size="40 20"
        style="PlainText"
        label="50.8"
        vq="tpwr tpwrf"
        set="calc_power(tpwr,tpwrf):$VALUE"
        digits="1"
        />
      <entry loc="73 129" size="60 20"
        style="PlainText"
        vq="tpwr"
        vc="tpwr=$VALUE go('check')"
        set="$VALUE=tpwr"
        disable="Grayed out"
        tooltip="tpwr value used in validation"
        />
      <entry loc="73 149" size="60 20"
        style="PlainText"
        vq="tpwrf"
        vc="tpwrf=$VALUE go('check')"
        set="$VALUE=tpwrf"
        disable="Grayed out"
        tooltip="tpwrf value used in validation"
        />
      <entry loc="73 44" size="60 20"
        style="PlainText"
        vq="p1"
        vc="p1=$VALUE go('check')"
        set="$VALUE=p1"
        digits="1"
        disable="Grayed out"
        tooltip="width of pulse shape"
        />
      <entry loc="73 64" size="60 20"
        style="PlainText"
        vq="p1pat"
        vc="p1pat='$VALUE' go('check')"
        set="$VALUE=p1pat"
        disable="Grayed out"
        tooltip="calibration shaped pulse"
        />
      <entry loc="73 84" size="60 20"
        style="PlainText"
        vq="tpwr1"
        vc="tpwr1=$VALUE go('check')"
        set="$VALUE=tpwr1"
        disable="Grayed out"
        tooltip="Reference tpwr value used in calibration"
        />
      <entry loc="73 104" size="60 20"
        style="PlainText"
        vq="tpwr2"
        vc="tpwr2=$VALUE go('check')"
        set="$VALUE=tpwr2"
        disable="Grayed out"
        tooltip="Maximum tpwr value used in calibration"
        />
      <label loc="5 44" size="65 20"
        style="Label1"
        label="Width"
        justify="Left"
        />
      <label loc="5 64" size="65 20"
        style="Label1"
        label="Shape"
        justify="Left"
        />
    </group>
    <group loc="0 0" size="240 205"
      style="Heading1"
      label="Scan Parameters"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="trstuff"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <label loc="180 152" size="32 20"
        style="Heading1"
        label="MHz"
        justify="Left"
        />
      <label loc="8 152" size="32 20"
        style="Label1"
        label="sfrq"
        justify="Left"
        />
      <entry loc="100 152" size="60 20"
        style="PlainText"
        vq="sfrq tn"
        vc="sfrq=$VALUE go('check')"
        set="$VALUE=sfrq"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="100 130" size="60 20"
        style="PlainText"
        vq="gain"
        vc="gain=$VALUE  go('check')"
        set="$VALUE=gain"
        disable="Grayed out"
        />
      <entry loc="100 110" size="60 20"
        style="PlainText"
        vq="np"
        vc="np=$VALUE go('check')"
        set="$VALUE=np"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="100 90" size="60 20"
        style="PlainText"
        vq="at"
        vc="at=$VALUE/1000.0 go('check')"
        set="$VALUE=at*1000.0"
        digits="3"
        disable="Grayed out"
        />
      <entry loc="100 70" size="60 20"
        style="PlainText"
        vq="sw"
        vc="sw=$VALUE go('check')"
        set="$VALUE=sw"
        disable="Grayed out"
        />
      <entry loc="100 50" size="60 20"
        style="PlainText"
        vq="nt"
        vc="nt=$VALUE  go('check')"
        set="$VALUE=nt"
        disable="Grayed out"
        />
      <entry loc="100 30" size="60 20"
        style="PlainText"
        vq="tr mintr"
        vc="tr=$VALUE/1000.0 go('check')"
        set="$VALUE=tr*1000.0"
        digits="2"
        disable="Grayed out"
        />
      <label loc="10 130" size="80 20"
        style="Label1"
        label="gain"
        justify="Left"
        />
      <label loc="10 110" size="80 20"
        style="Label1"
        label="np"
        justify="Left"
        />
      <label loc="10 90" size="80 20"
        style="Label1"
        label="at"
        justify="Left"
        />
      <label loc="10 30" size="80 20"
        style="Label1"
        label="Rep. Delay"
        justify="Left"
        />
      <label loc="180 90" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="180 30" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="180 70" size="30 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <label loc="10 70" size="80 20"
        style="Label1"
        label="sw"
        justify="Left"
        />
      <label loc="10 50" size="80 20"
        style="Label1"
        label="Repetitions"
        justify="Left"
        />
    </group>
  </group>
</template>
