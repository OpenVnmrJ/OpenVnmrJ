<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PresatSuppress" element="pages" type="acquisition" >
  <group size="665 240"
    style="Heading1"
    label="PRESAT"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;29)"
    bg=""
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PresatSuppress"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <textmessage loc="10 0" size="170 25"
      style="PlainText"
      label="PRESAT"
      vq="pslabel"
      set="$VALUE=pslabel"
      />
    <group loc="5 25" size="445 190"
      style="Heading1"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="presatgroup"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <check loc="160 5" size="135 20"
        style="Label1"
        label="Presaturation"
        vq="satmode"
        vc="satmode='y' if (wet='y') then seqfil='s2pulse' endif"
        vc2="satmode='n' if (wet='y') then seqfil='wet1D' endif"
        set="$VALUE=(satmode='y')"
        />
      <button loc="295 5" size="135 20"
        style="Heading2"
        label="Switch back to s2pul"
        vq="seqfil"
        vc="wet='n' satmode='n' wds='' wstart='' seqfil='s2pul'"
        bg=""
        decor1=""
        />
      <check loc="15 5" size="90 20"
        style="Label1"
        label="Do scout"
        vq="doscout procdim wstart"
        vc="on('doscout'):$ison if ($ison&gt;-1) then on('doscout') procdim=0 wstart='PRESATproc(`wstart`)' endif"
        vc2="on('doscout'):$ison if ($ison&gt;-1) then off('doscout') wstart='' endif"
        set="on('doscout'):$ison if ($ison&gt;0) then $VALUE=1 else $VALUE=0 endif"
        show="on('doscout'):$ison if ($ison&gt;-1) then $ENABLE=1 else $ENABLE=0 endif"
        />
      <group loc="5 30" size="210 150"
        vq="satmode"
        show="$SHOW=(satmode='y')"
        bg=""
        border="Etched"
        tab="no"
        enable="no"
        useref="no"
        subtype="Basic"
        >
        <entry loc="80 5" size="60 20"
          style="PlainText"
          vq="satdly satmode"
          vc="satdly=$VALUE"
          set="$VALUE=satdly"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="80 25" size="60 20"
          style="PlainText"
          vq="satfrq satmode slpsat"
          vc="if (slpsat='n') then satfrq=$VALUE else satfrq=satfrq endif"
          set="$VALUE=satfrq"
          show="$ENABLE=(slpsat='n')"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="80 45" size="60 20"
          style="PlainText"
          vq="satpwr satmode"
          vc="satpwr=$VALUE"
          set="$VALUE=satpwr"
          digits="0"
          disable="Grayed out"
          />
        <textmessage loc="10 125" size="195 20"
          style="PlainText"
          label="6.00p"
          vq="slpsat psppm"
          set="$VALUE=psppm"
          />
        <textmessage loc="150 45" size="50 20"
          style="PlainText"
          label="10 Hz"
          vq="satpwr"
          set="getpower(satpwr,tn):$gh2 $VALUE='' format($gh2,0,0):$VALUE $VALUE=$VALUE+' Hz' on('presatgh2'):$pon if ($pon&gt;-1) then presatgh2=$gh2 endif"
          />
        <label loc="150 5" size="30 20"
          style="Label1"
          label="s"
          justify="Left"
          />
        <entry loc="80 85" size="125 20"
          style="PlainText"
          vq="pstof slpsat"
          vc="if (slpsat='y') then pstof=$VALUE endif pstof=pstof"
          set="array2csv(pstof,1):$VALUE"
          show="$ENABLE=(slpsat='y')"
          digits="1"
          disable="Grayed out"
          />
        <label loc="10 85" size="70 20"
          style="Label1"
          label="Offsets (Hz)"
          vq="slpsat"
          show="$ENABLE=(slpsat='y')"
          justify="Left"
          />
        <label loc="10 105" size="135 20"
          style="Label1"
          label="Chem. Shift (ppm):"
          vq="slpsat"
          show="$ENABLE=(slpsat='y')"
          justify="Left"
          />
        <check loc="10 65" size="165 20"
          style="Label1"
          label="Off-Resonance PRESAT"
          vq="slpsat"
          vc="slpsat='y' pstof=pstof"
          vc2="slpsat='n' pstof=pstof"
          set="$VALUE=(slpsat='y')"
          />
        <label loc="10 45" size="70 20"
          style="Label1"
          label="Power (dB)"
          justify="Left"
          />
        <textmessage loc="150 25" size="50 20"
          style="PlainText"
          label="6.00p"
          vq="satfrq satmode slpsat"
          set="setsatppm:$VALUE"
          show="$ENABLE=(slpsat='n')"
          />
        <label loc="10 25" size="70 20"
          style="Label1"
          label="Offset (Hz)"
          justify="Left"
          />
        <label loc="10 5" size="70 20"
          style="Label1"
          label="Delay"
          justify="Left"
          />
      </group>
      <group loc="220 30" size="210 150"
        bg=""
        border="Etched"
        tab="no"
        enable="no"
        useref="no"
        subtype="Basic"
        >
        <group loc="0 30" size="205 115"
          vq="prgflg"
          show="$SHOW=(prgflg='y')"
          bg=""
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Convenience"
          >
          <label loc="180 85" size="20 20"
            style="Heading1"
            label="ms"
            />
          <label loc="180 65" size="20 20"
            style="Label1"
            label="ms"
            />
          <label loc="180 25" size="20 20"
            style="Label1"
            label="Âµs"
            />
          <label loc="10 5" size="85 20"
            style="Label1"
            label="PurgeCycle"
            />
          <menu loc="120 5" size="55 20"
            style="PlainText"
            vq="prgcycle"
            vc="prgcycle=$VALUE"
            set="$VALUE=prgcycle"
            editable="No"
            >
            <mlabel 
              label="2"
              chval="2"
              />
            <mlabel 
              label="4"
              chval="4"
              />
          </menu>
          <entry loc="120 85" size="55 20"
            style="PlainText"
            vq="prggstab"
            vc="prggstab=$VALUE/1e3"
            set="$VALUE=prggstab*1e3"
            digits="3"
            />
          <entry loc="120 65" size="55 20"
            style="PlainText"
            vq="prggt"
            vc="prggt=$VALUE/1e3"
            set="$VALUE=prggt*1e3"
            digits="2"
            />
          <entry loc="120 45" size="55 20"
            style="PlainText"
            vq="prggzlvl"
            vc="prggzlvl=$VALUE"
            set="$VALUE=prggzlvl"
            digits="0"
            />
          <label loc="50 85" size="65 20"
            style="Label1"
            label="recovery"
            justify="Right"
            />
          <label loc="50 65" size="65 20"
            style="Label1"
            label="duration"
            justify="Right"
            />
          <label loc="65 45" size="50 20"
            style="Label1"
            label="level"
            justify="Right"
            />
          <label loc="10 45" size="55 20"
            style="Label1"
            label="Gradient"
            />
          <label loc="10 25" size="45 20"
            style="Label1"
            label="Purge"
            />
          <entry loc="120 25" size="55 20"
            style="PlainText"
            vq="prgd2"
            vc="prgd2=$VALUE/1e6"
            set="$VALUE=prgd2*1e6"
            digits="0"
            />
          <entry loc="60 25" size="55 20"
            style="PlainText"
            vq="prgd1"
            vc="prgd1=$VALUE/1e6"
            set="$VALUE=prgd1*1e6"
            digits="0"
            />
        </group>
        <check loc="15 5" size="70 20"
          style="Label1"
          label="PURGE"
          vq="prgflg satmode"
          vc="prgflg='y'"
          vc2="prgflg='n'"
          set="$VALUE=(prgflg='y')"
          show="strstr(satmode,'y'):$ret $ENABLE=$ret*2-1"
          />
      </group>
    </group>
  </group>
</template>
