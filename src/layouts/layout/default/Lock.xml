<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="Lock" element="pages" type="sample" >
  <group size="905 205"
    style="PlainText"
    label="Lock"
    vq="system personaType customflag cppauseflg"
    vc="sethw('statrate',200):$x"
    vc2="sethw('statrate',5000):$x if acqmode='lock' then locki('stop') endif"
    show="$S=1 PersonaManager('showInPanel','start','lock'):$S $SHOW=((system='spectrometer') and (cppauseflg='n') and (customflag='n') and ($S))"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="Lock"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <button loc="15 135" size="140 25"
      style="Heading2"
      label="Find z0"
      vc="doifidle('findz0_au')"
      bg="transparent"
      decor1="no"
      halignment="Center"
      valignment="Center"
      />
    <button loc="15 105" size="140 25"
      style="Heading2"
      label="Select lock signal..."
      vc="doifidle('findz0_au(`popup`)')"
      bg="transparent"
      decor1="no"
      halignment="Center"
      valignment="Center"
      />
    <textmessage loc="90 70" size="75 20"
      style="Info"
      label="Regulated"
      statpar="lock"
      />
    <label loc="15 70" size="80 20"
      style="Label1"
      label="Lock status"
      justify="Left"
      />
    <check loc="15 45" size="65 20"
      style="Label1"
      label="Lock"
      vc="sethw('lock','on')"
      vc2="sethw('lock','off')"
      show="$ENABLE=lockon"
      statpar="lockon"
      />
    <group loc="90 45" size="50 20"
      style="PlainText"
      vq="system"
      show="is_spectrometer('value'):$ENABLE"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <textmessage loc="5 0" size="40 20"
        style="Info"
        label="39.8"
        statpar="lklvl"
        />
    </group>
    <group loc="10 15" size="135 30"
      style="PlainText"
      vq="traymax"
      show="if (traymax=1) then $ENABLE=0 else $ENABLE=1 endif"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <group loc="80 5" size="50 20"
        style="PlainText"
        vq="system"
        show="is_spectrometer('value'):$ENABLE"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <textmessage loc="5 0" size="40 20"
          style="Info"
          label="0 Hz"
          statpar="spinval"
          />
      </group>
      <check loc="5 5" size="65 20"
        style="Label1"
        label="Spin"
        vq="spin"
        vc="sethw('spin',spin)"
        vc2="sethw('spin',0)"
        show="$ENABLE=(spin&lt;&gt;0)"
        statpar="spinon"
        />
      </group>
    <group loc="730 10" size="140 185"
      style="Heading1"
      label="Autolock"
      bg="transparent"
      border="Etched"
      tab="no"
      enable="no"
      reference="Autolock"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <radio loc="25 70" size="100 25"
        style="PlainText"
        label="z0 only"
        vq="alock"
        vc="alock='y'"
        set="$VALUE=(alock='y')"
        />
      <button loc="10 155" size="120 25"
        style="Heading2"
        label="Run autolock"
        vq="alock"
        vc="doifidle('lock(\'z0\')')"
        show="$ENABLE=(alock&lt;&gt;'u')"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <radio loc="25 120" size="100 25"
        style="PlainText"
        label="Not used"
        vq="alock"
        vc="alock='n'"
        set="$VALUE=(alock='n')"
        />
      <radio loc="25 95" size="100 25"
        style="PlainText"
        label="Unlocked"
        vq="alock"
        vc="alock='u'"
        set="$VALUE=(alock='u')"
        />
      <radio loc="25 45" size="100 25"
        style="PlainText"
        label="Sample"
        vq="alock"
        vc="alock='s'"
        set="$VALUE=(alock='s')"
        />
      <radio loc="25 20" size="100 25"
        style="PlainText"
        label="Automatic"
        vq="alock"
        vc="alock='a'"
        set="$VALUE=(alock='a')"
        />
    </group>
    <group loc="185 35" size="530 120"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <slider loc="90 90" size="440 30"
        style="PlainText"
        vc="setshim('lockphase',$VALUE)"
        digital="true"
        incr1="1"
        incr2="10"
        vq2="lockphase"
        digits="7"
        statpar="lockphase"
        drag="400"
        />
      <slider loc="90 30" size="440 30"
        style="PlainText"
        vc="setshim('lockpower',$VALUE)"
        digital="true"
        incr1="1"
        incr2="3"
        vq2="lockpower"
        digits="7"
        statpar="lockpower"
        drag="400"
        />
      <shimbutton loc="0 0" size="80 30"
        style="Label4"
        label="Z0"
        vc="setshim('z0',$VALUE)"
        vq2="z0"
        statpar="z0"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="false"
        />
      <slider loc="90 0" size="440 30"
        style="PlainText"
        vc="setshim('z0',$VALUE)"
        digital="true"
        incr1="1"
        incr2="10"
        vq2="z0"
        digits="7"
        statpar="z0"
        drag="400"
        />
      <shimbutton loc="0 90" size="80 30"
        style="Label4"
        label="Phase"
        vc="setshim('lockphase',$VALUE)"
        vq2="lockphase"
        statpar="lockphase"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="true"
        />
      <slider loc="90 60" size="440 30"
        style="PlainText"
        vc="setshim('lockgain',$VALUE)"
        digital="true"
        incr1="1"
        incr2="3"
        vq2="lockgain"
        digits="7"
        statpar="lockgain"
        drag="400"
        />
      <shimbutton loc="0 60" size="80 30"
        style="Label4"
        label="Gain"
        vc="setshim('lockgain',$VALUE)"
        vq2="lockgain"
        statpar="lockgain"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="false"
        />
      <shimbutton loc="0 30" size="80 30"
        style="Label4"
        label="Power"
        vc="setshim('lockpower',$VALUE)"
        vq2="lockpower"
        statpar="lockpower"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="false"
        />
    </group>
  </group>
</template>
