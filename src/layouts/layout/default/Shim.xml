<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="Shim" element="pages" type="sample" >
  <group size="1000 240"
    style="Heading1"
    label="Shim"
    vq="system cppauseflg customflag personaType"
    vc="sethw('statrate',200):$x"
    vc2="sethw('statrate',5000):$x if acqmode='lock' then locki('stop') endif"
    show="$S=1 PersonaManager('showInPanel','start','shim'):$S $SHOW=((system='spectrometer') and (cppauseflg='n') and (customflag='n') and ($S))"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="Shim"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="785 5" size="206 125"
      style="Heading1"
      label="Autoshim"
      bg="transparent"
      border="Etched"
      tab="no"
      enable="no"
      reference="Autolock"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <button loc="10 85" size="190 25"
        style="Heading2"
        label="Stop shim"
        vc="ProshimPopup('stop')"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="10 55" size="190 25"
        style="Heading2"
        label="Start shim"
        vc="doifidle('doproshim')"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <filemenu loc="10 30" size="190 20"
        style="PlainText"
        vq="method Gmapname"
        vc="exec('$VALUE')"
        set="$VALUE=`method='`+method+`' Gmapname='`+Gmapname+`'`"
        file="exists('shimmenuInfo','templates/vnmrj/choicefiles'):$r,$VALUE"
        type="file"
        bg="VJBackground"
        editable="No"
        statshow="yes"
        elastic="no"
        display="yes"
        />
    </group>
    <group loc="255 160" size="525 60"
      border="None"
      tab="no"
      enable="no"
      reference="saveshims"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="170 40" size="90 20"
        style="Label1"
        label="Receiver gain"
        justify="Left"
        />
      <entry loc="255 40" size="45 20"
        style="PlainText"
        vq="gain acqmode"
        vc="gain = $VALUE"
        set="$VALUE = gain"
        show="$VALUE = (acqmode &lt;&gt; 'fidscan')*2 - 1"
        digits="0"
        disable="Label"
        />
      <textmessage loc="90 20" size="60 20"
        style="Info"
        label="0 Hz"
        statpar="spinval"
        />
      <textmessage loc="90 3" size="65 20"
        style="Info"
        label="Off"
        statpar="spin"
        />
      <label loc="62 2" size="35 20"
        style="Label1"
        label="Spin"
        justify="Left"
        />
      <button loc="0 5" size="60 20"
        style="Heading2"
        label="Spin on"
        vc="sethw('spinner','on')"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="0 25" size="60 20"
        style="Heading2"
        label="Spin off"
        vc="sethw('spinner','off')"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="155 0" size="150 20"
        style="Heading2"
        label="Read default shims"
        vq="probe shims"
        vc="loaddefaultshims('findshims'):shims loaddefaultshims('force')"
        show="$e=0 $s='' $ENABLE=-1 getparam('defaultshims','Probe'):$s if ($s&lt;&gt;'') then exists($s,'shims'):$e endif $ENABLE=$e*2-1"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="155 20" size="150 20"
        style="Heading2"
        label="Read shims from pars"
        vc="load='y' su"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <label loc="310 40" size="40 20"
        style="Label1"
        label="File"
        justify="Center"
        />
      <entry loc="345 40" size="180 20"
        style="PlainText"
        vq="shims"
        vc="shims='$VALUE'"
        set="$VALUE=shims"
        disable="Grayed out"
        />
      <button loc="305 20" size="110 20"
        style="Heading2"
        label="Save shims"
        vq="shims"
        vc="readallshims svs(shims,'force') vnmrjcmd('pnew','shims') vnmrjcmd('LOC show shims')"
        show="$ENABLE=(shims&lt;&gt;'')*2-1"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="415 20" size="110 20"
        style="Heading2"
        label="Read shims"
        vq="shims"
        vc="rts(shims) expactive:$e if not ($e) then load='y' su endif"
        show="$e=0 if (shims&lt;&gt;'') then exists(shims,'shims'):$e endif $ENABLE=$e*2-1"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="305 0" size="55 20"
        style="Heading2"
        label="Save1"
        vc="shims='tmp1' svs(shims,'force')"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="360 0" size="55 20"
        style="Heading2"
        label="Read1"
        vq="shims"
        vc="shims='tmp1' rts(shims) expactive:$e if not ($e) then load='y' su endif"
        show="exists('tmp1','shims'):$e $ENABLE=$e*2-1"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="415 0" size="55 20"
        style="Heading2"
        label="Save2"
        vc="shims='tmp2' svs(shims,'force')"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="470 0" size="55 20"
        style="Heading2"
        label="Read2"
        vq="shims"
        vc="shims='tmp2' rts(shims) expactive:$e if not ($e) then load='y' su endif"
        show="exists('tmp2','shims'):$e $ENABLE=$e*2-1"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
    </group>
    <group loc="100 160" size="140 60"
      style="Heading1"
      vq="acqmode"
      show="$VALUE = (acqmode = 'fidscan')"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <textmessage loc="60 0" size="50 20"
        style="Info"
        label="69.5"
        statpar="lklvl"
        />
      <label loc="0 0" size="70 20"
        style="Label1"
        label="Lock"
        justify="Left"
        />
      <textmessage loc="60 20" size="70 20"
        style="Info"
        label="0.0"
        vq="fidarea"
        set="$VALUE = fidarea"
        digits="1"
        />
      <label loc="0 20" size="60 20"
        style="Label1"
        label="FID area"
        justify="Left"
        />
      <button loc="0 40" size="130 20"
        style="Heading2"
        label="Rescale FID area"
        vc="fidnorm=fidnorm*500/fidarea"
        halignment="Center"
        valignment="Center"
        />
    </group>
    <group loc="100 170" size="140 20"
      style="Heading1"
      vq="acqmode"
      show="$SHOW = (acqmode &lt;&gt; 'fidscan')"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <label loc="40 0" size="70 20"
        style="Label1"
        label="Lock"
        justify="Left"
        />
      <textmessage loc="75 0" size="60 20"
        style="Info"
        label="69.5"
        statpar="lklvl"
        />
    </group>
    <shimset loc="255 0" size="525 160"
      style="PlainText"
      vq="shimset"
      vc="sethwshim('$NAME',$VALUE):$xx $NAME=$xx"
      set="$VALUE=shimset"
      border="LoweredBevel"
      side="Top"
      justify="Left"
      tab="no"
      savekids="false"
      statpar="$NAME"
      pointy="false"
      rocker="true"
      arrow="true"
      enable="no"
      reference="shm"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      />
    <group loc="0 40" size="90 200"
      style="Heading1"
      vq="acqmode"
      show="$VALUE = (acqmode = 'fidscan')"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <group loc="0 50" size="90 150"
        style="Heading1"
        vq="fidscanmode"
        show="strstr(fidscanmode,'s'):$s $VALUE=(1 - 2*$s)"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <toggle loc="0 130" size="80 20"
          style="Heading2"
          label="DC correct"
          vq="dcrmv"
          vc="dcrmv='y' fidarea:fidarea"
          vc2="dcrmv='n' fidarea:fidarea"
          set="$VALUE = (dcrmv = 'y')"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <toggle loc="0 110" size="80 20"
          style="Heading2"
          label="Dots"
          vq="dotflag"
          vc="displaymode('-f','fidscanmode') dotflag='y'"
          vc2="dotflag='n'"
          set="$VALUE=(dotflag = 'y')"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <toggle loc="0 90" size="80 20"
          style="Heading2"
          label="Fill"
          vq="fidscanmode"
          vc="displaymode('+f', 'fidscanmode')"
          vc2="displaymode('-f', 'fidscanmode')"
          set="strstr(fidscanmode,'f'):$VALUE"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <toggle loc="0 70" size="80 20"
          style="Heading2"
          label="Envelope"
          vq="fidscanmode"
          vc="displaymode('+e', 'fidscanmode')"
          vc2="displaymode('-e', 'fidscanmode')"
          set="strstr(fidscanmode,'e'):$VALUE"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <toggle loc="0 40" size="80 20"
          style="Heading2"
          label="Abs value"
          vq="fidscanmode"
          vc="displaymode('+a', 'fidscanmode')"
          vc2="displaymode('-a', 'fidscanmode')"
          set="strstr(fidscanmode,'a'):$VALUE"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <toggle loc="0 20" size="80 20"
          style="Heading2"
          label="Imaginary"
          vq="fidscanmode"
          vc="displaymode('+i', 'fidscanmode')"
          vc2="displaymode('-i', 'fidscanmode')"
          set="strstr(fidscanmode,'i'):$VALUE"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <toggle loc="0 0" size="80 20"
          style="Heading2"
          label="Real"
          vq="fidscanmode"
          vc="displaymode('+r', 'fidscanmode')"
          vc2="displaymode('-r', 'fidscanmode')"
          set="strstr(fidscanmode,'r'):$VALUE"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
      </group>
      <radio loc="5 27" size="80 20"
        style="Label1"
        label="FID"
        vq="fidscanmode"
        vc="displaymode('-s', 'fidscanmode')"
        set="strstr(fidscanmode,'s'):$e $VALUE=(not $e)"
        />
      <radio loc="5 7" size="90 20"
        style="Label1"
        label="Spectrum"
        vq="fidscanmode"
        vc="displaymode('+s', 'fidscanmode')"
        set="strstr(fidscanmode,'s'):$VALUE"
        />
    </group>
    <group loc="5 50" size="90 150"
      style="Heading1"
      vq="acqmode"
      show="$VALUE = (acqmode &lt;&gt; 'fidscan')"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <shimbutton loc="0 40" size="80 30"
        style="Label4"
        label="Lk Power"
        vc="setshim('lockpower',$VALUE)"
        vq2="lockpower"
        statpar="lockpower"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="false"
        />
      <shimbutton loc="0 80" size="80 30"
        style="Label4"
        label="Lk Gain"
        vc="setshim('lockgain',$VALUE)"
        vq2="lockgain"
        statpar="lockgain"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="false"
        />
      <shimbutton loc="0 120" size="80 30"
        style="Label4"
        label="Lk Phase"
        vc="setshim('lockphase',$VALUE)"
        min="0"
        max="360"
        statpar="lockphase"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="true"
        />
      <shimbutton loc="0 0" size="80 30"
        style="Label4"
        label="z0"
        vc="setshim('z0',$VALUE)"
        vq2="z0"
        statpar="z0"
        pointy="false"
        rocker="true"
        arrow="true"
        arrowcolor="GraphForeground"
        wrap="false"
        />
    </group>
    <group loc="90 0" size="160 180"
      vq="acqmode"
      show="$SHOW=(acqmode='fidscan')"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <dial loc="0 0" size="160 160"
        style="Heading3"
        vq="fidarea"
        set="$VALUE=fidarea"
        digital="yes"
        min="0.0"
        max="1000.0"
        minmark="no"
        maxmark="yes"
        count="2"
        color1="0x858585"
        color3="0x0085D5"
        color4="0x08BBF9"
        color5="0x77D6FC"
        color6="0x90D2FF"
        color7="0x93F9F4"
        color8="0xFC6903"
        color9="0xFF9100"
        color10="0xFCB061"
        color11="0xFF7070"
        color12="0xCC0000"
        decor1="yes"
        decor2="yes"
        elastic="no"
        />
    </group>
    <group loc="90 0" size="170 170"
      vq="acqmode"
      show="$SHOW=(acqmode&lt;&gt;'fidscan')"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <dial loc="0 0" size="160 160"
        style="Heading3"
        digital="yes"
        min="0.0"
        max="100.0"
        minmark="no"
        maxmark="yes"
        statpar="lklvl"
        count="2"
        color1="0x858585"
        color3="0x0085D5"
        color4="0x08BBF9"
        color5="0x77D6FC"
        color6="0x90D2FF"
        color7="0x93F9F4"
        color8="0xFC6903"
        color9="0xFF9100"
        color10="0xFCB061"
        color11="0xFF7070"
        color12="0xCC0000"
        decor1="yes"
        decor2="yes"
        elastic="no"
        />
    </group>
    <group loc="5 2" size="90 20"
      style="Heading1"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <toggle loc="0 0" size="80 20"
        style="Heading2"
        label="Lock scan"
        vq="acqmode"
        vc="lock_scan"
        vc2="locki('stop') menu('main')"
        set="$VALUE=(acqmode='lock')"
        statpar="status"
        statshow="Idle Interactive"
        enable="yes"
        radiobutton="yes"
        subtype="no"
        />
    </group>
    <group loc="5 25" size="90 20"
      style="Heading1"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      rows="1"
      columns="1"
      >
      <toggle loc="0 0" size="80 20"
        style="Heading2"
        label="FID scan"
        vq="acqmode"
        vc="fid_scan"
        vc2="aa"
        set="$VALUE=(acqmode='fidscan')"
        enable="yes"
        radiobutton="yes"
        subtype="no"
        />
    </group>
  </group>
</template>
