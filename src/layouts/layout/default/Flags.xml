<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="Flags" element="pages" type="acquisition" >
  <group size="760 240"
    style="Heading1"
    label="Flags"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;29)"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="Flags"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="515 20" size="235 195"
      style="Heading1"
      label="Oversampling2"
      vq="dsp Console"
      show="$VALUE=(dsp&lt;&gt;'n' and (Console='inova' or Console='mercury'))"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <textmessage loc="10 160" size="215 20"
        style="Info"
        vq="fsq"
        set="$VALUE='Frequency Shifted Quad Detection is ' if fsq='y' then $VALUE=$VALUE+'Enabled' else $VALUE=$VALUE+'Disabled' endif"
        />
      <entry loc="155 135" size="70 20"
        style="PlainText"
        vq="fb"
        vc="fb=$VALUE"
        set="$VALUE=fb"
        show="on('fb'):$VALUE"
        disable="Grayed out"
        />
      <label loc="10 135" size="140 20"
        style="Label1"
        label="Analog filter bandwidth"
        justify="Left"
        />
      <entry loc="155 110" size="70 20"
        style="PlainText"
        vq="osfilt dsp"
        vc="osfilt='$VALUE'"
        set="$VALUE=osfilt"
        show="if (dsp='r') then on('osfilt'):$VALUE else $VALUE=-1 endif"
        disable="Grayed out"
        />
      <entry loc="155 90" size="70 20"
        style="PlainText"
        vq="filtfile dsp"
        vc="filtfile='$VALUE'"
        set="$VALUE=filtfile"
        show="if (dsp='n') then $VALUE=-1 else if filtfile='' then $VALUE=0 else $VALUE=1 endif endif"
        disable="Grayed out"
        />
      <entry loc="155 70" size="70 20"
        style="PlainText"
        vq="osfb dsp"
        vc="osfb=$VALUE"
        set="$VALUE=osfb"
        show="if (dsp='i' or (dsp='r' and fsq='y')) then on('osfb'):$VALUE else $VALUE=-1 endif"
        disable="Grayed out"
        />
      <entry loc="155 50" size="70 20"
        style="PlainText"
        vq="oslsfrq dsp"
        vc="oslsfrq=$VALUE"
        set="$VALUE=oslsfrq"
        show="if (dsp='i' or (dsp='r' and fsq='y')) then on('oslsfrq'):$VALUE else $VALUE=-1 endif"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="155 30" size="70 20"
        style="PlainText"
        vq="oscoef dsp"
        vc="oscoef=$VALUE"
        set="$VALUE=oscoef"
        show="if (dsp='i' or (dsp='r' and fsq='y')) then on('oscoef'):$VALUE else $VALUE=-1 endif"
        disable="Grayed out"
        />
      <entry loc="155 10" size="70 20"
        style="PlainText"
        vq="oversamp dsp"
        vc="oversamp=$VALUE"
        set="$VALUE=oversamp"
        show="if (dsp='n') then $VALUE=-1 else on('oversamp'):$VALUE endif"
        disable="Grayed out"
        />
      <label loc="10 110" size="145 20"
        style="Label1"
        label="Hardware filter mode"
        justify="Left"
        />
      <label loc="10 90" size="145 20"
        style="Label1"
        label="User filter name"
        justify="Left"
        />
      <label loc="10 70" size="145 20"
        style="Label1"
        label="Digital filter bandwidth"
        justify="Left"
        />
      <label loc="10 50" size="145 20"
        style="Label1"
        label="Left shift of filter band"
        justify="Left"
        />
      <label loc="10 30" size="145 20"
        style="Label1"
        label="Filter coefficents"
        justify="Left"
        />
      <label loc="10 10" size="145 20"
        style="Label1"
        label="Oversampling factor"
        justify="Left"
        />
    </group>
    <group loc="5 140" size="510 75"
      style="Heading1"
      label="Receiver"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Receiver"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <label loc="10 45" size="75 20"
        style="Label1"
        label="Timing (Âµs)"
        justify="Left"
        />
      <entry loc="125 20" size="55 20"
        style="PlainText"
        vq="gain"
        vc="gain=$VALUE"
        set="$VALUE=gain"
        show="on('gain'):$VALUE"
        disable="Grayed out"
        />
      <entry loc="125 45" size="55 20"
        style="PlainText"
        vq="rof2"
        vc="rof2=$VALUE"
        set="$VALUE=rof2"
        digits="1"
        disable="Grayed out"
        />
      <label loc="90 45" size="30 20"
        style="Label1"
        label="rof2"
        justify="Right"
        />
      <check loc="190 20" size="60 20"
        style="Label1"
        label="Auto"
        vq="gain"
        vc="gain='n'"
        vc2="gain='y'"
        set="off('gain'):$VALUE"
        />
      <label loc="185 45" size="30 20"
        style="Label1"
        label="alfa"
        justify="Right"
        />
      <entry loc="220 45" size="55 20"
        style="PlainText"
        vq="alfa"
        vc="alfa=$VALUE"
        set="$VALUE=alfa"
        digits="1"
        disable="Grayed out"
        />
      <group loc="285 20" size="225 45"
        style="Heading1"
        label="Calibration"
        vq="Console"
        show="$SHOW=(Console='vnmrs')"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="ddr"
        useref="no"
        subtype="Basic"
        expanded="yes"
        >
        <entry loc="45 25" size="55 20"
          style="PlainText"
          vq="ddrtc Console"
          vc="ddrtc=$VALUE"
          set="$VALUE=ddrtc"
          show="$ENABLE=(Console='vnmrs')*2-1"
          digits="2"
          disable="Grayed out"
          />
        <button loc="5 25" size="40 20"
          style="Heading2"
          label="ddrtc"
          vq="Console"
          vc="setddrtc"
          show="$ENABLE=(Console='vnmrs')*2-1"
          />
        <textmessage loc="135 0" size="80 20"
          style="Info"
          label="Pulse"
          vq="ddrpm Console"
          set="if Console='vnmrs' then if ddrpm='p' then $VALUE='Pulse' elseif ddrpm='e' then $VALUE='Echo' elseif ddrpm='r' then $VALUE='Refocus' else $VALUE='-' endif endif"
          />
        <label loc="5 0" size="130 20"
          style="Label1"
          label="Pulse sequence type"
          justify="Left"
          />
      </group>
      <label loc="10 20" size="90 20"
        style="Label1"
        label="Receiver gain"
        justify="Left"
        />
    </group>
    <group loc="5 0" size="510 140"
      style="Heading1"
      label="Flags"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Receiver"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <menu loc="435 20" size="65 20"
        style="PlainText"
        vq="in"
        vc="substr(in,2,1,'$VALUE'):in"
        set="substr(in,2,1):$VALUE"
        show="vnmrinfo('get','spinExpControl'):$ENABLE"
        editable="No"
        >
        <mlabel 
          label="Stop"
          chval="y"
          />
        <mlabel 
          label="Warn"
          chval="w"
          />
        <mlabel 
          label="Ignore"
          chval="n"
          />
      </menu>
      <menu loc="265 20" size="65 20"
        style="PlainText"
        vq="tin system"
        vc="tin='$VALUE'"
        set="$VALUE=tin"
        show="vnmrinfo('get','tempExpControl'):$ENABLE"
        editable="No"
        >
        <mlabel 
          label="Stop"
          chval="y"
          />
        <mlabel 
          label="Warn"
          chval="w"
          />
        <mlabel 
          label="Ignore"
          chval="n"
          />
      </menu>
      <label loc="185 20" size="90 20"
        style="Label1"
        label="On VT failure"
        justify="Left"
        />
      <label loc="265 90" size="60 20"
        style="Label1"
        label="Block size"
        justify="Left"
        />
      <group loc="265 110" size="185 20"
        vq="Console"
        show="if (Console &lt;&gt; 'mercury') then $VALUE=1 else $VALUE=0 endif"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <check loc="0 0" size="180 20"
          style="Label1"
          label="32-bit acquisition (normal)"
          vq="dp"
          vc="dp='y'"
          vc2="dp='n'"
          set="if( dp = 'y') then $VALUE=1 else $VALUE=0 endif"
          />
      </group>
      <entry loc="325 90" size="40 20"
        style="PlainText"
        vq="bs"
        vc="bs=$VALUE"
        set="$VALUE=bs"
        show="on('bs'):$VALUE"
        disable="Grayed out"
        />
      <menu loc="105 20" size="65 20"
        style="PlainText"
        vq="in"
        vc="substr(in,1,1,'$VALUE'):in"
        set="substr(in,1,1):$VALUE"
        editable="No"
        >
        <mlabel 
          label="Stop"
          chval="y"
          />
        <mlabel 
          label="Warn"
          chval="w"
          />
        <mlabel 
          label="Ignore"
          chval="n"
          />
      </menu>
      <label loc="10 20" size="100 20"
        style="Label1"
        label="On lock failure"
        justify="Left"
        />
      <textmessage loc="265 45" size="235 20"
        style="Info"
        label="Do not wait for temp or spin"
        vq="tin in"
        set="substr(in,2,1):$i if (tin='w' and $i&lt;&gt;'w') then $VALUE='Wait until temp. is stabilized' elseif (tin&lt;&gt;'w' and $i='w') then $VALUE='Wait until spin is stabilized' elseif (tin='w' and $i='w') then $VALUE='Wait until spin + temp. are stabilized'  else $VALUE='Do not wait for temp or spin' endif"
        />
      <check loc="10 110" size="250 20"
        style="Label1"
        label="Acquire arrays by blocks (interleave)"
        vq="il"
        vc="il='y'"
        vc2="il='n'"
        set="if(il = 'y') then $VALUE=1 else $VALUE=0 endif"
        />
      <check loc="10 90" size="155 20"
        style="Label1"
        label="Save FID at each block"
        vq="bs"
        vc="bs=y"
        vc2="bs=n"
        set="on('bs'):$VALUE"
        />
      <label loc="105 65" size="195 20"
        style="Label1"
        label="s before starting acquisition"
        justify="Left"
        />
      <entry loc="50 65" size="50 20"
        style="PlainText"
        vq="pad"
        vc="pad=$VALUE"
        set="$VALUE=pad"
        digits="1"
        disable="Grayed out"
        />
      <label loc="10 65" size="40 20"
        style="Label1"
        label="Delay"
        justify="Left"
        />
      <entry loc="50 45" size="50 20"
        style="PlainText"
        vq="vtwait tin"
        vc="vtwait=$VALUE"
        set="$VALUE=vtwait"
        show="if (tin='y' or tin='w') then $VALUE=1 else $VALUE=0 endif"
        disable="Grayed out"
        />
      <label loc="105 45" size="160 20"
        style="Label1"
        label="s before VT testing"
        justify="Left"
        />
      <label loc="10 45" size="40 20"
        style="Label1"
        label="Allow"
        justify="Left"
        />
      <label loc="345 20" size="95 20"
        style="Label1"
        label="On spin failure"
        justify="Left"
        />
    </group>
    <textmessage loc="525 0" size="180 20"
      style="PlainText"
      label=" "
      vq="dsp Console"
      set="if (Console='inova' or Console='mercury') then if dsp='r' then $VALUE='Hardware DSP is Enabled' elseif dsp='i' then $VALUE='Software DSP is Enabled' else $VALUE='DSP is Off' endif else $VALUE='' endif"
      />
  </group>
</template>
