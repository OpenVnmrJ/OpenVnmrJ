<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PulseSequence" element="pages" type="acquisition" >
  <group size="635 250"
    style="Heading2"
    label="Pulse Sequence"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;29)"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PulseSequence"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="5 135" size="245 110"
      style="Heading1"
      label="Delays"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Delays"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="210 20" size="30 20"
        style="PlainText"
        label="s"
        justify="Left"
        />
      <label loc="210 40" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="210 60" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="145 60" size="60 20"
        style="PlainText"
        vq="d3"
        vc="d3[2]=$VALUE/1000"
        set="$s=size(d3) if $s=1 then $VALUE=d3*1000 else $VALUE=d3[2]*1000 endif"
        show="$s=size(d3) $ENABLE=($s=2)"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="145 40" size="60 20"
        style="PlainText"
        vq="d2"
        vc="d2=$VALUE/1000"
        set="$VALUE=d2*1000"
        show="$ENABLE=(d2[1]&gt;0)"
        disable="Grayed out"
        />
      <entry loc="145 20" size="60 20"
        style="PlainText"
        vq="d1"
        vc="d1=$VALUE"
        set="$VALUE=d1"
        show="$ENABLE=(d1[1]&gt;0)"
        digits="1"
        disable="Grayed out"
        />
      <label loc="10 20" size="125 20"
        style="PlainText"
        label="Relaxation"
        justify="Left"
        />
      <label loc="10 40" size="125 20"
        style="PlainText"
        label="Gradient Recovery"
        justify="Left"
        />
      <label loc="10 60" size="125 20"
        style="PlainText"
        label="Phase Encode d3[2]"
        justify="Left"
        />
    </group>
    <group loc="255 135" size="375 110"
      style="Heading1"
      label="Shapes"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Delays"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <button loc="227 19" size="65 20"
        style="Label1"
        label="Define"
        vq="shaped"
        vc="setgmaptof"
        show="$ENABLE=(shaped='y')*2-1"
        bg="transparent"
        justify="Center"
        decor1="no"
        />
      <label loc="312 20" size="33 20"
        style="PlainText"
        label="180"
        justify="Center"
        />
      <label loc="169 20" size="32 20"
        style="PlainText"
        label="90"
        justify="Center"
        />
      <check loc="10 20" size="135 21"
        style="PlainText"
        label="Shaped pulses"
        vq="shaped"
        vc="exists('shapename90','parameter'):$e if not $e then setgmapshapes endif shaped='y' "
        vc2="shaped='n'"
        set="$VALUE=(shaped='y')"
        />
      <entry loc="285 80" size="60 20"
        style="PlainText"
        vq="shapedpwr180 shaped"
        vc="shapedpwr180=$VALUE"
        set="$VALUE=shapedpwr180"
        show="$ENABLE=(shaped='y')"
        disable="Grayed out"
        />
      <entry loc="285 60" size="60 20"
        style="PlainText"
        vq="shapedpw180 shaped"
        vc="shapedpw180=$VALUE*1000"
        set="$VALUE=shapedpw180/1000"
        show="$ENABLE=(shaped='y')"
        disable="Grayed out"
        />
      <label loc="350 80" size="25 20"
        style="PlainText"
        label="dB"
        justify="Left"
        />
      <label loc="350 60" size="25 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="205 40" size="140 20"
        style="PlainText"
        vq="shapename180 shaped"
        vc="shapename180='$VALUE'"
        set="$VALUE=shapename180"
        show="$ENABLE=(shaped='y')"
        disable="Grayed out"
        />
      <entry loc="60 40" size="140 20"
        style="PlainText"
        vq="shapename90 shaped"
        vc="shapename90='$VALUE'"
        set="$VALUE=shapename90"
        show="$ENABLE=(shaped='y')"
        disable="Grayed out"
        />
      <label loc="10 80" size="90 20"
        style="PlainText"
        label="Power"
        justify="Left"
        />
      <label loc="10 60" size="90 20"
        style="PlainText"
        label="Pulsewidth"
        justify="Left"
        />
      <label loc="10 40" size="45 20"
        style="PlainText"
        label="Name"
        justify="Left"
        />
      <entry loc="140 80" size="60 20"
        style="PlainText"
        vq="shapedpwr90 shaped"
        vc="shapedpwr90=$VALUE"
        set="$VALUE=shapedpwr90"
        show="$ENABLE=(shaped='y')"
        disable="Grayed out"
        />
      <entry loc="140 60" size="60 20"
        style="PlainText"
        vq="shapedpw90 shaped"
        vc="shapedpw90=$VALUE*1000"
        set="$VALUE=shapedpw90/1000"
        show="$ENABLE=(shaped='y')"
        disable="Grayed out"
        />
    </group>
    <group loc="255 25" size="250 110"
      style="Heading1"
      label="Gradients"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Titled"
      rows="1"
      columns="1"
      >
      <textmessage loc="140 60" size="60 20"
        style="PlainText"
        label="(nny)"
        vq="pfgon"
        set="$VALUE='('+pfgon+')'"
        />
      <textmessage loc="140 40" size="60 20"
        style="PlainText"
        label="(nnp)"
        vq="gradtype tmpgradtype"
        set="$VALUE='('+gradtype+')' exists('tmpgradtype','parameter'):$e if ($e) then $VALUE='('+tmpgradtype+')' endif"
        />
      <label loc="10 60" size="130 20"
        style="PlainText"
        label="Amplifiers"
        justify="Left"
        />
      <label loc="20 80" size="160 20"
        style="PlainText"
        label="(Check system config)"
        justify="Left"
        />
      <label loc="10 40" size="130 20"
        style="PlainText"
        label="Gradient type"
        justify="Left"
        />
      <entry loc="140 20" size="60 20"
        style="PlainText"
        vq="gzlvl"
        vc="gzlvl=$VALUE"
        set="$VALUE=gzlvl"
        digits="0"
        disable="Grayed out"
        />
      <label loc="10 20" size="130 20"
        style="PlainText"
        label="Gradient Level"
        justify="Left"
        />
    </group>
    <group loc="5 25" size="245 110"
      style="Heading1"
      label="Pulses"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Pulses"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="210 20" size="30 20"
        style="PlainText"
        label="µs"
        justify="Left"
        />
      <label loc="210 40" size="30 20"
        style="PlainText"
        label="µs"
        justify="Left"
        />
      <label loc="210 60" size="30 20"
        style="PlainText"
        label="dB"
        justify="Left"
        />
      <entry loc="145 20" size="60 20"
        style="PlainText"
        vq="pw"
        vc="pw=$VALUE"
        set="$VALUE=pw"
        show="$ENABLE=(pw[1]&gt;0)"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="145 40" size="60 20"
        style="PlainText"
        vq="p1"
        vc="p1=$VALUE"
        set="$VALUE=p1"
        show="$ENABLE=(p1[1]&gt;0)"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="145 60" size="60 20"
        style="PlainText"
        vq="tpwr"
        vc="tpwr=$VALUE"
        set="$VALUE=tpwr"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="145 80" size="60 20"
        style="PlainText"
        vq="tn"
        vc="tn='$VALUE'"
        set="$VALUE=tn"
        disable="Grayed out"
        />
      <label loc="10 20" size="110 20"
        style="PlainText"
        label="Excitation"
        justify="Left"
        />
      <label loc="10 40" size="110 20"
        style="PlainText"
        label="Refocusing"
        justify="Left"
        />
      <label loc="10 80" size="90 20"
        style="PlainText"
        label="Nucleus"
        justify="Left"
        />
      <label loc="10 60" size="90 20"
        style="PlainText"
        label="Power Level"
        justify="Left"
        />
    </group>
    <textmessage loc="10 0" size="240 25"
      style="Info"
      label="gmapz"
      vq="pslabel"
      set="$VALUE=pslabel"
      />
  </group>
</template>
