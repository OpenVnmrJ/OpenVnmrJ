<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PulseSequence" element="pages" type="acquisition" >
  <group size="635 250"
    style="PlainText"
    label="Pulse Sequence"
    vq="personaType"
    show="$S=1 PersonaManager('showInPanel','acquire','pulsesequence'):$S $SHOW=$S"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PulseSequence"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="310 115" size="285 105"
      style="Heading1"
      label="Add Data"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="trim"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <check loc="190 40" size="80 20"
        style="PlainText"
        label="Interleave"
        vq="il"
        vc="il='y'"
        vc2="il='n'"
        set="if(il = 'y') then $VALUE=1 else $VALUE=0 endif"
        />
      <group loc="10 65" size="265 35"
        style="Heading2"
        vq="add_data on_res"
        vc="on_res='y'"
        show="$SHOW=(add_data='singlefid')"
        border="Etched"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="sspulgroup"
        useref="no"
        subtype="Titled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <radio loc="120 5" size="140 25"
          style="PlainText"
          label="Run CONTROL only"
          vq="on_res add_data"
          vc="on_res='n'"
          vc2="on_res='y'"
          set="$VALUE=(on_res='n')"
          show="$ENABLE=(add_data='singlefid')"
          />
        <radio loc="10 5" size="100 25"
          style="PlainText"
          label="Run STD only"
          vq="on_res add_data"
          vc="on_res='y'"
          vc2="on_res='n'"
          set="$VALUE=(on_res='y')"
          show="$ENABLE=(add_data='singlefid')"
          />
      </group>
      <menu loc="10 20" size="210 20"
        style="PlainText"
        vq="add_data on_res"
        vc="add_data='$VALUE' if add_data='internal' then on_res='y' bs=16 il='n' elseif add_data='external' then on_res='y','n' bs=1 il='y' elseif add_data='singlefid' then on_res='y' bs=16 il='n'endif"
        set="$VALUE=add_data"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Make internal subtraction"
          chval="internal"
          />
        <mlabel 
          label="Store STD and Control separately"
          chval="external"
          />
        <mlabel 
          label="Run single FID only"
          chval="singlefid"
          />
      </menu>
      <label loc="145 40" size="40 20"
        style="PlainText"
        label="scans"
        justify="Left"
        />
      <entry loc="75 40" size="65 20"
        style="PlainText"
        vq="bs"
        vc="bs=$VALUE"
        set="$VALUE=bs"
        digits="0"
        disable="Grayed out"
        />
      <label loc="10 40" size="65 20"
        style="Label1"
        label="Blocksize"
        justify="Left"
        />
    </group>
    <group loc="310 25" size="285 90"
      style="Heading1"
      label="Steady State Pulse"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="sspulgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="185 60" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="120 60" size="60 20"
        style="PlainText"
        vq="hsgt sspul "
        vc="hsgt=$VALUE/1000"
        set="$VALUE=hsgt*1000"
        show="$ENABLE=(sspul='y' )"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="120 40" size="60 20"
        style="PlainText"
        vq="hsglvl sspul"
        vc="hsglvl=$VALUE"
        set="$VALUE=hsglvl"
        show="$ENABLE=(sspul='y' )"
        digits="0"
        disable="Grayed out"
        />
      <label loc="10 60" size="110 20"
        style="PlainText"
        label="Gradient time"
        justify="Left"
        />
      <label loc="10 40" size="110 20"
        style="PlainText"
        label="Gradient strength"
        justify="Left"
        />
      <check loc="10 20" size="145 20"
        style="PlainText"
        label="Steady State on/off"
        vq="sspul"
        vc="sspul='y' dps"
        vc2="sspul='n' dps"
        set="$VALUE=(sspul='y' )"
        />
    </group>
    <group loc="5 25" size="300 195"
      style="Heading1"
      label="Saturation"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="sat"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <entry loc="135 20" size="65 20"
        style="PlainText"
        vq="xferdly"
        vc="xferdly=$VALUE"
        set="$VALUE=xferdly"
        disable="Grayed out"
        />
      <entry loc="135 120" size="65 20"
        style="PlainText"
        vq="xferpw"
        vc="xferpw=$VALUE*1000"
        set="$VALUE=xferpw/1000"
        disable="Grayed out"
        />
      <label loc="205 120" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="205 140" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="135 140" size="65 20"
        style="PlainText"
        vq="xferint"
        vc="xferint=$VALUE/1000"
        set="$VALUE=xferint*1000"
        disable="Grayed out"
        />
      <label loc="10 120" size="100 20"
        style="Label1"
        label="Saturation pulse"
        justify="Left"
        />
      <label loc="10 140" size="110 20"
        style="Label1"
        label="Inter-pulse delay"
        justify="Left"
        />
      <menu loc="200 40" size="60 20"
        style="PlainText"
        vq="sxfer"
        vc="parunits('set','xferfrq','$VALUE')"
        set="parunits('get','xferfrq'):$VALUE"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="ppm"
          chval="ppm1"
          />
        <mlabel 
          label="Hz"
          chval="Hz"
          />
      </menu>
      <menu loc="200 60" size="60 20"
        style="PlainText"
        vq="xferfrqref"
        vc="parunits('set','xferfrqref','$VALUE')"
        set="parunits('get','xferfrqref'):$VALUE"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="ppm"
          chval="ppm1"
          />
        <mlabel 
          label="Hz"
          chval="Hz"
          />
      </menu>
      <entry loc="135 100" size="125 20"
        style="PlainText"
        vq="xfershape"
        vc="xfershape='$VALUE'"
        set="$VALUE=xfershape"
        disable="Grayed out"
        />
      <entry loc="135 60" size="65 20"
        style="PlainText"
        vq="xferfrqref tof sw rfl rfp sfrq"
        vc="parunits('get','xferfrqref'):$u if $u='Hz' then xferfrqref=$VALUE else xferfrqref=$VALUE*sfrq+tof-sw/2+rfl-rfp endif"
        set="parunits('get','xferfrqref'):$u if $u='Hz' then $VALUE=xferfrqref else $VALUE=(xferfrqref-tof+sw/2-rfl+rfp)/sfrq endif "
        digits="3"
        disable="Grayed out"
        />
      <label loc="10 40" size="125 20"
        style="Label1"
        label="Saturation frequency"
        justify="Left"
        />
      <label loc="10 60" size="125 20"
        style="Label1"
        label="Reference frequency"
        justify="Left"
        />
      <label loc="10 100" size="100 20"
        style="Label1"
        label="Saturation shape"
        justify="Left"
        />
      <label loc="205 80" size="30 20"
        style="PlainText"
        label="dB"
        justify="Left"
        />
      <entry loc="135 80" size="65 20"
        style="PlainText"
        vq="xferpwr"
        vc="xferpwr=$VALUE"
        set="$VALUE=xferpwr"
        disable="Grayed out"
        />
      <label loc="10 80" size="110 20"
        style="Label1"
        label="Saturation power"
        justify="Left"
        />
      <button loc="260 60" size="30 20"
        style="Heading2"
        label="set"
        vq="cr tof sw rfl rfp"
        vc="xferfrqref=cr+tof-sw/2+rfl-rfp"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <button loc="260 40" size="30 20"
        style="Heading2"
        label="set"
        vq="cr tof sw rfl rfp"
        vc="xferfrq=cr+tof-sw/2+rfl-rfp"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <entry loc="135 40" size="65 20"
        style="PlainText"
        vq="xferfrq tof sw rfl rfp sfrq"
        vc="parunits('get','xferfrq'):$u if $u='Hz' then xferfrq=$VALUE else xferfrq=$VALUE*sfrq+tof-sw/2+rfl-rfp endif"
        set="parunits('get','xferfrq'):$u if $u='Hz' then $VALUE=xferfrq else $VALUE=(xferfrq-tof+sw/2-rfl+rfp)/sfrq endif"
        digits="3"
        disable="Grayed out"
        />
      <label loc="205 20" size="25 20"
        style="PlainText"
        label="s"
        justify="Left"
        />
      <label loc="10 20" size="110 20"
        style="Label1"
        label="Transfer delay"
        justify="Left"
        />
    </group>
    <textmessage loc="10 0" size="240 25"
      style="PlainText"
      label="STD_ES"
      vq="pslabel"
      set="$VALUE=pslabel"
      />
  </group>
</template>
