<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="QuickAT" element="pages" type="acquisition" >
  <group size="670 260"
    style="Heading1"
    label="AutoTest"
    vq="personaType pslabel macro"
    show="$SHOW=(macro='AutoTest_calibration')"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="QuickAT"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="5 35" size="395 220"
      style="Heading1"
      label="Acquisition Options"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Titled"
      rows="1"
      columns="1"
      >
      <check loc="10 125" size="190 20"
        style="Label1"
        label="Generate lk gradient map"
        vq="caliblist"
        vc="xmhaha_calib('add','lkGmap')"
        vc2="xmhaha_calib('delete','lkGmap')"
        set="xmhaha_calib('','lkGmap'):$VALUE"
        />
      <check loc="195 145" size="200 20"
        style="Label1"
        label="Optimize low-order XY shims"
        vq="xyshimflg caliblist"
        vc="xyshimflg='y'"
        vc2="xyshimflg='n'"
        set="if (xyshimflg='y') then $VALUE=1 else $VALUE=0 endif"
        show="xmhaha_calib('','lkGmap'):$v $ENABLE=$v*2-1"
        />
      <check loc="195 125" size="150 20"
        style="Label1"
        label="Optimize lock tpwr"
        vq="LKtpwr caliblist"
        vc="LKtpwr=0"
        vc2="$tpwr=0 getparam('tpwr','lk'):$tpwr LKtpwr=$tpwr"
        set="if (LKtpwr=0) then $VALUE=1 else $VALUE=0 endif"
        show="xmhaha_calib('','lkGmap'):$v $ENABLE=$v*2-1"
        />
      <label loc="10 20" size="280 25"
        style="Heading1"
        label="Use the AutoTest sample"
        />
      <check loc="10 45" size="115 20"
        style="Label1"
        label="H1 Observe"
        vq="caliblist"
        vc="xmhaha_calib('add','Hobs')"
        vc2="xmhaha_calib('delete','Hobs')"
        set="xmhaha_calib('','Hobs'):$VALUE"
        />
      <label loc="120 45" size="120 20"
        style="Label1"
        label="[pw90 Target (µs)]"
        />
      <entry loc="243 45" size="50 20"
        style="PlainText"
        vq="H1pw90 caliblist"
        vc="H1pw90=$VALUE"
        set="$VALUE=H1pw90"
        show="xmhaha_calib('','Hobs'):$ok $ENABLE=$ok*2-1"
        disable="Grayed out"
        />
      <group loc="300 45" size="90 20"
        vq="probeSpec_H1"
        show="probeid_target('check','probeSpec_H1'):$SHOW"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <textmessage loc="0 0" size="80 20"
          style="PlainText"
          label="---"
          vq="probeSpec_H1"
          set="probeid_target('get',probeSpec_H1):$VALUE"
          />
      </group>
      <check loc="10 65" size="115 20"
        style="Label1"
        label="C13 Decouple"
        vq="caliblist"
        vc="xmhaha_calib('add','Cdec')"
        vc2="xmhaha_calib('delete','Cdec')"
        set="xmhaha_calib('','Cdec'):$VALUE"
        />
      <label loc="120 65" size="120 20"
        style="Label1"
        label="[pwx90 Target (µs)]"
        />
      <entry loc="243 65" size="50 20"
        style="PlainText"
        vq="C13pwx caliblist"
        vc="C13pwx=$VALUE"
        set="$VALUE=C13pwx"
        show="xmhaha_calib('','Cdec'):$ok $ENABLE=$ok*2-1"
        disable="Grayed out"
        />
      <group loc="300 65" size="90 20"
        vq="probeSpec_C13"
        show="probeid_target('check','probeSpec_C13'):$SHOW"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <textmessage loc="0 0" size="80 20"
          style="PlainText"
          label="---"
          vq="probeSpec_C13"
          set="probeid_target('get',probeSpec_C13):$VALUE"
          />
      </group>
      <check loc="10 85" size="300 20"
        style="Label1"
        label="C/H gradient ratio"
        vq="caliblist"
        vc="xmhaha_calib('add','Cgrad')"
        vc2="xmhaha_calib('delete','Cgrad')"
        set="xmhaha_calib('','Cgrad'):$VALUE"
        />
      <check loc="10 105" size="300 20"
        style="Label1"
        label="Gradient G/cm/dac"
        vq="caliblist"
        vc="xmhaha_calib('add','Gcal')"
        vc2="xmhaha_calib('delete','Gcal')"
        set="xmhaha_calib('','Gcal'):$VALUE"
        />
      <check loc="10 145" size="300 20"
        style="Label1"
        label="Calibrate lock Z0"
        vq="caliblist wqinit"
        vc="xmhaha_calib('add','lkZ0')"
        vc2="xmhaha_calib('delete','lkZ0')"
        set="xmhaha_calib('','lkZ0'):$VALUE"
        />
      <label loc="5 165" size="220 20"
        style="Label1"
        label="After calibration:"
        />
      <check loc="10 185" size="380 20"
        style="Label1"
        label="Record pw(x) nutation and decoupling profiles"
        vq="profileflg"
        vc="profileflg='y'"
        vc2="profileflg='n'"
        set="$VALUE=(profileflg='y')"
        />
    </group>
    <group loc="5 5" size="620 25"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="tndndisplay"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <textmessage loc="10 0" size="355 25"
        style="PlainText"
        label="Experiment: calibrate   Solvent: d2o"
        vq="pslabel"
        set="$VALUE='Experiment: '+pslabel+'   Solvent: '+solvent"
        />
      <textmessage loc="380 0" size="235 25"
        style="PlainText"
        label="Observe: H1          Decoupler: C13"
        vq="tn dn"
        set="$VALUE='Observe: '+tn+'          Decoupler: '+dn"
        />
    </group>
    <group loc="400 35" size="235 220"
      border="None"
      tab="no"
      enable="no"
      reference="custompar5a"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="5 0" size="135 20"
        style="Heading1"
        label="Receiver Gain (dB)"
        justify="Right"
        />
      <entry loc="145 0" size="50 20"
        style="PlainText"
        vq="gain"
        vc="on('gain'):$gainon if ($gainon) then gain=$VALUE else setvalue('gain',$VALUE) endif"
        set="$VALUE=gain"
        show="on('gain'):$ENABLE"
        digits="0"
        />
      <check loc="35 25" size="150 20"
        style="Label1"
        label="Print probefile?"
        vq="prtmod"
        vc="prtmod='y'"
        vc2="prtmod='n'"
        set="$VALUE=(prtmod='y')"
        />
      <check loc="35 45" size="150 20"
        style="Label1"
        label="Plot results?"
        vq="prtmod pltmod pltopt"
        vc="pltopt='y'"
        vc2="pltopt='n'"
        set="$VALUE=(pltopt='y')"
        />
      <group loc="5 90" size="220 130"
        vq="customflag"
        show="$SHOW=(customflag='y')"
        border="Etched"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="customizepar2"
        useref="no"
        subtype="Titled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <textmessage loc="10 105" size="200 25"
          style="PlainText"
          label="Aegis_calib"
          vq="samplename"
          set="$VALUE=samplename"
          />
        <textmessage loc="5 5" size="130 20"
          style="PlainText"
          label="Before calibration:"
          vq="pslabel"
          set="$VALUE='Before calibration:'"
          />
        <check loc="140 5" size="75 20"
          style="Label1"
          label="Re-shim"
          vq="wshim"
          vc="wshim='e'"
          vc2="wshim='n'"
          set="if (wshim='n') then $VALUE=0 else $VALUE=1 endif"
          />
        <textmessage loc="140 125" size="65 20"
          style="PlainText"
          label="yes / yes"
          vq="SQalock SQwshim"
          set="$VALUE=SQalock+' / '+SQwshim"
          />
        <label loc="5 85" size="125 20"
          style="Label1"
          label="Samplename:"
          />
        <label loc="5 125" size="130 20"
          style="Label1"
          label="start of Q lock/shim?"
          />
      </group>
    </group>
  </group>
</template>
