<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PulseSequence" element="pages" type="acquisition" >
  <group size="735 295"
    style="PlainText"
    label="Pulse Sequence"
    vq="panellevel"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PulseSequence"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >

    <group loc="10 10" size="260 170"
      style="Heading2"
      label="WATERGATE echo"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ESgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="10 20" size="110 20"
        style="PlainText"
        label="WG Method"
        />
      <menu loc="120 20" size="120 20"
        style="PlainText"
	vq="flag3919 flagW5"
	vc="substr('$VALUE',1):$v1 substr('$VALUE',2):$v2 flag3919=$v1 flagW5=$v2"
	set="$VALUE=flag3919+' '+flagW5"
	editable="No"
	>
	<mlabel
	   label="3-9-19"
	   chval="y n"
	   />
	<mlabel
	   label="soft180soft"
	   chval="n n"
	   />
	<mlabel
	   label="W5"
	   chval="n y"
	   />
	</menu>
<!-- hard pulse group -->
      <group loc="0 40" size="260 130"
	vq="flag3919 flagW5"
	show="$SHOW=((flag3919='y') or (flagW5='y'))"
	>
	<label loc="20 20" size="200 20"
	  label="Interpulse delay (in microsec):"
	  style="Label1"
	  />
	<entry loc="120 45" size="80 20"
	  style="PlainText"
	  vq="wgtau"
	  set="$VALUE=wgtau*1000000"
	  digits="1"
	  vc="wgtau=$VALUE/1000000"
	  />
	<label loc="200 45" size="30 20"
	  style="PlainText"
	  label="us"
	  />
        </group>

<!-- soft180soft group -->
      <group loc="0 40" size="260 130"
	vq="flag3919 flagW5"
	show="$SHOW=((flag3919='n') and (flagW5='n'))"
	>
      <label loc="210 0" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="150 0" size="60 20"
        style="PlainText"
        vq="wgspw"
        vc="wgspw=$VALUE*1000"
        set="$VALUE=wgspw/1000"
        digits="1"
        />
      <label loc="20 0" size="80 20"
        style="Label1"
        label="soft width"
        justify="Left"
        />
      <label loc="20 20" size="80 20"
        style="Label1"
        label="soft power"
        justify="Left"
        />
      <label loc="210 20" size="30 20"
        style="PlainText"
        label="dB"
        justify="Left"
        />
      <entry loc="150 20" size="60 20"
        style="PlainText"
        vq="wgspwr"
        vc="wgspwr=$VALUE"
        set="$VALUE=wgspwr"
        />
      <entry loc="150 40" size="60 20"
        style="PlainText"
        vq="wgspwrf"
        vc="wgspwrf=$VALUE"
        set="$VALUE=wgspwrf"
        />
      <label loc="20 40" size="80 20"
        style="Label1"
        label="soft fine power"
        justify="Left"
        />
      <label loc="20 60" size="80 20"
        style="Label1"
        label="soft shape"
        justify="Left"
        />
      <entry loc="110 60" size="130 20"
        style="PlainText"
        vq="wgsshape"
        vc="wgsshape='$VALUE'"
        set="$VALUE=wgsshape"
        />
      <label loc="210 80" size="30 20"
        style="PlainText"
        label="deg"
        justify="Left"
        />
      <entry loc="150 80" size="60 20"
        style="PlainText"
        vq="phincr2"
        vc="phincr2=$VALUE"
        set="$VALUE=phincr2"
        />
      <label loc="10 80" size="140 20"
        style="Label1"
        label="small angle phase shift"
        justify="Left"
        />
      <button loc="40 105" size="170 20"
        style="Label1"
        label="Recreate WG soft shape"
        vc="make_wgshape"
        bg="VJBackground"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      </group>
    </group>

    <group loc="10 190" size="260 90"
      style="Heading2"
      label="WATERGATE gradient"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ESgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="30 60" size="100 20"
        style="PlainText"
        label="Recovery time"
        justify="Left"
        />
      <label loc="200 60" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="200 40" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="140 60" size="60 20"
        style="PlainText"
        vq="gstabwg"
        vc="gstabwg=$VALUE/1000"
        set="$VALUE=gstabwg*1000"
        digits="1"
        disable="Grayed out"
        tooltip="Gradient recovery delay in the WG block"
        />
      <entry loc="140 40" size="60 20"
        style="PlainText"
        vq="gtwg"
        vc="gtwg=$VALUE/1000"
        set="$VALUE=gtwg*1000"
        digits="1"
        disable="Grayed out"
        tooltip="Gradient duration in the WG block"
        />
      <label loc="30 40" size="60 20"
        style="PlainText"
        label="duration"
        justify="Left"
        />
      <entry loc="140 20" size="60 20"
        style="PlainText"
        vq="gzlvlwg"
        vc="gzlvlwg=$VALUE"
        set="$VALUE=gzlvlwg"
        digits="0"
        disable="Grayed out"
        tooltip="Gradient level in the WG block"
        />
      <label loc="30 20" size="60 20"
        style="PlainText"
        label="strength"
        justify="Left"
        />

    </group>
    <group loc="280 10" size="190 90"
      style="Heading2"
      label="T1rho filter"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="PURGEgroup_ddrtc"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="55 20" size="110 20"
        style="Label1"
        label="Purge Pulse"
        justify="Left"
        />
      <check loc="35 20" size="20 20"
        style="PlainText"
        vq="prg_flg"
        vc="prg_flg='y' ddrtc=ddrtc-2*pw/3.14"
        vc2="prg_flg='n' ddrtc=ddrtc+2*pw/3.14"
        set="$VALUE=(prg_flg='y' )"
        tooltip="Turn purge pulse on/off (prg_flg)"
        />
      <entry loc="100 45" size="50 20"
        style="PlainText"
        vq="prgtime prg_flg"
        vc="prgtime=$VALUE/1000"
        set="$VALUE=prgtime*1000"
        show="$ENABLE=(prg_flg='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Purge Pulse length (prgtime) in milliseconds"
        />
      <entry loc="100 65" size="50 20"
        style="PlainText"
        vq="prgpwr prg_flg"
        vc="prgpwr=$VALUE"
        set="$VALUE=prgpwr"
        show="$ENABLE=(prg_flg='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Power level for the Purge Pulse (prgpwr)"
        />
      <label loc="10 65" size="90 20"
        style="Label1"
        label="at power"
        justify="Left"
        />
      <label loc="10 45" size="90 20"
        style="Label1"
        label="pulse duration"
        justify="Left"
        />
      <label loc="150 45" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
    </group>
    <group loc="280 105" size="190 105"
      style="Heading2"
      label="Steady State"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="SSPULgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <check loc="25 20" size="20 20"
        style="PlainText"
        vq="sspul"
        vc="sspul='y'"
        vc2="sspul='n'"
        set="$VALUE=(sspul='y' )"
        tooltip="Steady state option on/off (sspul)"
        />
      <label loc="50 20" size="140 20"
        style="Label1"
        label="GRD-90-GRD"
        justify="Left"
        />
      <entry loc="100 80" size="50 20"
        style="PlainText"
        vq="gt0 sspul "
        vc="gt0=$VALUE/1000"
        set="$VALUE=gt0*1000"
        show="$ENABLE=(sspul='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Hmospoil gradient duration (gt0)"
        />
      <label loc="150 80" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="100 60" size="50 20"
        style="PlainText"
        vq="gzlvl0 sspul"
        vc="gzlvl0=$VALUE"
        set="$VALUE=gzlvl0"
        show="$ENABLE=(sspul='y' )"
        digits="0"
        disable="Grayed out"
        tooltip="Homospoil gradient power (gzlvl0)"
        />
      <label loc="20 60" size="60 20"
        style="PlainText"
        label="strength"
        justify="Left"
        />
      <label loc="20 80" size="60 20"
        style="PlainText"
        label="duration"
        justify="Left"
        />
      <label loc="10 40" size="70 20"
        style="PlainText"
        label="Gradient -"
        justify="Left"
        />
    </group>
    <group loc="280 215" size="190 65"
      style="Heading2"
      label="Misc. Options"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FlipBackgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
     <label loc="40 20" size="150 20"
        style="Label1"
        label="Lock gating"
        justify="Left"
        />
      <check loc="20 20" size="20 20"
        style="PlainText"
        vq="lkgate_flg"
        vc="lkgate_flg='y'"
        vc2="lkgate_flg='n'"
        set="$VALUE=(lkgate_flg='y' )"
        tooltip="Turn lock control on/off during the sequence and acquisition (lkgate_flg)"
        />
      <label loc="40 40" size="150 20"
        style="Label1"
        label="Gradient alteration"
        justify="Left"
        />
      <check loc="20 40" size="20 20"
        style="PlainText"
        vq="alt_grd"
        vc="alt_grd='y'"
        vc2="alt_grd='n'"
        set="$VALUE=(alt_grd='y' )"
        tooltip="Change gradient sign on odd scans (alt_grd)"
        />

      </group>
    <group loc="480 10" size="250 205"
      style="Heading2"
      label="Solvent Flipback Pulse"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FlipBackgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <check loc="60 20" size="20 20"
        style="PlainText"
        vq="flipback"
        vc="flipback='y'"
        vc2="flipback='n'"
        set="$VALUE=(flipback='y' )"
        tooltip="Select solvent flipback pulse (flipback)"
        />
      <label loc="80 20" size="110 20"
        style="Label1"
        label="Flipback"
        justify="Left"
        />
      <label loc="10 40" size="140 20"
        style="Label1"
        label="Keep water along Z"
        justify="Left"
        />
      <label loc="210 60" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="150 60" size="60 20"
        style="PlainText"
        vq="flippw flipback"
        vc="flippw=$VALUE*1000"
        set="$VALUE=flippw/1000"
        show="$ENABLE=(flipback='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Solvent Flipback pulse length (flippw)"
        />
      <label loc="40 60" size="60 20"
        style="Label1"
        label="width"
        justify="Left"
        />
      <label loc="40 80" size="60 20"
        style="Label1"
        label="power"
        justify="Left"
        />
      <label loc="210 80" size="30 20"
        style="PlainText"
        label="dB"
        justify="Left"
        />
      <entry loc="150 80" size="60 20"
        style="PlainText"
        vq="flippwr flipback"
        vc="flippwr=$VALUE"
        set="$VALUE=flippwr"
        show="$ENABLE=(flipback='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Solvent Flipback pulse power (flippwr)"
        />
      <entry loc="150 100" size="60 20"
        style="PlainText"
        vq="flippwrf flipback"
        vc="flippwrf=$VALUE"
        set="$VALUE=flippwrf"
        show="$ENABLE=(flipback='y' )"
        digits="1"
        disable="Grayed out"
        />
      <label loc="40 100" size="70 20"
        style="Label1"
        label="fine power"
        justify="Left"
        />
      <label loc="40 120" size="60 20"
        style="Label1"
        label="shape"
        justify="Left"
        />
      <entry loc="110 120" size="130 20"
        style="PlainText"
        vq="flipshape flipback"
        vc="flipshape='$VALUE'"
        set="$VALUE=flipshape"
        show="$ENABLE=(flipback='y' )"
        disable="Grayed out"
        tooltip="Shape definition of the Flipback Pulse (flipshape)"
        />
      <label loc="210 140" size="30 20"
        style="PlainText"
        label="deg"
        justify="Left"
        />
      <entry loc="150 140" size="60 20"
        style="PlainText"
        vq="phincr1 flipback"
        vc="phincr1=$VALUE"
        set="$VALUE=phincr1"
        show="$ENABLE=(flipback='y' )"
        disable="Grayed out"
        tooltip="Small angle phase shift for the Flipback Pulse (phincr1)"
        />
      <label loc="10 140" size="140 20"
        style="Label1"
        label="small angle phase shift"
        justify="Left"
        />

      <button loc="40 175" size="170 20"
        style="Label1"
        label="Recreate flipback shape"
        vc="make_es_flipshape"
        bg="VJBackground"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
    </group>
  </group>
</template>
