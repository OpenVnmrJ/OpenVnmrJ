<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PulseSequence" element="pages" type="acquisition" >
  <group size="735 295"
    style="PlainText"
    label="Pulse Sequence"
    vq="personaType"
    show="$S=1 PersonaManager('showInPanel','acquire','pulsesequence'):$S $SHOW=$S"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PulseSequence"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="455 25" size="250 195"
      style="Heading1"
      label="Solvent Flipback Pulse"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FlipBackgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <button loc="40 165" size="170 20"
        style="Heading2"
        label="Recreate flipback shape"
        vc="make_es_flipshape"
        bg="VJBackground"
        justify="Center"
        decor1="no"
        />
      <label loc="215 140" size="30 20"
        style="Label1"
        label="deg"
        justify="Left"
        />
      <label loc="215 80" size="30 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <label loc="10 140" size="140 20"
        style="Label1"
        label="Small angle phase shift"
        justify="Left"
        />
      <label loc="40 120" size="60 20"
        style="Label1"
        label="shape"
        justify="Left"
        />
      <label loc="40 100" size="70 20"
        style="Label1"
        label="fine power"
        justify="Left"
        />
      <label loc="40 80" size="60 20"
        style="Label1"
        label="power"
        justify="Left"
        />
      <label loc="40 60" size="60 20"
        style="Label1"
        label="width"
        justify="Left"
        />
      <label loc="10 40" size="140 20"
        style="Label1"
        label="Keep water along Z"
        justify="Left"
        />
      <check loc="10 20" size="120 20"
        style="Label1"
        label="Flipback"
        vq="flipback"
        vc="flipback='y' dps"
        vc2="flipback='n' dps"
        set="$VALUE=(flipback='y' )"
        tooltip="Select solvent flipback pulse (flipback)"
        />
      <label loc="215 60" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <entry loc="150 60" size="60 20"
        style="PlainText"
        vq="flippw flipback"
        vc="flippw=$VALUE*1000"
        set="$VALUE=flippw/1000"
        show="$ENABLE=(flipback='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Solvent Flipback pulse length (flippw)"
        />
      <entry loc="150 80" size="60 20"
        style="PlainText"
        vq="flippwr flipback"
        vc="flippwr=$VALUE"
        set="$VALUE=flippwr"
        show="$ENABLE=(flipback='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Solvent Flipback pulse power (flippwr)"
        />
      <entry loc="150 100" size="60 20"
        style="PlainText"
        vq="flippwrf flipback"
        vc="flippwrf=$VALUE"
        set="$VALUE=flippwrf"
        show="$ENABLE=(flipback='y' )"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="110 120" size="130 20"
        style="PlainText"
        vq="flipshape flipback"
        vc="flipshape='$VALUE'"
        set="$VALUE=flipshape"
        show="$ENABLE=(flipback='y' )"
        disable="Grayed out"
        tooltip="Shape definition of the Flipback Pulse (flipshape)"
        />
      <entry loc="150 140" size="60 20"
        style="PlainText"
        vq="phincr1 flipback"
        vc="phincr1=$VALUE"
        set="$VALUE=phincr1"
        show="$ENABLE=(flipback='y' )"
        disable="Grayed out"
        tooltip="Small angle phase shift for the Flipback Pulse (phincr1)"
        />
    </group>
    <group loc="260 220" size="190 65"
      style="Heading1"
      label="Misc. Options"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FlipBackgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <check loc="10 40" size="145 20"
        style="Label1"
        label="Gradient alteration"
        vq="alt_grd"
        vc="alt_grd='y'"
        vc2="alt_grd='n'"
        set="$VALUE=(alt_grd='y' )"
        tooltip="Change gradient sign on odd scans (alt_grd)"
        />
      <check loc="10 20" size="155 20"
        style="Label1"
        label="Lock gating"
        vq="lkgate_flg"
        vc="lkgate_flg='y'"
        vc2="lkgate_flg='n'"
        set="$VALUE=(lkgate_flg='y' )"
        tooltip="Turn lock control on/off during the sequence and acquisition (lkgate_flg)"
        />
    </group>
    <group loc="260 25" size="190 90"
      style="Heading1"
      label="T1rho filter"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="PURGEgroup_ddrtc"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <check loc="10 20" size="115 20"
        style="Label1"
        label="Purge Pulse"
        vq="prg_flg"
        vc="prg_flg='y' ddrtc=ddrtc-2*pw/3.14 dps"
        vc2="prg_flg='n' ddrtc=ddrtc+2*pw/3.14 dps"
        set="$VALUE=(prg_flg='y' )"
        tooltip="Turn purge pulse on/off (prg_flg)"
        />
      <label loc="10 65" size="90 20"
        style="Label1"
        label="at power"
        justify="Left"
        />
      <label loc="10 45" size="90 20"
        style="Label1"
        label="Pulse duration"
        justify="Left"
        />
      <label loc="155 45" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <entry loc="100 45" size="50 20"
        style="PlainText"
        vq="prgtime prg_flg"
        vc="prgtime=$VALUE/1000"
        set="$VALUE=prgtime*1000"
        show="$ENABLE=(prg_flg='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Purge Pulse length (prgtime) in milliseconds"
        />
      <entry loc="100 65" size="50 20"
        style="PlainText"
        vq="prgpwr prg_flg"
        vc="prgpwr=$VALUE"
        set="$VALUE=prgpwr"
        show="$ENABLE=(prg_flg='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Power level for the Purge Pulse (prgpwr)"
        />
    </group>
    <group loc="260 115" size="190 105"
      style="Heading1"
      label="Steady State"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="SSPULgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="155 80" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="20 80" size="60 20"
        style="Label1"
        label="duration"
        justify="Left"
        />
      <label loc="20 60" size="60 20"
        style="Label1"
        label="strength"
        justify="Left"
        />
      <check loc="10 20" size="140 20"
        style="Label1"
        label="GRD-90-GRD"
        vq="sspul"
        vc="sspul='y' dps"
        vc2="sspul='n' dps"
        set="$VALUE=(sspul='y' )"
        tooltip="Steady state option on/off (sspul)"
        />
      <entry loc="100 80" size="50 20"
        style="PlainText"
        vq="gt0 sspul "
        vc="gt0=$VALUE/1000"
        set="$VALUE=gt0*1000"
        show="$ENABLE=(sspul='y' )"
        digits="1"
        disable="Grayed out"
        tooltip="Hmospoil gradient duration (gt0)"
        />
      <entry loc="100 60" size="50 20"
        style="PlainText"
        vq="gzlvl0 sspul"
        vc="gzlvl0=$VALUE"
        set="$VALUE=gzlvl0"
        show="$ENABLE=(sspul='y' )"
        digits="0"
        disable="Grayed out"
        tooltip="Homospoil gradient power (gzlvl0)"
        />
      <label loc="10 40" size="70 20"
        style="Label1"
        label="Gradient -"
        justify="Left"
        />
    </group>
    <group loc="5 25" size="250 170"
      style="Heading1"
      label="WATERGATE echo"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ESgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <group loc="0 40" size="240 130"
        vq="flag3919 flagW5"
        show="$SHOW=((flag3919='n') and (flagW5='n'))"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <label loc="210 0" size="30 20"
          style="Label1"
          label="ms"
          justify="Left"
          />
        <entry loc="145 0" size="60 20"
          style="PlainText"
          vq="wgspw"
          vc="wgspw=$VALUE*1000"
          set="$VALUE=wgspw/1000"
          digits="1"
          />
        <label loc="210 20" size="30 20"
          style="Label1"
          label="dB"
          justify="Left"
          />
        <label loc="210 80" size="30 20"
          style="Label1"
          label="deg"
          justify="Left"
          />
        <label loc="10 80" size="140 20"
          style="Label1"
          label="Small angle phase shift"
          justify="Left"
          />
        <label loc="10 60" size="80 20"
          style="Label1"
          label="Soft shape"
          justify="Left"
          />
        <label loc="10 40" size="95 20"
          style="Label1"
          label="Soft fine power"
          justify="Left"
          />
        <entry loc="145 80" size="60 20"
          style="PlainText"
          vq="phincr2"
          vc="phincr2=$VALUE"
          set="$VALUE=phincr2"
          />
        <label loc="10 20" size="80 20"
          style="Label1"
          label="Soft power"
          justify="Left"
          />
        <label loc="10 0" size="80 20"
          style="Label1"
          label="Soft width"
          justify="Left"
          />
        <button loc="35 105" size="170 20"
          style="Heading2"
          label="Recreate WG soft shape"
          vc="make_wgshape"
          bg="VJBackground"
          justify="Center"
          decor1="no"
          />
        <entry loc="145 40" size="60 20"
          style="PlainText"
          vq="wgspwrf"
          vc="wgspwrf=$VALUE"
          set="$VALUE=wgspwrf"
          />
        <entry loc="105 60" size="130 20"
          style="PlainText"
          vq="wgsshape"
          vc="wgsshape='$VALUE'"
          set="$VALUE=wgsshape"
          />
        <entry loc="145 20" size="60 20"
          style="PlainText"
          vq="wgspwr"
          vc="wgspwr=$VALUE"
          set="$VALUE=wgspwr"
          />
      </group>
      <label loc="10 20" size="110 20"
        style="Label1"
        label="WG Method"
        />
      <menu loc="120 20" size="120 20"
        style="PlainText"
        vq="flag3919 flagW5"
        vc="substr('$VALUE',1):$v1 substr('$VALUE',2):$v2 flag3919=$v1 flagW5=$v2 dps"
        set="$VALUE=flag3919+' '+flagW5"
        editable="No"
        >
        <mlabel 
          label="3-9-19"
          chval="y n"
          />
        <mlabel 
          label="soft180soft"
          chval="n n"
          />
        <mlabel 
          label="W5"
          chval="n y"
          />
      </menu>
      <group loc="10 40" size="240 45"
        vq="flag3919 flagW5"
        show="$SHOW=((flag3919='y') or (flagW5='y'))"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <label loc="0 10" size="105 20"
          style="Label1"
          label="Interpulse delay"
          />
        <label loc="200 10" size="30 20"
          style="Label1"
          label="µs"
          />
        <entry loc="134 10" size="60 20"
          style="PlainText"
          vq="wgtau"
          vc="wgtau=$VALUE/1000000"
          set="$VALUE=wgtau*1000000"
          digits="1"
          />
      </group>
    </group>
    <group loc="5 195" size="250 90"
      style="Heading1"
      label="WATERGATE gradient"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ESgroup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="205 40" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="205 60" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <label loc="10 60" size="100 20"
        style="Label1"
        label="Recovery time"
        justify="Left"
        />
      <label loc="10 40" size="60 20"
        style="Label1"
        label="Duration"
        justify="Left"
        />
      <label loc="10 20" size="60 20"
        style="Label1"
        label="Strength"
        justify="Left"
        />
      <entry loc="140 20" size="60 20"
        style="PlainText"
        vq="gzlvlwg"
        vc="gzlvlwg=$VALUE"
        set="$VALUE=gzlvlwg"
        digits="0"
        disable="Grayed out"
        tooltip="Gradient level in the WG block"
        />
      <entry loc="140 60" size="60 20"
        style="PlainText"
        vq="gstabwg"
        vc="gstabwg=$VALUE/1000"
        set="$VALUE=gstabwg*1000"
        digits="1"
        disable="Grayed out"
        tooltip="Gradient recovery delay in the WG block"
        />
      <entry loc="140 40" size="60 20"
        style="PlainText"
        vq="gtwg"
        vc="gtwg=$VALUE/1000"
        set="$VALUE=gtwg*1000"
        digits="1"
        disable="Grayed out"
        tooltip="Gradient duration in the WG block"
        />
    </group>
    <textmessage loc="10 0" size="240 25"
      style="Label1"
      label="water_WG"
      vq="pslabel"
      set="$VALUE=pslabel"
      />
  </group>
</template>
