<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PulseSequence" element="pages" type="acquisition" >
  <group size="620 205"
    style="Heading1"
    label="Pulse Sequence"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;29)"
    bg=""
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PulseSequence"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="10 0" size="390 25"
      bg=""
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="SeqDisplay2"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <textmessage loc="0 0" size="240 25"
        style="PlainText"
        label="ROESYAD"
        vq="pslabel"
        set="$VALUE=pslabel"
        />
    </group>
    <group loc="215 25" size="220 150"
      style="Heading1"
      label="ROESYAD"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="zfilter"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <label loc="10 85" size="140 20"
        style="Heading1"
        label="ROESY Tilt Factor"
        />
      <check loc="10 20" size="130 20"
        style="Label1"
        label="Purge PFG"
        vq="zfilt PFGflg"
        vc="zfilt='y'"
        vc2="zfilt='n'"
        set="$VALUE=(zfilt='y' and PFGflg='y')"
        />
      <label loc="195 60" size="25 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <button loc="115 105" size="75 20"
        style="Heading2"
        label="Less Tilt"
        vq="tpos1 tpos2 tof spinlockR slpwrR tiltfactor"
        vc="spinlockR=0.8*sw setpower(spinlockR,tn):slpwrR,slpwR getpower(slpwrR,tn):spinlockR spinlockR=spinlockR slpwrR=slpwrR tiltfactor=1.2 atan(tiltfactor):$tmp tiltangle=(180/3.141)*$tmp"
        bg=""
        decor1=""
        />
      <entry loc="130 125" size="60 20"
        style="PlainText"
        vq="tiltfactor tof tpos1 tpos1 spinlockR"
        vc="tiltfactor=$VALUE tpos1=tof+(spinlockR/tiltfactor) tpos2=tof-(spinlockR/tiltfactor) atan(tiltfactor):$tmp tiltangle=(180/3.141)*$tmp"
        set="$VALUE=tiltfactor"
        digits="4"
        />
      <label loc="10 125" size="120 20"
        style="Label1"
        label="ROESY offset Factor"
        />
      <button loc="10 105" size="75 20"
        style="Heading2"
        label="Default Tilt"
        vq="tpos1 tpos2 spinlockR tof slpwrR tiltfactor"
        vc="spinlockR=sw*.8 setpower(spinlockR,tn):slpwrR,slpwR getpower(slpwrR,tn):spinlockR  spinlockR=spinlockR slpwrR=slpwrR tiltfactor=1.732 atan(tiltfactor):$tmp tiltangle=(180/3.141)*$tmp"
        bg=""
        decor1=""
        />
      <entry loc="130 40" size="60 20"
        style="PlainText"
        vq="gzlvlz zfilt PFGflg"
        vc="gzlvlz=$VALUE"
        set="$VALUE=gzlvlz"
        show="$ENABLE=(zfilt='y' and PFGflg='y')"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="130 60" size="60 20"
        style="PlainText"
        vq="gtz zfilt PFGflg"
        vc="gtz=$VALUE/1000"
        set="$VALUE=gtz*1000"
        show="$ENABLE=(zfilt='y' and PFGflg='y')"
        disable="Grayed out"
        />
      <label loc="25 60" size="80 20"
        style="Label1"
        label="G- duration"
        justify="Left"
        />
      <label loc="25 40" size="80 20"
        style="Label1"
        label="G- strength"
        justify="Left"
        />
    </group>
    <group loc="5 25" size="205 150"
      style="Heading1"
      label="SpinLock"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="MLEV17c"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <label loc="10 100" size="80 20"
        style="Heading1"
        label="Tilt Angle"
        />
      <label loc="10 80" size="105 20"
        style="Label1"
        label="Pi/2 pulse width"
        justify="Left"
        />
      <label loc="10 60" size="95 20"
        style="Label1"
        label="Power"
        justify="Left"
        />
      <entry loc="115 60" size="55 20"
        style="PlainText"
        vq="slpwrR"
        vc="getpower($VALUE,tn):spinlockR setpower(spinlockR,tn):slpwrR,slpwR spinlockR=spinlockR slpwR=slpwR"
        set="$VALUE=slpwrR"
        disable="Grayed out"
        />
      <entry loc="115 80" size="55 20"
        style="PlainText"
        vq="slpwR"
        vc="slpwR=$VALUE"
        set="$VALUE=slpwR"
        digits="3"
        disable="Grayed out"
        />
      <entry loc="115 100" size="55 20"
        style="PlainText"
        vq="tiltfactor tiltangle"
        vc="tiltangle=$VALUE $tmp=(3.141/180)*tiltangle tan($tmp):tiltfactor"
        set="$VALUE=tiltangle"
        />
      <label loc="175 100" size="30 20"
        style="Label1"
        label="deg"
        justify="Left"
        />
      <label loc="175 80" size="25 20"
        style="Label1"
        label="Âµs"
        justify="Left"
        />
      <label loc="175 60" size="30 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <label loc="175 40" size="30 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <entry loc="115 40" size="55 20"
        style="PlainText"
        vq="spinlockR"
        vc="setpower($VALUE,tn):slpwrR,slpwR getpower(slpwrR,tn):spinlockR spinlockR=spinlockR slpwR=slpwR"
        set="$VALUE=spinlockR"
        disable="Grayed out"
        />
      <label loc="10 40" size="95 20"
        style="Label1"
        label="Strength"
        justify="Left"
        />
      <label loc="10 20" size="80 20"
        style="Label1"
        label="Mixing time"
        justify="Left"
        />
      <entry loc="115 20" size="55 20"
        style="PlainText"
        vq="mixR"
        vc="mixR=$VALUE/1000"
        set="$VALUE=mixR*1000"
        disable="Grayed out"
        />
      <label loc="175 20" size="25 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
    </group>
    <group loc="440 25" size="170 150"
      style="Heading1"
      label="Steady State"
      bg=""
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="sspulgroup"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <label loc="145 80" size="25 20"
        style="Heading1"
        label="ms"
        justify="Left"
        />
      <check loc="10 100" size="150 20"
        style="Label1"
        label="trim(x)-trim(y) option"
        vq="sspul PFGflg"
        vc="sspul='y'"
        vc2="sspul='n'"
        set="$VALUE=(sspul='y' and PFGflg='n')"
        show="$ENABLE=(PFGflg='n')*2-1"
        />
      <entry loc="80 80" size="60 20"
        style="PlainText"
        vq="hsgt sspul PFGflg"
        vc="hsgt=$VALUE/1000"
        set="$VALUE=hsgt*1000"
        show="$ENABLE=(sspul='y' and PFGflg='y')*2-1"
        disable="Grayed out"
        />
      <entry loc="80 60" size="60 20"
        style="PlainText"
        vq="hsglvl sspul PFGflg"
        vc="hsglvl=$VALUE"
        set="$VALUE=hsglvl"
        show="$ENABLE=(sspul='y' and PFGflg='y')*2-1"
        digits="0"
        disable="Grayed out"
        />
      <label loc="20 80" size="60 20"
        style="Label1"
        label="time"
        justify="Left"
        />
      <label loc="20 60" size="60 20"
        style="Label1"
        label="strength"
        justify="Left"
        />
      <check loc="10 20" size="150 20"
        style="Label1"
        label="Grad-90-Grad option"
        vq="sspul PFGflg"
        vc="sspul='y'"
        vc2="sspul='n'"
        set="$VALUE=(sspul='y' and PFGflg='y')"
        show="$ENABLE=(PFGflg='y')*2-1"
        />
      <label loc="10 40" size="70 20"
        style="Label1"
        label="Gradient -"
        justify="Left"
        />
    </group>
  </group>
</template>
