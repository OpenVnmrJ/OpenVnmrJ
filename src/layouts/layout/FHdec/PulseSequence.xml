<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PulseSequence" element="pages" type="acquisition" >
  <group size="670 255"
    style="Heading1"
    label="Pulse Sequence"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;29)"
    bg=""
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="PulseSequence"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="5 205" size="250 50"
      style="Heading1"
      label="Homospoil"
      bg=""
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Homospoil"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="10 20" size="105 20"
        style="Heading1"
        label="Homospoil time"
        justify="Left"
        />
      <entry loc="120 20" size="60 20"
        style="PlainText"
        vq="hst hs"
        vc="hst=$VALUE*.001"
        set="$VALUE=hst*1000"
        show="$ENABLE=(hs='y' or hs='yy' or hs='ny' or hs='yn')"
        digits="1"
        disable="Grayed out"
        />
      <label loc="185 20" size="30 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
    </group>
    <group loc="5 135" size="250 70"
      style="Heading1"
      label="FH decoupling"
      bg=""
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Homospoil"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="185 20" size="35 20"
        style="Heading1"
        label="ppm"
        justify="Left"
        />
      <button loc="120 40" size="120 20"
        style="Heading2"
        label="Show Manual"
        vc="clear man('FHdec') vnmrjcmd('setpage','Process','Text Output')"
        bg=""
        decor1=""
        />
      <entry loc="120 20" size="60 20"
        style="PlainText"
        vq="dofppm"
        vc="dofppm=$VALUE setoffset(dofppm,dn):dof"
        set="$VALUE=dofppm"
        digits="2"
        disable="Grayed out"
        />
      <label loc="10 20" size="110 20"
        style="Label1"
        label="Decoupler offset"
        justify="Left"
        />
    </group>
    <group loc="260 130" size="350 125"
      style="Heading1"
      label="FH decoupler shape"
      bg=""
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FHdecshape"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <button loc="130 20" size="205 20"
        style="Heading2"
        label="Create new FH decoupler shape"
        vq="create_decshape"
        vc="makeFHdecshape(bandwidth,maxjhf,dutyc)"
        show="$ENABLE=(create_decshape='y')*2-1 "
        bg=""
        decor1=""
        />
      <entry loc="240 80" size="70 20"
        style="PlainText"
        vq="dutyc create_decshape"
        vc="dutyc=$VALUE/100"
        set="$VALUE=dutyc*100"
        show="$ENABLE=(create_decshape='y')*2-1"
        digits="0"
        disable="Grayed out"
        />
      <check loc="10 20" size="120 20"
        style="Label1"
        label="Recreate shape"
        vq="create_decshape"
        vc="create_decshape='y'"
        vc2="create_decshape='n'"
        set="if(create_decshape = 'y') then $VALUE=1 else $VALUE=0 endif"
        />
      <label loc="315 100" size="25 20"
        style="Label1"
        label="%"
        justify="Left"
        />
      <label loc="315 80" size="25 20"
        style="Label1"
        label="%"
        justify="Left"
        />
      <label loc="315 60" size="25 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <label loc="315 40" size="25 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <label loc="10 40" size="210 20"
        style="Label1"
        label="Frequency range to be decoupled"
        justify="Left"
        />
      <label loc="10 60" size="210 20"
        style="Label1"
        label="Maximum FH coupling"
        justify="Left"
        />
      <label loc="10 80" size="210 20"
        style="Label1"
        label="Decoupler duty cycle"
        justify="Left"
        />
      <entry loc="240 40" size="70 20"
        style="PlainText"
        vq="bandwidth create_decshape"
        vc="bandwidth=$VALUE"
        set="$VALUE=bandwidth"
        show="$ENABLE=(create_decshape='y')*2-1"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="240 60" size="70 20"
        style="PlainText"
        vq="maxjhf create_decshape"
        vc="maxjhf=$VALUE"
        set="$VALUE=maxjhf"
        show="$ENABLE=(create_decshape='y')*2-1 "
        digits="1"
        disable="Grayed out"
        />
      <textmessage loc="240 100" size="70 20"
        style="PlainText"
        label="40"
        vq="dutyc"
        set="$VALUE=(0.8-dutyc)*100"
        />
      <label loc="10 100" size="170 20"
        style="Label1"
        label="Effective receiver duty cycle"
        justify="Left"
        />
    </group>
    <group loc="260 25" size="350 105"
      style="Heading1"
      label="Current Decoupler Settings"
      bg=""
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Major"
      >
      <textmessage loc="270 40" size="75 20"
        style="PlainText"
        label="16160"
        vq="dmf"
        set="$VALUE=dmf"
        />
      <textmessage loc="50 80" size="295 20"
        style="PlainText"
        label="waltz16"
        vq="dseq"
        set="$VALUE=dseq"
        digits="1"
        />
      <textmessage loc="160 40" size="70 20"
        style="PlainText"
        label="4.00"
        vq="dofppm"
        set="$VALUE=dofppm"
        digits="2"
        />
      <label loc="230 40" size="30 20"
        style="Label1"
        label="dmf"
        justify="Left"
        />
      <textmessage loc="160 60" size="70 20"
        style="PlainText"
        label="90"
        vq="dres"
        set="$VALUE=dres"
        />
      <textmessage loc="270 20" size="70 20"
        style="PlainText"
        label="ccw"
        vq="dmm"
        set="$VALUE=dmm"
        digits="1"
        />
      <label loc="230 20" size="40 20"
        style="Label1"
        label="dmm"
        justify="Left"
        />
      <textmessage loc="160 20" size="70 20"
        style="PlainText"
        label="-399.8"
        vq="dof"
        set="$VALUE=dof"
        digits="1"
        />
      <label loc="110 60" size="50 20"
        style="Label1"
        label="dres"
        justify="Left"
        />
      <label loc="110 40" size="50 20"
        style="Label1"
        label="dofppm"
        justify="Left"
        />
      <label loc="110 20" size="50 20"
        style="Label1"
        label="dof"
        justify="Left"
        />
      <textmessage loc="50 60" size="60 20"
        style="PlainText"
        label="39"
        vq="dpwr"
        set="$VALUE=dpwr"
        digits="0"
        />
      <textmessage loc="50 40" size="60 20"
        style="PlainText"
        label="nnn"
        vq="dm"
        set="$VALUE=dm"
        digits="1"
        />
      <textmessage loc="50 20" size="60 20"
        style="PlainText"
        label="H1"
        vq="dn"
        set="$VALUE=dn"
        digits="1"
        />
      <label loc="10 80" size="40 20"
        style="Label1"
        label="dseq"
        justify="Left"
        />
      <label loc="10 60" size="40 20"
        style="Label1"
        label="dpwr"
        justify="Left"
        />
      <label loc="10 40" size="40 20"
        style="Label1"
        label="dm"
        justify="Left"
        />
      <label loc="10 20" size="40 20"
        style="Label1"
        label="dn"
        justify="Left"
        />
    </group>
    <group loc="5 25" size="250 110"
      style="Heading1"
      label="Excitation"
      bg=""
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Major"
      >
      <menu loc="180 80" size="60 20"
        style="PlainText"
        label="menu"
        vq="pw"
        vc="parunits('set','pw','$VALUE')"
        set="parunits('get','pw'):$VALUE"
        bg=""
        editable="No"
        >
        <mlabel 
          label="µs"
          chval="us"
          />
        <mlabel 
          label="ms"
          chval="ms"
          />
      </menu>
      <menu loc="180 60" size="60 20"
        style="PlainText"
        vq="d2"
        vc="parunits('set','d2','$VALUE')"
        set="parunits('get','d2'):$VALUE"
        bg=""
        editable="No"
        >
        <mlabel 
          label="s"
          chval="sec"
          />
        <mlabel 
          label="ms"
          chval="ms"
          />
      </menu>
      <menu loc="180 40" size="60 20"
        style="PlainText"
        label="menu"
        vq="p1"
        vc="parunits('set','p1','$VALUE')"
        set="parunits('get','p1'):$VALUE"
        bg=""
        editable="No"
        >
        <mlabel 
          label="µs"
          chval="us"
          />
        <mlabel 
          label="ms"
          chval="ms"
          />
      </menu>
      <menu loc="180 20" size="60 20"
        style="PlainText"
        vq="d1"
        vc="parunits('set','d1','$VALUE')"
        set="parunits('get','d1'):$VALUE"
        bg=""
        editable="No"
        >
        <mlabel 
          label="s"
          chval="sec"
          />
        <mlabel 
          label="ms"
          chval="ms"
          />
      </menu>
      <entry loc="120 40" size="60 20"
        style="PlainText"
        vq="p1"
        vc="vnmrunits('set','p1',$VALUE)"
        set="vnmrunits('get','p1'):$VALUE"
        show="$ENABLE=(p1&gt;0)"
        digits="2"
        disable="Grayed out"
        />
      <label loc="10 80" size="110 20"
        style="Label1"
        label="Observe Pulse"
        justify="Left"
        />
      <label loc="10 60" size="100 20"
        style="Label1"
        label="Inter-pulse delay"
        justify="Left"
        />
      <label loc="10 40" size="90 20"
        style="Label1"
        label="First pulse"
        justify="Left"
        />
      <label loc="10 20" size="110 20"
        style="Label1"
        label="Relaxation delay"
        justify="Left"
        />
      <entry loc="120 60" size="60 20"
        style="PlainText"
        vq="d2"
        vc="vnmrunits('set','d2',$VALUE)"
        set="vnmrunits('get','d2'):$VALUE"
        show="$ENABLE=(d2&gt;0)"
        digits="3"
        disable="Grayed out"
        />
      <entry loc="120 80" size="60 20"
        style="PlainText"
        vq="pw"
        vc="vnmrunits('set','pw',$VALUE)"
        set="vnmrunits('get','pw'):$VALUE"
        show="$ENABLE=(pw&gt;0)"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="120 20" size="60 20"
        style="PlainText"
        vq="d1"
        vc="vnmrunits('set','d1',$VALUE)"
        set="vnmrunits('get','d1'):$VALUE"
        show="$ENABLE=(d1&gt;0)"
        digits="3"
        disable="Grayed out"
        />
    </group>
    <textmessage loc="10 0" size="170 25"
      style="PlainText"
      label="FHdec"
      vq="pslabel"
      set="$VALUE=pslabel"
      />
  </group>
</template>
