<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="shim3d_dispplot" element="pages" type="acquisition" >
  <group size="650 250"
    style="Heading1"
    label="3D Disp/Plot/Quit"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="shim3d_dispplot"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <button loc="385 10" size="255 25"
      style="Heading2"
      label="Set mapname into probe file"
      vq="probe"
      vc="gxyzupdateprobe"
      show="gxyzupdateprobe('check'):$ENABLE"
      bg="transparent"
      decor1="yes"
      halignment="Center"
      valignment="Center"
      />
    <group loc="5 45" size="315 195"
      style="Heading1"
      label="Display / Plot"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Displayinh"
      useref="no"
      subtype="Major"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="10 165" size="115 20"
        style="Label1"
        label="Summary PDF"
        justify="Left"
        />
      <group loc="130 125" size="180 20"
        style="Heading1"
        show="gxyzshimPDF('check'):$SHOW"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <menu loc="35 0" size="145 20"
          style="Label1"
          label="menu"
          vq="pltopt"
          vc="pltopt='$VALUE'"
          set="$VALUE=pltopt"
          editable="No"
          >
          <mlabel 
            label="Printer"
            chval="y"
            />
          <mlabel 
            label="PDF file"
            chval="p"
            />
          <mlabel 
            label="None"
            chval="n"
            />
        </menu>
      </group>
      <group loc="130 125" size="180 20"
        style="Heading1"
        show="gxyzshimPDF('check'):$c $SHOW=($c=0)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <menu loc="35 0" size="145 20"
          style="Label1"
          label="menu"
          vq="pltopt"
          vc="pltopt='$VALUE'"
          set="$VALUE=pltopt"
          editable="No"
          >
          <mlabel 
            label="Printer"
            chval="y"
            />
          <mlabel 
            label="None"
            chval="n"
            />
        </menu>
      </group>
      <button loc="10 25" size="210 20"
        style="Heading2"
        label="Display map of"
        vc="gxyzdispmap('display','custom')"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <filemenu loc="220 25" size="90 20"
        style="PlainText"
        vq="gxyzshimdisp"
        vc="gxyzshimdisp='$VALUE' gxyzdispmap('display','custom')"
        set="$VALUE=gxyzshimdisp"
        file="$VALUE=userdir+'/persistence/gxyzshimdisp'"
        type="file"
        bg="VJBackground"
        editable="No"
        statshow="yes"
        elastic="no"
        display="yes"
        />
      <button loc="220 145" size="90 20"
        style="Heading2"
        label="Reset"
        vc="gxyzshimPDF('cleanup') gxyzshimPSn=1"
        show="gxyzshimPDF('check'):$ENABLE"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="220 165" size="90 20"
        style="Heading2"
        label="Show"
        vq="pltopt"
        vc="gxyzshimPDF('show')"
        show="gxyzshimPDF('check'):$c exists(gxyzshimPDF,'file'):$e $ENABLE=(pltopt='p' and $e and $c)*2-1"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="130 165" size="90 20"
        style="Heading2"
        label="Make"
        vq="pltopt"
        vc="gxyzshimPDF('make')"
        show="gxyzshimPDF('check'):$c $ENABLE=(pltopt='p' and $c)*2-1"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <group loc="130 145" size="75 20"
        style="Heading1"
        show="gxyzshimPDF('check'):$SHOW"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <textmessage loc="0 0" size="45 20"
          style="PlainText"
          vq="gxyzshimPSn pltopt"
          set="if pltopt='p' then $VALUE=gxyzshimPSn else $VALUE='-' endif"
          show="$ENABLE=(pltopt='p')*2-1"
          />
      </group>
      <button loc="160 85" size="65 20"
        style="Heading2"
        label="Editor"
        vc="gxyzshimlog"
        show="exists(userdir+'/3Dshimlib/calibs/shimlog.txt','file'):$ENABLE"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="225 85" size="85 20"
        style="Heading2"
        label="Realtime"
        vc="gxyzshimlog('real')"
        show="exists(userdir+'/3Dshimlib/calibs/shimlog.txt','file'):$ENABLE"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="10 65" size="300 20"
        style="Heading2"
        label="Plot all shim-maps"
        vc="gxyzdispmap('plot','all')"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="10 45" size="300 20"
        style="Heading2"
        label="Display shim-map amp. images"
        vc="$gxyzcode=gxyzcode $ni=ni $ni2=ni2 length(gxyzmapcode):$l ni=sqrt($l) ni2=ni gxyzcode=gxyzmapcode disp3Dmap('shimmaps.amp',1,2) gxyzcode=$gxyzcode ni=$ni ni2=$ni2"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="10 105" size="300 20"
        style="Heading2"
        label="Show output table from last shim cycle"
        vc="gxyzshimtable"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <label loc="10 85" size="105 20"
        style="Label1"
        label="Autoshim log file"
        justify="Left"
        />
      <label loc="10 145" size="115 20"
        style="Label1"
        label="Number of pages"
        justify="Left"
        />
      <label loc="10 125" size="85 20"
        style="Label1"
        label="Plot results"
        justify="Left"
        />
    </group>
    <group loc="330 45" size="310 130"
      style="Heading1"
      label="Shims"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="OtherUtilities"
      useref="no"
      subtype="Major"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <button loc="10 100" size="185 20"
        style="Heading2"
        label="Current parameters"
        vc="ft('nods') gxyzshimpwr"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="195 100" size="110 20"
        style="Heading2"
        label="Hardware"
        vc="readallshims gxyzshimpwr"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <label loc="10 80" size="295 20"
        style="Label1"
        label="Estimated shim power dissipation from:"
        justify="Left"
        />
      <button loc="10 60" size="295 20"
        style="Heading2"
        label="Read shims from hardware"
        vc="readallshims write('line3','Shims read from hardware')"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="10 40" size="295 20"
        style="Heading2"
        label="Load shims from current shim-maps"
        vc="rts('tmp'+mapname) load='y' su"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="10 20" size="295 20"
        style="Heading2"
        label="Load best shims from autoshimming"
        vc="rts(mapname+'_best') load='y' su"
        show="exists(userdir+'/shims/'+mapname+'_best','file'):$ENABLE"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
    </group>
    <group loc="330 180" size="310 60"
      style="Heading1"
      label="Quit"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Quit"
      useref="no"
      subtype="Major"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <button loc="10 20" size="295 30"
        style="Heading2"
        label="Quit 3D Shimming"
        vc="gxyzmapsys('exit')"
        show="expactive:$tmp if $tmp&gt;0.5 then $ENABLE=0 else $ENABLE=1 endif"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
    </group>
    <textmessage loc="15 10" size="370 25"
      style="PlainText"
      label="Mapname: Aegis_H1_8x8_02Jan2013_1"
      vq="mapname"
      set="$VALUE=('Mapname: '+mapname)"
      />
  </group>
</template>
