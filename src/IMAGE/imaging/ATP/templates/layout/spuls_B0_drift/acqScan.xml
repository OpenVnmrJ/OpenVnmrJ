<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acqScan" element="pages" type="acquisition" >
  <group size="800 270"
    label="Scan"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acqScan"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="435 0" size="210 220"
      style="Heading1"
      label="RF Pulse"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="spuls_par"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="5 105" size="95 20"
        style="PlainText"
        label="Calc. Power"
        vq="imprep"
        vc="imprep = 's'"
        vc2="imprep = 'n'"
        set="$VALUE = (imprep = 's')"
        />
      <button loc="20 195" size="120 20"
        style="Label4"
        label="Calibrate (180*)"
        vc="ldrf findpw(pw_start,pw_end)"
        bg="darkGreen"
        decor1="no"
        />
      <label loc="155 170" size="30 20"
        style="Label1"
        label="us"
        justify="Center"
        />
      <entry loc="95 170" size="60 20"
        style="PlainText"
        vq="pw_end"
        vc="pw_end=$VALUE"
        set="$VALUE=pw_end"
        digits="0"
        disable="Grayed out"
        />
      <label loc="65 170" size="30 20"
        style="Label1"
        label="and"
        justify="Center"
        />
      <entry loc="5 170" size="60 20"
        style="PlainText"
        vq="pw_start"
        vc="pw_start=$VALUE"
        set="$VALUE=pw_start"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 150" size="155 20"
        style="Label1"
        label="between pulse widths"
        />
      <label loc="5 130" size="155 20"
        style="Heading1"
        label="Calibrate RF"
        />
      <label loc="135 60" size="40 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <label loc="135 80" size="35 20"
        style="Label1"
        label="deg"
        justify="Left"
        />
      <label loc="135 20" size="40 20"
        style="Label1"
        label="us"
        justify="Left"
        />
      <entry loc="75 20" size="60 20"
        style="PlainText"
        vq="pw"
        vc="pw=$VALUE"
        set="$VALUE=pw"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="75 40" size="60 20"
        style="PlainText"
        vq="pwpat"
        vc="pwpat='$VALUE'"
        set="$VALUE=pwpat"
        disable="Grayed out"
        />
      <entry loc="75 60" size="60 20"
        style="PlainText"
        vq="tpwr imprep"
        vc="tpwr=$VALUE imprep='n'"
        set="$VALUE=tpwr"
        show="$VALUE = (imprep = 'n')"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="75 80" size="60 20"
        style="PlainText"
        vq="fliplist imprep"
        vc="fliplist=$VALUE imprep = 's'"
        set="$VALUE=fliplist"
        show="$VALUE = (imprep = 's')"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 80" size="70 20"
        style="Label1"
        label="Flipangle"
        justify="Left"
        />
      <label loc="5 60" size="50 20"
        style="Label1"
        label="Power"
        justify="Left"
        />
      <label loc="5 40" size="50 20"
        style="Label1"
        label="Shape"
        justify="Left"
        />
      <label loc="5 20" size="50 20"
        style="Label1"
        label="Width"
        justify="Left"
        />
    </group>
    <button loc="650 60" size="120 20"
      style="Heading3"
      label="Freq at cursor"
      vc="offset:H1offset tof=H1offset rfl=sw/2 rfp=0"
      bg="transparent"
      decor1="no"
      />
    <button loc="650 35" size="120 20"
      style="Label4"
      label="Set frequency"
      vc="prescan_freq('manual')"
      bg="darkGreen"
      decor1="no"
      />
    <button loc="650 10" size="120 20"
      style="Label4"
      label="Acquire"
      vc="im1Dglobal('prep') wdone='' werr='' wexp='im1Dglobal(`proc`)' au"
      bg="darkGreen"
      decor1="no"
      />
    <button loc="650 100" size="120 20"
      style="Heading3"
      label="Process"
      vc="im1Dglobal('proc')"
      decor1="no"
      />
    <button loc="650 125" size="120 20"
      style="Heading3"
      label="Line width"
      vc="nl dres"
      decor1="no"
      />
    <group loc="220 0" size="210 220"
      style="Heading1"
      label="Acquisition"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Acquisition_group"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="165 40" size="35 20"
        style="Label1"
        label="MHz"
        justify="Left"
        />
      <label loc="165 60" size="35 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <label loc="165 80" size="35 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <label loc="165 120" size="35 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <label loc="165 100" size="35 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <menu loc="105 20" size="75 20"
        style="PlainText"
        vq="tn"
        vc="tn='$VALUE'"
        set="$VALUE=tn"
        editable="No"
        >
        <mlabel 
          label="Proton"
          chval="H1"
          />
        <mlabel 
          label="F19"
          chval="F19"
          />
        <mlabel 
          label="P31"
          chval="P31"
          />
        <mlabel 
          label="C13"
          chval="C13"
          />
        <mlabel 
          label="Na23"
          chval="Na23"
          />
        <mlabel 
          label="Xe129"
          chval="Xe129"
          />
      </menu>
      <textmessage loc="105 40" size="60 20"
        style="PlainText"
        label="399.599"
        vq="sfrq"
        set="$VALUE=sfrq"
        digits="3"
        />
      <entry loc="105 60" size="60 20"
        style="PlainText"
        vq="tof"
        vc="tof=$VALUE"
        set="$VALUE=tof"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="105 80" size="60 20"
        style="PlainText"
        vq="sw"
        vc="sw=$VALUE"
        set="$VALUE=sw"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="105 100" size="60 20"
        style="PlainText"
        vq="at"
        vc="at=$VALUE/1000.0"
        set="$VALUE=at*1000.0"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="105 120" size="60 20"
        style="PlainText"
        vq="gain"
        vc="gain=$VALUE"
        set="$VALUE=gain"
        digits="0"
        disable="Grayed out"
        />
      <menu loc="105 140" size="70 20"
        style="PlainText"
        vq="presig"
        vc="presig='$VALUE'"
        set="$VALUE=presig"
        show="on('presig'):$VALUE"
        editable="No"
        >
        <mlabel 
          label="high"
          chval="h"
          />
        <mlabel 
          label="low"
          chval="l"
          />
      </menu>
      <label loc="5 120" size="100 20"
        style="Label1"
        label="Receiver Gain"
        justify="Left"
        />
      <label loc="5 20" size="100 20"
        style="Label1"
        label="Nucleus"
        justify="Left"
        />
      <label loc="5 40" size="100 20"
        style="Label1"
        label="Obs Frequency"
        justify="Left"
        />
      <label loc="5 60" size="100 20"
        style="Label1"
        label="Obs Offset"
        justify="Left"
        />
      <label loc="5 80" size="100 20"
        style="Label1"
        label="Spectral Width"
        justify="Left"
        />
      <label loc="5 100" size="100 20"
        style="Label1"
        label="Acquisition Time"
        justify="Left"
        />
      <label loc="5 140" size="95 20"
        style="Label1"
        label="presig"
        justify="Left"
        />
    </group>
    <group loc="5 225" size="555 45"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="Protocol"
      useref="no"
      subtype="Convenience"
      expanded="yes"
      >
      <textmessage loc="300 20" size="130 20"
        style="PlainText"
        label="BFG_73_45_100"
        vq="gcoil"
        set="$VALUE = gcoil"
        />
      <textmessage loc="300 0" size="130 20"
        style="PlainText"
        label=" "
        vq="rfcoil"
        set="$VALUE = rfcoil"
        />
      <label loc="220 20" size="80 20"
        style="Heading1"
        label="Gradient"
        justify="Left"
        />
      <label loc="220 0" size="80 20"
        style="Heading1"
        label="RF Coil"
        justify="Left"
        />
      <textmessage loc="80 20" size="130 20"
        style="PlainText"
        label="spuls"
        vq="pslabel"
        set="$VALUE = pslabel"
        />
      <entry loc="80 0" size="130 20"
        style="PlainText"
        vq="comment"
        vc="comment='$VALUE' xm1('addcomment')"
        set="$VALUE=comment"
        digits="0"
        disable="Grayed out"
        />
      <label loc="0 20" size="80 20"
        style="Heading1"
        label="Protocol"
        justify="Left"
        />
      <label loc="0 0" size="80 20"
        style="Heading1"
        label="Comment"
        justify="Left"
        />
    </group>
    <group loc="5 0" size="210 220"
      style="Heading1"
      label="Scan Parameters"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="trstuff"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <button loc="40 20" size="60 20"
        style="PlainText"
        label="Set"
        vq="tr pslabel"
        vc="array('tr',21,1800,0) tr[1]=1 da"
        show="$VALUE=(pslabel='spuls_B0_drift')"
        bg="transparent"
        decor1="yes"
        />
      <label loc="5 20" size="20 20"
        style="Label1"
        label="TR"
        justify="Left"
        />
      <check loc="5 120" size="160 20"
        style="PlainText"
        label="External Trigger"
        vq="ticks"
        vc="ticks=1"
        vc2="ticks=0"
        set="$VALUE=(ticks&lt;&gt;0)"
        show="on('ticks'):$VALUE"
        />
      <label loc="5 80" size="100 20"
        style="Label1"
        label="Block size"
        justify="Left"
        />
      <label loc="5 40" size="100 20"
        style="Label1"
        label="Averages"
        justify="Left"
        />
      <label loc="165 20" size="35 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <entry loc="105 60" size="60 20"
        style="PlainText"
        vq="np"
        vc="np=$VALUE*2"
        set="$VALUE=np/2"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="105 40" size="60 20"
        style="PlainText"
        vq="nt"
        vc="nt=$VALUE"
        set="$VALUE=nt"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 60" size="100 20"
        style="Label1"
        label="Complex points"
        justify="Left"
        />
      <entry loc="105 20" size="60 20"
        style="PlainText"
        vq="tr"
        vc="tr=$VALUE/1000.0"
        set="$VALUE=tr*1000.0"
        show="on('tr'):$VALUE"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="105 80" size="60 20"
        style="PlainText"
        vq="bs"
        vc="bs=$VALUE"
        set="$VALUE=bs"
        show="on('bs'):$ENABLE"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="105 100" size="60 20"
        style="PlainText"
        vq="ss"
        vc="ss=$VALUE"
        set="$VALUE=ss"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 100" size="100 20"
        style="Label1"
        label="Dummy scans"
        justify="Left"
        />
    </group>
  </group>
</template>
