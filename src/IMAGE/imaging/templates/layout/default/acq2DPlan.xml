<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acq2DPlan" element="pages" type="acquisition" >
  <group size="800 270"
    label="Plan"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acq2DPlan"
    useref="no"
    subtype="Convenience"
    expanded="yes"
    >
    <group loc="220 160" size="210 110"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Major"
      >
      <button loc="45 65" size="125 20"
        style="PlainText"
        label="Save for Shimming"
        vc="gs_slice"
        bg="transparent"
        decor1="no"
        />
      <button loc="45 40" size="125 20"
        style="PlainText"
        label="Save for Prescan"
        vc="Prescan_Orient = orient    Prescan_SliceOffset = pss0*10 "
        bg="transparent"
        decor1="no"
        />
      <button loc="45 15" size="125 20"
        style="PlainText"
        label="Save Milestone"
        vc="gplan('saveMilestoneStacks')"
        bg="transparent"
        decor1="no"
        />
    </group>
    <group loc="220 0" size="210 155"
      style="Heading1"
      label="Slice"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Slice"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <menu loc="25 20" size="160 20"
        style="PlainText"
        vq="pss iplanType"
        vc="gplan('alternateSlices', $VALUE)"
        set="gplan('getActStackInfo', 'alternateOrder'):$VALUE"
        editable="No"
        >
        <mlabel 
          label="Linear"
          chval="0"
          />
        <mlabel 
          label="Interleaved"
          chval="1"
          />
        <mlabel 
          label="Reverse linear"
          chval="2"
          />
        <mlabel 
          label="Reverse interleaved"
          chval="3"
          />
      </menu>
      <check loc="145 85" size="45 20"
        style="PlainText"
        label="Fix"
        vc="gplan('setGapMode',1)"
        vc2="gplan('setGapMode',0)"
        set="gplan('getGapMode'):$VALUE"
        />
      <label loc="115 65" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <label loc="115 85" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <label loc="115 105" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <entry loc="75 45" size="40 20"
        style="PlainText"
        vq="pss ns"
        vc="gplan('setValue','ns',$VALUE) ns=ns go('check') "
        set="$VALUE = size('pss')"
        disable="Grayed out"
        />
      <entry loc="75 65" size="40 20"
        style="PlainText"
        vq="thk"
        vc="gplan('setValue','thk',$VALUE) go('check')"
        set="$VALUE = thk"
        disable="Grayed out"
        />
      <entry loc="75 85" size="40 20"
        style="PlainText"
        vq="gap"
        vc="gplan('setValue','gap',$VALUE/10)"
        set="$VALUE = gap*10"
        disable="Grayed out"
        />
      <entry loc="75 105" size="40 20"
        style="PlainText"
        vq="pss0"
        vc="pss0=$VALUE/10.0 gplan('setValue','pss0',$VALUE/10)"
        set="$VALUE=pss0*10"
        disable="Grayed out"
        />
      <label loc="5 45" size="60 20"
        style="Label1"
        label="Slices"
        justify="Left"
        />
      <label loc="5 65" size="70 20"
        style="Label1"
        label="Thickness"
        justify="Left"
        />
      <label loc="5 85" size="60 20"
        style="Label1"
        label="Gap"
        justify="Left"
        />
      <label loc="5 105" size="60 20"
        style="Label1"
        label="Position"
        justify="Left"
        />
      <check loc="5 130" size="160 20"
        style="PlainText"
        label="Show order"
        vq="iplanType"
        vc="gplan('setDrawOrders', 1)"
        vc2="gplan('setDrawOrders', 0)"
        set="gplan('getActStackInfo', 'drawOrder'):$VALUE"
        />
    </group>
    <group loc="435 0" size="210 125"
      style="Heading1"
      label="Display Options"
      vq="iplanType"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="DisplayOptions"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 20" size="200 100"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <check loc="5 65" size="100 20"
          style="PlainText"
          label="Display Axes"
          vq="iplanType"
          vc="gplan('setDrawAxes', 1)"
          vc2="gplan('setDrawAxes', 0)"
          set="gplan('getActStackInfo', 'drawAxes'):$VALUE"
          />
        <check loc="5 80" size="90 20"
          style="PlainText"
          label="3D view"
          vq="iplanType"
          vc="gplan('setDraw3D', 1)"
          vc2="gplan('setDraw3D', 0)"
          set="gplan('getActStackInfo', 'draw3D'):$VALUE"
          />
        <button loc="45 0" size="115 20"
          style="PlainText"
          label="Clear Display"
          vc="gplan('clearStacks')"
          bg="transparent"
          decor1="no"
          />
        <button loc="45 20" size="115 20"
          style="PlainText"
          label="Show Slices"
          vc="iplanType = 0 gplan('setDefaultType', 0) iplanDefaultType=0 planValue='standard getCurrentStacks' setgplan('standard getCurrentStacks')"
          bg="transparent"
          decor1="yes"
          />
        <menu loc="45 40" size="115 20"
          style="PlainText"
          label="menu"
          vc="if ($VALUE=0) then gplan('setFillPolygon',0) gplan('setDisplayStyle',0) elseif ($VALUE=1) then gplan('setFillPolygon',1) gplan('setDisplayStyle',0) else gplan('setDisplayStyle',1) endif"
          set="gplan('getActStackInfo','style'):$s gplan('getActStackInfo','fill'):$f  if ($s=0) then if ($f=0) then $VALUE=0 else $VALUE=1 endif else $VALUE=2 endif"
          editable="No"
          >
          <mlabel 
            label="Normal"
            chval="0"
            />
          <mlabel 
            label="Filled"
            chval="1"
            />
          <mlabel 
            label="Single Line"
            chval="2"
            />
        </menu>
        <label loc="5 40" size="60 20"
          style="Label1"
          label="Style"
          justify="Left"
          />
      </group>
    </group>
    <group loc="435 125" size="210 145"
      style="Heading1"
      label="Sat Bands"
      vq="sat"
      show="exists('sat','parameter'):$VALUE"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="plansatbands"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <toggle loc="105 55" size="90 20"
        style="PlainText"
        label="View"
        vq="iplanType"
        vc="gplan('setDefaultType', 4) iplanDefaultType=4 setgplan('standard getCurrentStacks' )"
        vc2="gplan('setDefaultType', 0) iplanDefaultType=0 setgplan('standard getCurrentStacks' )"
        set="$VALUE = (iplanType = 4)"
        radiobutton="no"
        />
      <button loc="105 35" size="90 20"
        style="PlainText"
        label="Delete"
        vq="planSs"
        vc="if (size('satpos') = 1) then sat = n endif gplan('deleteSelected')  if (sat = 'n') then gplan('setDefaultType', 0) iplanDefaultType=0 setgplan('standard getcurrentStacks') endif"
        bg="transparent"
        decor1="no"
        />
      <button loc="105 15" size="90 20"
        style="PlainText"
        label="Add"
        vc="gplan('addAstack',4)"
        bg="transparent"
        decor1="no"
        />
      <group loc="5 115" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <entry loc="150 0" size="40 20"
          style="PlainText"
          vq="stheta planSs"
          vc="gplan('setValue','stheta',$VALUE)"
          set="gplan('getValue', 'stheta'):$VALUE"
          digits="0"
          disable="Grayed out"
          />
        <entry loc="105 0" size="40 20"
          style="PlainText"
          vq="sphi planSs"
          vc="gplan('setValue','sphi',$VALUE)"
          set="gplan('getValue', 'sphi'):$VALUE"
          digits="0"
          disable="Grayed out"
          />
        <entry loc="60 0" size="40 20"
          style="PlainText"
          vq="spsi planSs"
          vc="gplan('setValue','spsi',$VALUE)"
          set="gplan('getValue', 'spsi'):$VALUE"
          digits="0"
          disable="Grayed out"
          />
        <label loc="0 0" size="60 20"
          style="Label1"
          label="Angles"
          justify="Left"
          />
      </group>
      <group loc="5 75" size="155 40"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <label loc="0 0" size="60 20"
          style="Label1"
          label="Position"
          justify="Left"
          />
        <label loc="100 20" size="30 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="100 0" size="30 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <entry loc="60 20" size="40 20"
          style="PlainText"
          vq="satthk planSs"
          vc="gplan('setValue','satthk',$VALUE)"
          set="gplan('getValue', 'satthk'):$VALUE"
          disable="Grayed out"
          />
        <entry loc="60 0" size="40 20"
          style="PlainText"
          vq="satpos planSs"
          vc="gplan('setValue','satpos',$VALUE/10.0)"
          set="gplan('getValue', 'satpos'):$v $VALUE=$v*10"
          disable="Grayed out"
          />
        <label loc="0 20" size="60 20"
          style="Label1"
          label="Thickness"
          justify="Left"
          />
      </group>
      <label loc="5 55" size="55 20"
        style="Label1"
        label="Bands"
        justify="Left"
        />
      <textmessage loc="70 55" size="30 20"
        style="PlainText"
        label="0"
        vq="nsat sat satpos"
        set="$VALUE=size('satpos')*(sat='y')"
        />
      <check loc="5 20" size="90 20"
        style="PlainText"
        label="On/Off"
        vq="sat"
        vc="sat = 'y' gplan('setDefaultType', 4) iplanDefaultType=4 setgplan('standard getCurrentStacks' )"
        vc2="sat = 'n'  gplan('setDefaultType', 0) iplanDefaultType=0 setgplan('standard getCurrentStacks' )"
        set="$VALUE = (sat = 'y')"
        />
    </group>
    <group loc="5 0" size="210 270"
      style="Heading1"
      label="FOV"
      vq="iplanType"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FOV3D"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 70" size="200 65"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="3DFOV"
        useref="no"
        subtype="Convenience"
        expanded="yes"
        >
        <label loc="50 0" size="40 20"
          style="Label1"
          label="FOV"
          justify="Left"
          />
        <label loc="105 0" size="40 20"
          style="Label1"
          label="Offset"
          justify="Left"
          />
        <entry loc="50 20" size="50 20"
          style="PlainText"
          vq="lro"
          vc="gplan('setValue','lro',$VALUE/10.0)"
          set="$VALUE=lro*10.0"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="50 40" size="50 20"
          style="PlainText"
          vq="lpe"
          vc="gplan('setValue','lpe',$VALUE/10.0)"
          set="$VALUE=lpe*10.0"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="105 20" size="50 20"
          style="PlainText"
          vq="pro"
          vc="gplan('setValue','pro',$VALUE/10.0)"
          set="$VALUE=pro*10.0"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="105 40" size="50 20"
          style="PlainText"
          vq="ppe"
          vc="gplan('setValue','ppe',$VALUE/10.0)"
          set="$VALUE=ppe*10.0"
          show="gplan('getUseppe'):$v if ($v = 0) then $VALUE = 0 else $VALUE = 1 endif"
          digits="1"
          disable="Label"
          />
        <label loc="155 20" size="35 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="155 40" size="25 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <check loc="180 40" size="20 20"
          style="PlainText"
          vc="gplan('setUseppe',1) ppe=ppe"
          vc2="gplan('setUseppe',0)"
          set="gplan('getUseppe'):$VALUE"
          />
        <label loc="0 40" size="50 20"
          style="Label1"
          label="Phase"
          justify="Left"
          />
        <label loc="0 20" size="50 20"
          style="Label1"
          label="Read"
          justify="Left"
          />
      </group>
      <group loc="5 140" size="200 45"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="euler_horz"
        useref="no"
        subtype="Convenience"
        expanded="yes"
        >
        <label loc="0 0" size="180 20"
          style="Label1"
          label="Angles (psi, phi, theta)"
          justify="Left"
          />
        <entry loc="105 20" size="50 20"
          style="PlainText"
          vq="theta"
          vc="gplan('setValue','theta',$VALUE)"
          set="$VALUE=theta"
          digits="0"
          disable="Grayed out"
          />
        <entry loc="0 20" size="45 20"
          style="PlainText"
          vq="psi"
          vc="gplan('setValue','psi',$VALUE)"
          set="$VALUE=psi"
          digits="0"
          disable="Grayed out"
          />
        <entry loc="50 20" size="50 20"
          style="PlainText"
          vq="phi"
          vc="gplan('setValue','phi',$VALUE)"
          set="$VALUE=phi"
          digits="0"
          disable="Grayed out"
          />
      </group>
      <group loc="5 195" size="200 70"
        style="Heading1"
        label="3-Point Marking"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="Marking"
        useref="no"
        subtype="Minor"
        expanded="yes"
        >
        <textmessage loc="45 40" size="20 20"
          style="PlainText"
          label=" "
          vq="iplanMarking"
          set="if(iplanMarking&gt;0) then $VALUE=iplanMarking else $VALUE='' endif"
          />
        <button loc="105 45" size="90 20"
          style="Label1"
          label="Clear"
          vc="gplan('stopMarking') gplan('clearMarking') gplan('clearStacks')"
          bg="transparent"
          decor1="no"
          />
        <button loc="5 20" size="90 20"
          style="Label1"
          label="Start"
          vq="iplanMarking"
          vc="gplan('startMarking',3)"
          show="if(iplanMarking=0) then $VALUE=1 else $VALUE=0 endif"
          bg="transparent"
          decor1="no"
          toolTip="Select 1-3 points in displayed images to specify slice center slice position"
          />
        <button loc="105 20" size="90 20"
          style="Label1"
          label="Add Slices"
          vq="iplanMarking"
          vc="gplan('addAstack',0) gplan('stopMarking') iplanMarking=-1"
          show="if(iplanMarking&gt;0) then $VALUE=1 else $VALUE=0 endif"
          bg="transparent"
          decor1="no"
          />
      </group>
      <button loc="55 15" size="100 20"
        style="Label1"
        label="Add Slices"
        vq="iplanType planValue"
        vc="setgplan(planValue)"
        bg="transparent"
        decor1="no"
        />
      <group loc="5 40" size="200 25"
        vq="studyid"
        show="$VALUE=1"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Basic"
        >
        <filemenu loc="50 0" size="100 20"
          style="PlainText"
          vq="orient planValue"
          vc="iplanType = 0 planValue='$VALUE' setgplan('$VALUE')"
          set="$VALUE = planValue"
          file="exists(sqdir+'/plans','file'):$e if ($e = 0) then $VALUE=systemdir+'/imaging/templates/vnmrj/choicefiles/plans' else $VALUE=sqdir+'/plans' endif"
          type="file"
          editable="No"
          vq2="sqdir studyid"
          statshow="yes"
          elastic="no"
          display="yes"
          />
        <label loc="0 0" size="45 20"
          style="Label1"
          label="Orient"
          justify="Left"
          />
      </group>
    </group>
  </group>
</template>
