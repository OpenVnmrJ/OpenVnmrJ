<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="PrescanSetup" element="pages" type="sample" >
  <group size="880 280"
    label="Prescan Setup"
    vq="Prescan_ShowSetup panellevel"
    show="$VALUE = ((panellevel &gt; 0) AND (Prescan_ShowSetup &gt; 0))"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="yes"
    reference="PrescanSetup"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <group loc="705 205" size="115 30"
      vq="r3"
      show="$VALUE=(r3&lt;&gt;-1)"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <button loc="5 0" size="100 25"
        style="Heading3"
        label="Update"
        vq="r3"
        vc="prescan_CoilTable('update',rfcoil)"
        show="$VALUE=(r3=-1)"
        bg="transparent"
        decor1="no"
        />
    </group>
    <group loc="710 205" size="115 30"
      vq="r3"
      show="$VALUE=(r3=-1)"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <button loc="0 0" size="100 25"
        style="Heading3"
        label="Update"
        vq="r3"
        vc="prescan_CoilTable('update',rfcoil) r3=0"
        show="$VALUE=(r3=-1)"
        bg="graphics26"
        decor1="no"
        />
    </group>
    <button loc="710 240" size="100 25"
      style="Heading3"
      label="Close"
      vc="Prescan_ShowSetup=0 vnmrjcmd('setpage','Start','Prescan')"
      bg="transparent"
      decor1="no"
      />
    <group loc="665 0" size="210 195"
      style="Heading1"
      label="General Settings"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="prescan_general"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <button loc="50 160" size="100 25"
        style="Heading3"
        label="Set Defaults"
        vc="prescan_init"
        bg="transparent"
        decor1="no"
        />
      <group loc="5 85" size="200 60"
        vq="Prescan_ShowAdv"
        show="$VALUE=(Prescan_ShowAdv=1)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="0 20" size="90 20"
          style="Label1"
          label="Log Events"
          vq="Prescan_LogError"
          vc="Prescan_LogError=1"
          vc2="Prescan_LogError=0"
          set="$VALUE=(Prescan_LogError=1)"
          />
        <check loc="0 40" size="110 20"
          style="Label1"
          label="Cleanup"
          vq="Prescan_CleanUp"
          vc="Prescan_CleanUp=1"
          vc2="Prescan_CleanUp=0"
          set="$VALUE=(Prescan_CleanUp=1)"
          />
        <check loc="0 0" size="105 20"
          style="Label1"
          label="Display Data"
          vq="Prescan_Display"
          vc="Prescan_Display=1"
          vc2="Prescan_Display=0"
          set="$VALUE=(Prescan_Display=1)"
          />
      </group>
      <label loc="180 40" size="20 20"
        style="Label1"
        label="%"
        justify="Left"
        />
      <entry loc="120 60" size="60 20"
        style="PlainText"
        vq="Prescan_maxTries"
        vc="Prescan_maxTries=$VALUE"
        set="$VALUE=Prescan_maxTries"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="120 40" size="60 20"
        style="PlainText"
        vq="Prescan_FatThreshold"
        vc="Prescan_FatThreshold=$VALUE/100.0"
        set="$VALUE=Prescan_FatThreshold*100.0"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="120 20" size="60 20"
        style="PlainText"
        vq="Prescan_SNRThreshold"
        vc="Prescan_SNRThreshold=$VALUE"
        set="$VALUE=Prescan_SNRThreshold"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 60" size="105 20"
        style="Label1"
        label="Max Num of Tries"
        justify="Left"
        />
      <label loc="5 40" size="105 20"
        style="Label1"
        label="Fat Threshold"
        justify="Left"
        />
      <label loc="5 20" size="105 20"
        style="Label1"
        label="SNR Threshold"
        justify="Left"
        />
    </group>
    <group loc="220 0" size="210 105"
      style="Heading1"
      label="Frequency Calibration"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="prescan_freq"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <entry loc="120 40" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[10]=$VALUE r3=-1"
        set="$VALUE=coil_param[10]"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="120 20" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[8]=$VALUE r3=-1"
        set="$VALUE=coil_param[8]"
        digits="0"
        disable="Grayed out"
        />
      <label loc="180 40" size="20 20"
        style="Label1"
        label="us"
        justify="Left"
        />
      <label loc="180 20" size="20 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <label loc="5 40" size="100 20"
        style="Label1"
        label="Pulse length"
        justify="Left"
        />
      <label loc="5 20" size="100 20"
        style="Label1"
        label="RF Power"
        justify="Left"
        />
    </group>
    <group loc="435 0" size="225 270"
      style="Heading1"
      label="Power Calibration"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="prescan_power"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <group loc="5 100" size="215 110"
        vq="Prescan_ShowAdv"
        show="$VALUE=(Prescan_ShowAdv=1)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="130 20" size="60 20"
          style="PlainText"
          vq="coil_param"
          vc="coil_param[4]=$VALUE r3=-1"
          set="$VALUE=coil_param[4]"
          digits="0"
          disable="Grayed out"
          />
        <label loc="0 20" size="105 20"
          style="Label1"
          label="Step size"
          justify="Left"
          />
        <entry loc="130 40" size="60 20"
          style="PlainText"
          vq="Prescan_ss"
          vc="Prescan_ss=$VALUE"
          set="$VALUE=Prescan_ss"
          digits="0"
          disable="Grayed out"
          />
        <label loc="0 40" size="105 20"
          style="Label1"
          label="Steady States"
          justify="Left"
          />
        <group loc="0 60" size="215 45"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <textmessage loc="90 20" size="125 20"
            style="PlainText"
            vq="coil_param"
            set="calc_power(coil_param[1]+6,coil_param[3]):$v1 calc_power(coil_param[1]+6,coil_param[3]+(coil_param[5]-1)*coil_param[4]):$v2 write('line3','%.1f - %.1f dB',$v1,$v2):$VALUE"
            digits="2"
            />
          <textmessage loc="90 0" size="125 20"
            style="PlainText"
            vq="coil_param"
            set="calc_power(coil_param[1],coil_param[3]):$v1 calc_power(coil_param[1],coil_param[3]+(coil_param[5]-1)*coil_param[4]):$v2 write('line3','%.1f - %.1f dB',$v1,$v2):$VALUE"
            digits="1"
            />
          <label loc="0 20" size="90 20"
            style="Label1"
            label="Range (180):"
            justify="Left"
            />
          <label loc="0 0" size="90 20"
            style="Label1"
            label="Range (90):"
            justify="Left"
            />
        </group>
        <entry loc="130 0" size="60 20"
          style="PlainText"
          vq="coil_param"
          vc="coil_param[3]=$VALUE r3=-1"
          set="$VALUE=coil_param[3]"
          digits="0"
          disable="Grayed out"
          />
        <label loc="0 0" size="125 20"
          style="Label1"
          label="Fine power start"
          justify="Left"
          />
      </group>
      <entry loc="135 80" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[5]=$VALUE prescan_power('steps') r3=-1"
        set="$VALUE=coil_param[5]"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 80" size="105 20"
        style="Label1"
        label="Number of Steps"
        justify="Left"
        />
      <label loc="195 20" size="25 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <entry loc="135 20" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[7]=$VALUE/1000.0 r3=-1"
        set="$VALUE=coil_param[7]*1000.0"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="135 40" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[11]=$VALUE r3=-1"
        set="$VALUE=coil_param[11]"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="135 60" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[1]=$VALUE-6 r3=-1"
        set="$VALUE=coil_param[1] + 6"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 20" size="105 20"
        style="Label1"
        label="TR"
        justify="Left"
        />
      <label loc="195 40" size="25 20"
        style="Label1"
        label="us"
        justify="Left"
        />
      <label loc="5 40" size="105 20"
        style="Label1"
        label="Pulse width"
        justify="Left"
        />
      <label loc="5 60" size="125 20"
        style="Label1"
        label="Coarse Power (180)"
        justify="Left"
        />
      <label loc="195 60" size="20 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
    </group>
    <group loc="220 105" size="210 55"
      style="Heading1"
      label="Gain"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="prescan_gain"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <entry loc="70 20" size="60 20"
        style="PlainText"
        vq="Prescan_GainScale"
        vc="Prescan_GainScale=$VALUE"
        set="$VALUE=Prescan_GainScale"
        digits="1"
        disable="Grayed out"
        />
      <label loc="130 20" size="65 20"
        style="Label1"
        label="% of max"
        justify="Left"
        />
      <label loc="5 20" size="60 20"
        style="Label1"
        label="Scale to"
        justify="Left"
        />
    </group>
    <group loc="5 0" size="210 270"
      style="Heading1"
      label="RF Coil"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="CreateNewCoil"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <group loc="5 180" size="190 85"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <button loc="95 30" size="90 20"
          style="Label1"
          label="Remove"
          vq="rfcoil"
          vc="prescan_CoilTable('remove',rfcoil)"
          bg="transparent"
          decor1="no"
          />
        <group loc="0 50" size="190 25"
          vq="newentry"
          show="$VALUE = (newentry &gt; 0)"
          bg="transparent"
          border="None"
          side="Top"
          justify="Left"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <entry loc="0 5" size="90 20"
            style="PlainText"
            vq="rfcoil newentry "
            vc="rfcoil='$VALUE' RFCOIL='$VALUE'"
            set="$VALUE=rfcoil"
            show="on('newentry'):$VALUE"
            disable="Label"
            />
          <button loc="95 5" size="90 20"
            style="Label1"
            label="Save"
            vq="newentry"
            vc="newentry = 0  prescan_CoilTable('add',rfcoil)"
            show="$VALUE = (newentry &gt; 0)"
            bg="transparent"
            decor1="no"
            />
        </group>
        <toggle loc="0 30" size="90 20"
          style="Label1"
          label="New Entry"
          vq="newentry"
          vc="exists('newentry','parameter','current'):$e if ($e&lt;&gt;1) then create('newentry','real','current')  endif newentry=1"
          vc2="newentry=0"
          set="exists('newentry','parameter'):$e if ($e = 0) then $VALUE=0 else $VALUE=newentry endif"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
      </group>
      <label loc="5 120" size="100 20"
        style="Label1"
        label="Default VOX"
        justify="Left"
        />
      <entry loc="120 120" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[26]=$VALUE r3=-1"
        set="$VALUE=coil_param[26]"
        digits="1"
        disable="Grayed out"
        />
      <label loc="180 120" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <group loc="5 140" size="200 20"
        vq="coil_param"
        show="$VALUE = (coil_param[20] &gt;2) AND (coil_param[20] &lt;&gt; 5) &quot;uMRI&quot;"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="115 0" size="60 20"
          style="PlainText"
          vq="coil_param"
          vc="coil_param[19]=$VALUE r3=-1"
          set="$VALUE=coil_param[19]"
          digits="0"
          disable="Grayed out"
          />
        <label loc="0 0" size="90 20"
          style="Label1"
          label="Receiver coils"
          justify="Left"
          />
      </group>
      <label loc="180 100" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <entry loc="120 100" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[25]=$VALUE r3=-1"
        set="$VALUE=coil_param[25]"
        digits="1"
        disable="Grayed out"
        />
      <label loc="5 100" size="100 20"
        style="Label1"
        label="Default THK"
        justify="Left"
        />
      <label loc="180 80" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <entry loc="120 80" size="60 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[24]=$VALUE/10 r3=-1"
        set="$VALUE=10*coil_param[24]"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 80" size="100 20"
        style="Label1"
        label="Default FOV"
        justify="Left"
        />
      <menu loc="65 60" size="135 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[20]=$VALUE if (coil_param[20] &lt; 3) then coil_param[19] = 0 endif r3=-1"
        set="$VALUE=coil_param[20]"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Volume XMT/RCV"
          chval="1"
          />
        <mlabel 
          label="Surface XMT/RCV"
          chval="2"
          />
        <mlabel 
          label="Vol XMT/Surf RCV"
          chval="3"
          />
        <mlabel 
          label="Multi XMT/RCV"
          chval="4"
          />
        <mlabel 
          label="uMRI"
          chval="5"
          />
      </menu>
      <menu loc="65 40" size="135 20"
        style="PlainText"
        vq="coil_param"
        vc="coil_param[18]=$VALUE prescan_tn:tn r3=-1"
        set="$VALUE=coil_param[18]"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="H1"
          chval="1"
          />
        <mlabel 
          label="H2"
          chval="2"
          />
        <mlabel 
          label="O17"
          chval="17"
          />
        <mlabel 
          label="F19"
          chval="19"
          />
        <mlabel 
          label="P31"
          chval="31"
          />
        <mlabel 
          label="C13"
          chval="13"
          />
        <mlabel 
          label="Na23"
          chval="23"
          />
        <mlabel 
          label="Xe129"
          chval="129"
          />
      </menu>
      <filemenu loc="65 20" size="135 20"
        style="PlainText"
        vq="rfcoil"
        vc="rfcoil='$VALUE'  RFCOIL='$VALUE' prescan_CoilTable('read',rfcoil)"
        set="$VALUE=rfcoil"
        file="$file='/templates/vnmrj/choicefiles/coil' get_path($file):$path $VALUE=$path+$file"
        type="file"
        bg="VJBackground"
        editable="No"
        vq2="rfcoil"
        statshow="yes"
        elastic="no"
        display="yes"
        />
      <label loc="5 60" size="60 20"
        style="Label1"
        label="Type"
        justify="Left"
        />
      <label loc="5 40" size="60 20"
        style="Label1"
        label="Nucleus"
        justify="Left"
        />
      <label loc="5 20" size="60 20"
        style="Label1"
        label="Name"
        justify="Left"
        />
    </group>
    <group loc="220 160" size="210 110"
      style="Heading1"
      label="Prescan Slice Selection"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="prescan_slice"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <label loc="175 80" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <label loc="175 60" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <label loc="175 40" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <menu loc="115 20" size="85 20"
        style="PlainText"
        label="menu"
        vq="Prescan_Orient"
        vc="Prescan_Orient = '$VALUE'"
        set="$VALUE  = Prescan_Orient"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Axial"
          chval="trans"
          />
        <mlabel 
          label="Coronal"
          chval="cor"
          />
        <mlabel 
          label="Sagittal"
          chval="sag"
          />
      </menu>
      <entry loc="115 40" size="60 20"
        style="PlainText"
        vq="Prescan_SliceOffset"
        vc="Prescan_SliceOffset=$VALUE"
        set="$VALUE=Prescan_SliceOffset"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="115 60" size="60 20"
        style="PlainText"
        vq="Prescan_FOV coil_param"
        vc="coil_param[21]=$VALUE/10 Prescan_FOV=coil_param[21] r3=-1"
        set="$VALUE=coil_param[21]*10"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="115 80" size="60 20"
        style="PlainText"
        vq="Prescan_Thickness coil_param"
        vc="coil_param[23]=$VALUE Prescan_Thickness=$VALUE r3=-1"
        set="$VALUE=Prescan_Thickness"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 80" size="105 20"
        style="Label1"
        label="Thickness"
        justify="Left"
        />
      <label loc="5 60" size="105 20"
        style="Label1"
        label="FOV"
        justify="Left"
        />
      <label loc="5 40" size="115 20"
        style="Label1"
        label="Offset"
        justify="Left"
        />
      <label loc="5 20" size="115 20"
        style="Label1"
        label="Orientation"
        justify="Left"
        />
    </group>
  </group>
</template>
