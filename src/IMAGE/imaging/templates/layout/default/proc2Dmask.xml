<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="proc2Dmask" element="pages" type="processing" >
  <group size="805 270"
    style="PlainText"
    label="Mask"
    vq="maskpage"
    vc="aip2Dsmap('genpars')"
    show="$VALUE=(maskpage='y')"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="proc2Dmask"
    useref="no"
    subtype="Convenience"
    expanded="yes"
    >
    <button loc="655 10" size="80 20"
      style="PlainText"
      label="Close"
      vq="maskpage"
      vc="maskpage='n'"
      bg="transparent"
      decor1="yes"
      />
    <group loc="220 0" size="210 120"
      style="Heading1"
      label="Weighting"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Display"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="80 40" size="20 20"
        style="PlainText"
        vq="maskgf"
        vc="maskgf='y'"
        vc2="maskgf='n'"
        set="on('maskgf'):$VALUE"
        />
      <label loc="160 20" size="40 20"
        style="Label1"
        label="Phase"
        />
      <label loc="95 20" size="40 20"
        style="Label1"
        label="Read"
        />
      <entry loc="160 40" size="40 20"
        style="PlainText"
        vq="maskgf1"
        vc="maskgf1=$VALUE/100.0"
        set="$VALUE=maskgf1*100.0"
        show="on('maskgf1'):$VALUE"
        digits="1"
        />
      <entry loc="160 60" size="40 20"
        style="PlainText"
        vq="masksb1"
        vc="masksb1=$VALUE/100.0"
        set="$VALUE=masksb1*100.0"
        show="on('masksb1'):$VALUE"
        digits="1"
        />
      <check loc="145 40" size="20 20"
        style="PlainText"
        vq="maskgf1"
        vc="maskgf1='y'"
        vc2="maskgf1='n'"
        set="on('maskgf1'):$VALUE"
        />
      <check loc="145 60" size="20 20"
        style="PlainText"
        vq="masksb1"
        vc="masksb1='y'"
        vc2="masksb1='n'"
        set="on('masksb1'):$VALUE"
        />
      <entry loc="95 40" size="40 20"
        style="PlainText"
        vq="maskgf"
        vc="maskgf=$VALUE/100.0"
        set="$VALUE=maskgf*100.0"
        show="on('maskgf'):$VALUE"
        digits="1"
        />
      <label loc="10 40" size="70 20"
        style="Label1"
        label="Gaussian"
        />
      <entry loc="95 60" size="40 20"
        style="PlainText"
        vq="masksb"
        vc="masksb=$VALUE/100.0"
        set="$VALUE=masksb*100.0"
        show="on('masksb'):$VALUE"
        digits="1"
        />
      <check loc="80 60" size="20 20"
        style="PlainText"
        vq="masksb"
        vc="masksb='y'"
        vc2="masksb='n'"
        set="on('masksb'):$VALUE"
        />
      <label loc="10 60" size="70 20"
        style="Label1"
        label="Sine Bell"
        />
      <entry loc="160 80" size="40 20"
        style="PlainText"
        vq="masklb1"
        vc="masklb1=$VALUE/100.0"
        set="$VALUE=masklb1*100.0"
        show="on('masklb1'):$VALUE"
        digits="1"
        />
      <check loc="145 80" size="20 20"
        style="PlainText"
        vq="masklb1"
        vc="masklb1='y'"
        vc2="masklb1='n'"
        set="on('masklb1'):$VALUE"
        />
      <entry loc="95 80" size="40 20"
        style="PlainText"
        vq="masklb"
        vc="masklb=$VALUE/100.0"
        set="$VALUE=masklb*100.0"
        show="on('masklb'):$VALUE"
        digits="1"
        />
      <check loc="80 80" size="20 20"
        style="PlainText"
        vq="masklb"
        vc="masklb='y'"
        vc2="masklb='n'"
        set="on('masklb'):$VALUE"
        />
      <label loc="10 80" size="70 20"
        style="Label1"
        label="Lorentzian"
        />
      <label loc="10 20" size="65 20"
        style="Label1"
        label="% of FOV"
        />
    </group>
    <group loc="435 220" size="210 50"
      style="Heading1"
      label="Equalize Noise (k-space)"
      vq="smapref"
      show="aipXrecon('nrcvrs'):$nr $VALUE=($nr&gt;1 AND smapref&lt;&gt;'vcoil')"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ReconType"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="25 20" size="175 20"
        vq="maskeqnoise"
        show="$VALUE=(maskeqnoise='y')"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <entry loc="55 0" size="50 20"
          style="PlainText"
          vq="masknoisefrac"
          vc="masknoisefrac=$VALUE/100.0"
          set="$VALUE=masknoisefrac*100.0"
          digits="1"
          />
        <label loc="105 0" size="60 20"
          style="Label1"
          label="% of FOV"
          />
        <label loc="5 0" size="50 20"
          style="Label1"
          label="Sample"
          />
      </group>
      <check loc="10 20" size="30 20"
        style="PlainText"
        vq="maskeqnoise"
        vc="maskeqnoise='y'"
        vc2="maskeqnoise='n'"
        set="$VALUE=(maskeqnoise='y')"
        />
    </group>
    <group loc="5 190" size="210 80"
      style="Heading1"
      label="Mask Parameters"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="VolumeCoilReference"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <filemenu loc="10 25" size="125 20"
        style="PlainText"
        vq="maskparfile"
        vc="maskparfile='$VALUE' aip2Dmask('loadpars') "
        set="$VALUE=maskparfile"
        file="$VALUE=userdir aip2Dmask('pardir'):$VALUE"
        type="directory"
        bg="VJBackground"
        editable="No"
        statshow="yes"
        elastic="no"
        display="yes"
        />
      <entry loc="10 50" size="125 20"
        style="PlainText"
        vq="maskparfile"
        vc="maskparfile='$VALUE'"
        set="$VALUE=maskparfile"
        />
      <button loc="145 50" size="55 20"
        style="PlainText"
        label="Save"
        vc="aip2Dmask('savepars')"
        bg="transparent"
        decor1="yes"
        />
      <button loc="145 25" size="55 20"
        style="PlainText"
        label="Delete"
        vc="aip2Dmask('deletepars')"
        bg="transparent"
        decor1="yes"
        />
    </group>
    <group loc="5 140" size="210 50"
      style="Heading1"
      label="Slices"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Display"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="10 20" size="40 20"
        style="PlainText"
        label="All"
        vq="maskallslices maskstartslice maskendslice"
        vc="maskallslices='y' aip2Dmask('allslices')"
        vc2="maskallslices='n'"
        set="$VALUE=(maskallslices='y')"
        />
      <entry loc="85 20" size="40 20"
        style="PlainText"
        vq="maskstartslice maskallslices"
        vc="maskstartslice=$VALUE aip2Dmask('checkslices')"
        set="$VALUE=maskstartslice"
        digits="0"
        />
      <label loc="55 20" size="35 20"
        style="Label1"
        label="Start"
        />
      <label loc="135 20" size="30 20"
        style="Label1"
        label="End"
        />
      <entry loc="160 20" size="40 20"
        style="PlainText"
        vq="maskendslice maskallslices"
        vc="maskendslice=$VALUE aip2Dmask('checkslices')"
        set="$VALUE=maskendslice"
        digits="0"
        />
    </group>
    <group loc="5 0" size="210 140"
      style="Heading1"
      label="Output"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ReconType"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="10 20" size="80 20"
        style="PlainText"
        label="Mask"
        vq="imMK"
        vc="imMK='y'"
        vc2="imMK='n'"
        set="$VALUE=(imMK='y')"
        />
      <check loc="10 40" size="100 20"
        style="PlainText"
        label="Magnitude"
        vq="imMG"
        vc="imMG='y'"
        vc2="imMG='n'"
        set="$VALUE=(imMG='y')"
        />
      <check loc="10 60" size="180 20"
        style="PlainText"
        label="Reverse Mask of Magnitude"
        vq="imRMK"
        vc="imRMK='y'"
        vc2="imRMK='n'"
        set="$VALUE=(imRMK='y')"
        />
      <button loc="110 85" size="90 20"
        style="PlainText"
        label="Display"
        vc="aip2Dmask('display')"
        bg="transparent"
        decor1="yes"
        />
      <button loc="110 110" size="90 20"
        style="PlainText"
        label="Clear"
        vc="aip2Dmask('clear')"
        bg="transparent"
        decor1="yes"
        />
      <button loc="10 85" size="90 20"
        style="PlainText"
        label="Generate"
        vc="aip2Dmask('generate')"
        bg="transparent"
        decor1="yes"
        />
    </group>
    <group loc="220 120" size="210 150"
      style="Heading1"
      label="Threshold"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ReconType"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="125 110" size="80 20"
        style="Label1"
        label="% of FOV"
        />
      <entry loc="75 110" size="50 20"
        style="PlainText"
        vq="masklvlnoisefrac masklvlmode"
        vc="masklvlnoisefrac=$VALUE/100.0"
        set="$VALUE=masklvlnoisefrac*100.0"
        show="$VALUE=(masklvlmode='noise')"
        digits="1"
        />
      <label loc="25 110" size="50 20"
        style="Label1"
        label="Sample"
        />
      <label loc="125 90" size="85 20"
        style="Label1"
        label="x noise level"
        />
      <label loc="25 90" size="40 20"
        style="Label1"
        label="Level"
        />
      <entry loc="75 90" size="50 20"
        style="PlainText"
        vq="masklvlnoise masklvlmode"
        vc="masklvlnoise=$VALUE"
        set="$VALUE=masklvlnoise"
        show="$VALUE=(masklvlmode='noise')"
        digits="1"
        />
      <check loc="10 70" size="140 20"
        style="PlainText"
        label="Set from Noise"
        vq="masklvlmode"
        vc="masklvlmode='noise'"
        vc2="masklvlmode='maximum'"
        set="$VALUE=(masklvlmode='noise')"
        />
      <label loc="125 40" size="65 20"
        style="Label1"
        label="% of max"
        />
      <entry loc="75 40" size="50 20"
        style="PlainText"
        vq="masklvlmax masklvlmode"
        vc="masklvlmax=$VALUE"
        set="$VALUE=masklvlmax"
        show="$VALUE=(masklvlmode='maximum')"
        digits="1"
        />
      <label loc="25 40" size="40 20"
        style="Label1"
        label="Level"
        />
      <check loc="10 20" size="140 20"
        style="PlainText"
        label="Set from Maximum"
        vq="masklvlmode"
        vc="masklvlmode='maximum'"
        vc2="masklvlmode='noise'"
        set="$VALUE=(masklvlmode='maximum')"
        />
    </group>
    <group loc="435 170" size="210 50"
      style="Heading1"
      label="Receivers"
      vq="smapref"
      show="aipXrecon('nrcvrs'):$nr $VALUE=($nr&gt;1 AND smapref&lt;&gt;'vcoil')"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="recon_raw"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <textmessage loc="150 20" size="20 20"
        style="PlainText"
        label="2"
        vq="rcvrs"
        set="aipXrecon('nrcvrs'):$VALUE"
        />
      <label loc="110 20" size="45 20"
        style="Label1"
        label="out of"
        />
      <entry loc="65 20" size="40 20"
        style="PlainText"
        vq="maskrcvrs"
        vc="maskrcvrs=$VALUE aip2Dmask('checkrcvrs')"
        set="$VALUE=maskrcvrs"
        show="$VALUE=(volumercv='n')"
        digits="0"
        />
      <label loc="10 20" size="55 20"
        style="Label1"
        label="Signal in"
        />
    </group>
    <group loc="435 120" size="210 50"
      style="Heading1"
      label="ROI"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="recon_raw"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <button loc="110 20" size="90 20"
        style="PlainText"
        label="Add to mask"
        vc="aip2Dmask('add2mask')"
        bg="transparent"
        decor1="yes"
        />
      <button loc="10 20" size="90 20"
        style="PlainText"
        label="Generate"
        vc="aip2Dmask('genroi')"
        bg="transparent"
        decor1="yes"
        />
    </group>
    <group loc="435 0" size="210 120"
      style="Heading1"
      label="Density Filter"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="recon_raw"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="10 20" size="100 20"
        style="PlainText"
        label="Apply"
        vq="dfill"
        vc="dfill='y'"
        vc2="dfill='n'"
        set="$VALUE=(dfill='y')"
        />
      <label loc="10 40" size="75 20"
        style="Label1"
        label="Sample"
        />
      <label loc="10 60" size="80 20"
        style="Label1"
        label="Fill Fraction"
        />
      <label loc="140 40" size="65 20"
        style="Label1"
        label="% of FOV"
        />
      <entry loc="90 40" size="50 20"
        style="PlainText"
        vq="dfilldim dfill"
        vc="dfilldim=$VALUE"
        set="$VALUE=dfilldim"
        show="$VALUE=(dfill='y')"
        digits="1"
        />
      <entry loc="90 60" size="50 20"
        style="PlainText"
        vq="dfillfrac dfill"
        vc="dfillfrac=$VALUE"
        set="$VALUE=dfillfrac"
        show="$VALUE=(dfill='y')"
        digits="2"
        />
      <entry loc="90 80" size="50 20"
        style="PlainText"
        vq="dfillloops dfill"
        vc="dfillloops=$VALUE"
        set="$VALUE=dfillloops"
        show="$VALUE=(dfill='y')"
        />
      <label loc="10 80" size="80 20"
        style="Label1"
        label="Loops"
        />
    </group>
  </group>
</template>
