<template name="MITemp" element="pages" type="sample" >
<!--
 ! 
 ! Copyright (C) 2015  University of Oregon
 ! You may distribute under the terms of either the GNU General Public
 ! License or the Apache License, as specified in the LICENSE file.
 ! For more information, see the LICENSE file.
 !
 -->
  <group size="780 270"
    style="PlainText"
    label="Temperature"
    vq="system vttype"
    show="$VALUE = (system='spectrometer' and vttype=2)"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="MITemp"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="30 140" size="310 50"
      vq="Console"
      show="$SHOW=(Console='vnmrs')"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Minor"
      >
      <button loc="180 0" size="65 20"
        style="PlainText"
        label="VT Air On"
        vq="vtairflow"
        vc="getlimit('vtairflow','global'):$max,$min if (vtairflow &lt; $min) then vtairflow=$min endif sethw('vtairflow',vtairflow*vtezscale)"
        decor1="No"
        />
      <button loc="245 0" size="65 20"
        style="PlainText"
        label="VT Air Off"
        vq="vtairflow"
        vc="setvalue('vtairflow',0,'global') vnmrjcmd('pnew','vtairflow') sethw('vtairflow',0)"
        decor1="No"
        />
      <label loc="130 0" size="50 20"
        style="Label1"
        label=" l / min"
        />
      <spinner loc="80 0" size="50 20"
        style="PlainText"
        vq="vtairflow vtezscale"
        vc="vtairflow=$VALUE sethw('vtairflow',vtairflow*vtezscale,'nowait')"
        set="$VALUE=vtairflow"
        show="$SHOW=(vtairflow&gt;6)"
        digital="true"
        min="7.0"
        max="50.0"
        incr1="1.0"
        />
      <label loc="0 0" size="80 20"
        style="Label1"
        label="VT Air Flow:"
        />
      <group loc="210 25" size="120 20"
        vq="vtflowrange Console"
        show="$SHOW=(vtflowrange=50) and (Console='vnmrs')"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <textmessage loc="0 0" size="110 20"
          style="PlainText"
          label="EZVT Not Present"
          vq="vtezscale"
          set="$VALUE='EZVT Not Present' if vtezscale=2 then $VALUE='EZVT Present' endif"
          />
      </group>
    </group>
    <group loc="380 140" size="145 22"
      style="PlainText"
      bg="transparent"
      vq="Console"
      show="$SHOW=(Console='vnmrs')"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <button loc="0 0" size="140 20"
        style="Label2"
        label="Reset Pneumatic Fault"
        vc="sethw('pneufault','clear')"
        decor1="No"
        />
    </group>
    <button loc="550 140" size="130 20"
      style="Label2"
      label="Reset VT Controller"
      vc="sethw('vt','reset')"
      decor1="No"
      />
    <group loc="20 20" size="320 105"
      style="Heading1"
      bg="transparent"
      border="Etched"
      label="Temperature"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <textmessage loc="120 70" size="90 20"
        style="PlainText"
        label="Off"
        statpar="vt"
        />
      <slider loc="10 50" size="290 20"
        style="PlainText"
        vq="temp"
        vc="setvalue('temp',$VALUE) temp='y'"
        set="$VALUE=temp"
        digital="true"
        incr1="1"
        incr2="5"
        vq2="temp"
        digits="5"
        drag="0"
        />
      <button loc="220 30" size="80 20"
        style="PlainText"
        label="Temp Off"
        vc="sethw('vt','off') temp='n' vnmrinfo('set','tempOnOff',0)"
        decor1="No"
        />
      <textmessage loc="60 70" size="60 20"
        style="PlainText"
        digits="3"
        statpar="vtval"
        />
      <button loc="10 30" size="110 20"
        style="PlainText"
        label="Regulate Temp"
        vc="sethw('temp',temp)"
        decor1="No"
        />
      <label loc="10 70" size="60 20"
        style="Label1"
        label="Current"
        justify="Left"
        />
    </group>
    <group loc="380 20" size="320 105"
      style="Heading1"
      bg="transparent"
      label="VT Error Control"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <radio loc="40 80" size="210 20"
        style="PlainText"
        label="Ignore temperature error"
        vq="tin"
        vc="tin='n' vnmrinfo('set','tempErrorControl',0)"
        set="vnmrinfo('get','tempExpControl'):$cl if $cl=0 then vnmrinfo('get','tempErrorControl'):$vn $VALUE=($vn=0) else $VALUE=(tin='n') endif"
        />
      <radio loc="40 60" size="210 20"
        style="PlainText"
        label="Warn after temperature error"
        vq="tin"
        vc="tin='w' vnmrinfo('set','tempErrorControl',2)"
        set="vnmrinfo('get','tempExpControl'):$cl if $cl=0 then vnmrinfo('get','tempErrorControl'):$vn $VALUE=($vn=2) else $VALUE=(tin='w') endif"
        />
      <radio loc="40 40" size="210 20"
        style="PlainText"
        label="Abort after temperature error"
        vq="tin"
        vc="tin='y' vnmrinfo('set','tempErrorControl',1)"
        set="vnmrinfo('get','tempExpControl'):$cl if $cl=0 then vnmrinfo('get','tempErrorControl'):$vn $VALUE=($vn=1) else $VALUE=(tin='y') endif"
        />
      <check loc="10 15" size="270 30"
        style="Heading1"
        label="Control temperature from this panel only"
        vc="vnmrinfo('set','tempExpControl',0) tin=tin"
        vc2="vnmrinfo('set','tempExpControl',1) tin=tin"
        set="vnmrinfo('get','tempExpControl'):$e $VALUE=1-$e"
        />
    </group>
  </group>
</template>
