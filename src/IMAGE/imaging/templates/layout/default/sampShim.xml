<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="sampShim" element="pages" type="sample" >
  <group size="850 230"
    style="PlainText"
    label="Manual Shim"
    vq="system shimpanel"
    vc="gs_shimlist"
    show="$VALUE = (system='spectrometer' and shimpanel=1)"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="yes"
    reference="sampShim"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <entry loc="320 190" size="70 20"
      style="PlainText"
      vq="gain acqmode"
      vc="gain = $VALUE"
      set="$VALUE = gain"
      show="$VALUE = (acqmode &lt;&gt; 'fidscan')*2 - 1"
      digits="0"
      disable="Label"
      />
    <label loc="250 190" size="70 20"
      style="Label1"
      label="Recr gain"
      justify="Left"
      />
    <group loc="645 95" size="200 70"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="ShimFilename"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      >
      <label loc="5 5" size="130 20"
        style="Label1"
        label="Shim Filename"
        justify="Left"
        />
      <filemenu loc="5 25" size="150 20"
        style="PlainText"
        vq="shims"
        vc="gs_shimlist('$VALUE') shims='$VALUE'"
        set="$VALUE=shims"
        file="$VALUE=userdir+'/gshimdir/shimList'"
        type="file"
        bg="VJBackground"
        editable="Yes"
        vq2="shims"
        statshow="yes"
        elastic="no"
        display="yes"
        />
      <button loc="160 50" size="35 20"
        style="PlainText"
        label="Zero"
        vq="shims"
        vc="shell('cp /vnmr/shims/reg0 ~/vnmrsys/shims/Zero') gs_shimlist rts('Zero') setallshims"
        bg="transparent"
        decor1="no"
        />
      <button loc="105 50" size="50 20"
        style="PlainText"
        label="Delete"
        vq="shims"
        vc="delete(userdir+'/shims/'+shims) gs_shimlist shims=''"
        show="$VALUE=(shims&lt;&gt;'') $VALUE=2*$VALUE-1"
        bg="transparent"
        decor1="no"
        />
      <button loc="55 50" size="45 20"
        style="PlainText"
        label="Save"
        vq="shims"
        vc="readallshims svs(shims,'force') vnmrjcmd('LOC show shims')"
        show="$VALUE=(shims&lt;&gt;'') $VALUE=2*$VALUE-1"
        bg="transparent"
        decor1="no"
        />
      <button loc="5 50" size="45 20"
        style="PlainText"
        label="Load"
        vq="shims"
        vc="rts(shims) setallshims"
        show="$VALUE=(shims&lt;&gt;'') $VALUE=2*$VALUE-1"
        bg="transparent"
        decor1="no"
        />
    </group>
    <label loc="670 0" size="110 30"
      style="Heading1"
      label="Shims"
      justify="Center"
      />
    <button loc="650 60" size="150 30"
      style="Label1"
      label="Retrieve Milestone"
      vc="dndshims('milestone')"
      bg="transparent"
      decor1="no"
      />
    <button loc="650 30" size="150 30"
      style="Label1"
      label="Save Milestone"
      vc="readallshims shims='milestone' svs('milestone','force')"
      bg="transparent"
      decor1="no"
      />
    <group loc="0 40" size="80 180"
      style="PlainText"
      vq="acqmode"
      show="$VALUE = (acqmode = 'fidscan')"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <toggle loc="0 120" size="80 20"
        style="PlainText"
        label="Envelope"
        vq="fidscanmode"
        vc="dotflag='n' displaymode('+f', 'fidscanmode')"
        vc2="displaymode('-f', 'fidscanmode')"
        set="strstr(fidscanmode,'f'):$VALUE"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="0 140" size="80 20"
        style="PlainText"
        label="Dots"
        vq="dotflag"
        vc="displaymode('-f', 'fidscanmode') dotflag='y'"
        vc2="dotflag='n'"
        set="$VALUE=(dotflag = 'y')"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="0 160" size="80 20"
        style="PlainText"
        label="DC Correct"
        vq="fidscanmode"
        vc="displaymode('+d', 'fidscanmode')"
        vc2="displaymode('-d', 'fidscanmode')"
        set="strstr(fidscanmode,'d'):$VALUE"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="0 90" size="80 20"
        style="PlainText"
        label="Abs Value"
        vq="fidscanmode"
        vc="displaymode('+a', 'fidscanmode')"
        vc2="displaymode('-a', 'fidscanmode')"
        set="strstr(fidscanmode,'a'):$VALUE"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="0 70" size="80 20"
        style="PlainText"
        label="Imaginary"
        vq="fidscanmode"
        vc="displaymode('+i', 'fidscanmode')"
        vc2="displaymode('-i', 'fidscanmode')"
        set="strstr(fidscanmode,'i'):$VALUE"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="0 50" size="80 20"
        style="PlainText"
        label="Real"
        vq="fidscanmode"
        vc="displaymode('+r', 'fidscanmode')"
        vc2="displaymode('-r', 'fidscanmode')"
        set="strstr(fidscanmode,'r'):$VALUE"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <radio loc="0 20" size="80 20"
        style="PlainText"
        label="FID"
        vq="fidscanmode"
        vc="displaymode('-s', 'fidscanmode')"
        set="strstr(fidscanmode,'s'):$e $VALUE=(not $e)"
        />
      <radio loc="0 0" size="80 20"
        style="PlainText"
        label="Spectrum"
        vq="fidscanmode"
        vc="displaymode('+s', 'fidscanmode')"
        set="strstr(fidscanmode,'s'):$VALUE"
        />
    </group>
    <statusbutton loc="0 0" size="80 40"
      style="Heading2"
      vq="fidarea"
      vc="{apptype}('prep','shim') fid_scan"
      vc2="aa('Exit FID shim') shims='LastShimExit' svs('LastShimExit','force') if (appmode='imaging') then {apptype}('prep') go('check','checksilent') endif"
      set="$VALUE=fidarea"
      min="0"
      max="1000"
      maxmark="true"
      values="200"
      name="FID Shim area"
      title="FID Shim"
      statcol="fg"
      enabled="true"
      color1="lightGray"
      color2="black"
      display="no"
      />
    <shimset loc="250 0" size="390 175"
      style="PlainText"
      vq="shimset"
      vc="sethw('nowait','$NAME',$VALUE):$e $NAME=$VALUE"
      set="$VALUE=shimset"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      savekids="false"
      statpar="$NAME"
      pointy="false"
      rocker="true"
      arrow="true"
      enable="no"
      reference="shm"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      />
    <group loc="90 170" size="140 40"
      style="PlainText"
      vq="acqmode"
      show="$VALUE = (acqmode = 'fidscan')"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <button loc="10 20" size="130 20"
        style="PlainText"
        label="Rescale FID area"
        vc="fidnorm=fidnorm*500/fidarea"
        bg="VJBackground"
        decor1="no"
        />
      <label loc="10 0" size="60 20"
        style="Label1"
        label="FID area"
        justify="Left"
        />
      <textmessage loc="70 0" size="70 20"
        style="Heading2"
        label="284.0"
        vq="fidarea"
        set="$VALUE = fidarea"
        digits="1"
        />
    </group>
    <dial loc="88 0" size="160 168"
      style="PlainText"
      vq="fidarea"
      set="$VALUE=fidarea"
      digital="yes"
      min="0.0"
      max="1000.0"
      minmark="no"
      maxmark="yes"
      count="2"
      color1="GraphForeground"
      color3="black"
      color4="0x999999"
      color5="0xbb00ff"
      color6="blue"
      color7="cyan"
      color8="0x00bb00"
      color9="0x99ff99"
      color10="yellow"
      color11="orange"
      color12="red"
      decor1="yes"
      decor2="yes"
      elastic="no"
      />
  </group>
</template>
