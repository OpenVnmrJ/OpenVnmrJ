<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="proc3Dweight" element="pages" type="processing" >
  <group size="800 270"
    style="PlainText"
    label="Weighting"
    vc="exists('gf_factor','parameter'):$e if ($e=0) then create('gf_factor') gf_factor=10 endif exists('sb_factor','parameter'):$e if ($e=0) then create('sb_factor') sb_factor=50 endif"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="proc3Dweight"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <group loc="285 25" size="210 120"
      style="Heading1"
      label="Navigator"
      vq="recon navigator"
      show="$VALUE=(recon &lt;&gt; 'internal') AND (recon &lt;&gt; '') AND (navigator='y')"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="RefWeight"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <entry loc="95 80" size="40 20"
        style="PlainText"
        vq="reflb"
        vc="reflb=$VALUE/100.0"
        set="$VALUE=reflb*100.0"
        show="on('reflb'):$VALUE"
        digits="1"
        />
      <entry loc="95 60" size="40 20"
        style="PlainText"
        vq="refsb"
        vc="refsb=$VALUE/100.0"
        set="$VALUE=refsb*100.0"
        show="on('refsb'):$VALUE"
        digits="1"
        />
      <label loc="95 20" size="40 20"
        style="Label1"
        label="Read"
        />
      <entry loc="95 40" size="40 20"
        style="PlainText"
        vq="refgf"
        vc="refgf=$VALUE/100.0"
        set="$VALUE=refgf*100.0"
        show="on('refgf'):$VALUE"
        digits="1"
        />
      <check loc="80 80" size="20 20"
        style="PlainText"
        vq="reflb"
        vc="reflb='y'"
        vc2="reflb='n'"
        set="on('reflb'):$VALUE"
        />
      <check loc="80 60" size="20 20"
        style="PlainText"
        vq="refsb"
        vc="refsb='y'"
        vc2="refsb='n'"
        set="on('refsb'):$VALUE"
        />
      <check loc="80 40" size="20 20"
        style="PlainText"
        vq="refgf"
        vc="refgf='y'"
        vc2="refgf='n'"
        set="on('refgf'):$VALUE"
        />
      <label loc="10 40" size="70 20"
        style="Label1"
        label="Gaussian"
        />
      <label loc="10 60" size="70 20"
        style="Label1"
        label="Sine Bell"
        />
      <label loc="10 80" size="70 20"
        style="Label1"
        label="Lorentzian"
        />
      <label loc="10 20" size="65 20"
        style="Label1"
        label="% of FOV"
        />
    </group>
    <group loc="5 25" size="275 120"
      style="Heading1"
      label="Image"
      vq="recon"
      show="$VALUE=(recon &lt;&gt; 'internal') AND (recon &lt;&gt; '')"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ImageWeight"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="225 20" size="50 20"
        style="Label1"
        label="Phase2"
        />
      <entry loc="225 80" size="40 20"
        style="PlainText"
        vq="lb2"
        vc="lb2=$VALUE/100.0"
        set="$VALUE=lb2*100.0"
        show="on('lb2'):$VALUE"
        digits="1"
        />
      <entry loc="225 60" size="40 20"
        style="PlainText"
        vq="sb2"
        vc="sb2=$VALUE/100.0"
        set="$VALUE=sb2*100.0"
        show="on('sb2'):$VALUE"
        digits="1"
        />
      <entry loc="225 40" size="40 20"
        style="PlainText"
        vq="gf2"
        vc="gf2=$VALUE/100.0"
        set="$VALUE=gf2*100.0"
        show="on('gf2'):$VALUE"
        digits="1"
        />
      <check loc="210 80" size="20 20"
        style="PlainText"
        vq="lb2"
        vc="lb2='y'"
        vc2="lb2='n'"
        set="on('lb2'):$VALUE"
        />
      <check loc="210 60" size="20 20"
        style="PlainText"
        vq="sb2"
        vc="sb2='y'"
        vc2="sb2='n'"
        set="on('sb2'):$VALUE"
        />
      <check loc="210 40" size="20 20"
        style="PlainText"
        vq="gf2"
        vc="gf2='y'"
        vc2="gf2='n'"
        set="on('gf2'):$VALUE"
        />
      <label loc="160 20" size="40 20"
        style="Label1"
        label="Phase"
        />
      <label loc="95 20" size="40 20"
        style="Label1"
        label="Read"
        />
      <entry loc="160 40" size="40 20"
        style="PlainText"
        vq="gf1"
        vc="gf1=$VALUE/100.0"
        set="$VALUE=gf1*100.0"
        show="on('gf1'):$VALUE"
        digits="1"
        />
      <entry loc="160 60" size="40 20"
        style="PlainText"
        vq="sb1"
        vc="sb1=$VALUE/100.0"
        set="$VALUE=sb1*100.0"
        show="on('sb1'):$VALUE"
        digits="1"
        />
      <check loc="145 40" size="20 20"
        style="PlainText"
        vq="gf1"
        vc="gf1='y'"
        vc2="gf1='n'"
        set="on('gf1'):$VALUE"
        />
      <check loc="145 60" size="20 20"
        style="PlainText"
        vq="sb1"
        vc="sb1='y'"
        vc2="sb1='n'"
        set="on('sb1'):$VALUE"
        />
      <entry loc="95 40" size="40 20"
        style="PlainText"
        vq="gf"
        vc="gf=$VALUE/100.0"
        set="$VALUE=gf*100.0"
        show="on('gf'):$VALUE"
        digits="1"
        />
      <check loc="80 40" size="20 20"
        style="PlainText"
        vq="gf"
        vc="gf='y'"
        vc2="gf='n'"
        set="on('gf'):$VALUE"
        />
      <label loc="10 40" size="70 20"
        style="Label1"
        label="Gaussian"
        />
      <entry loc="95 60" size="40 20"
        style="PlainText"
        vq="sb"
        vc="sb=$VALUE/100.0"
        set="$VALUE=sb*100.0"
        show="on('sb'):$VALUE"
        digits="1"
        />
      <check loc="80 60" size="20 20"
        style="PlainText"
        vq="sb"
        vc="sb='y'"
        vc2="sb='n'"
        set="on('sb'):$VALUE"
        />
      <label loc="10 60" size="70 20"
        style="Label1"
        label="Sine Bell"
        />
      <entry loc="160 80" size="40 20"
        style="PlainText"
        vq="lb1"
        vc="lb1=$VALUE/100.0"
        set="$VALUE=lb1*100.0"
        show="on('lb1'):$VALUE"
        digits="1"
        />
      <check loc="145 80" size="20 20"
        style="PlainText"
        vq="lb1"
        vc="lb1='y'"
        vc2="lb1='n'"
        set="on('lb1'):$VALUE"
        />
      <entry loc="95 80" size="40 20"
        style="PlainText"
        vq="lb"
        vc="lb=$VALUE/100.0"
        set="$VALUE=lb*100.0"
        show="on('lb'):$VALUE"
        digits="1"
        />
      <check loc="80 80" size="20 20"
        style="PlainText"
        vq="lb"
        vc="lb='y'"
        vc2="lb='n'"
        set="on('lb'):$VALUE"
        />
      <label loc="10 80" size="70 20"
        style="Label1"
        label="Lorentzian"
        />
      <label loc="10 20" size="65 20"
        style="Label1"
        label="% of FOV"
        />
    </group>
    <group loc="435 120" size="210 125"
      style="Heading1"
      label="Phase Encoding"
      vq="ftproc recon"
      show="$VALUE=(recon = 'internal') OR (recon = '')"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="PhaseEncodingWeighting"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="0 100" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="lb2"
          vc="lb2=$VALUE"
          set="$VALUE=lb2"
          show="on('lb2'):$VALUE"
          digits="1"
          disable="Grayed out"
          />
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="lb2"
          vc="lb2='y'"
          vc2="lb2='n'"
          set="on('lb2'):$VALUE"
          />
        <label loc="0 0" size="105 20"
          style="PlainText"
          label="line broadening"
          justify="Left"
          />
      </group>
      <group loc="0 60" size="205 40"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="115 20" size="85 20"
          style="PlainText"
          vq="sb2 sb2s"
          vc="sbs2=$VALUE sb_factor=n"
          set="$VALUE=sbs2"
          show="onparams('sb2','sbs2'):$VALUE"
          disable="Grayed out"
          />
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="sb2"
          vc="sb2=$VALUE sb_factor=n"
          set="$VALUE=sb2"
          show="on('sb2'):$VALUE"
          disable="Grayed out"
          />
        <check loc="95 20" size="20 20"
          style="PlainText"
          vq="sbs2"
          vc="sbs2='y'"
          vc2="sbs2='n'"
          set="on('sbs2'):$VALUE"
          />
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="sb2"
          vc="sb2='y'"
          vc2="sb2='n' sbs2='n'"
          set="on('sb2'):$VALUE"
          />
        <label loc="0 0" size="100 20"
          style="PlainText"
          label="sinebell width"
          justify="Left"
          />
        <label loc="30 20" size="35 20"
          style="PlainText"
          label="shift"
          justify="Left"
          />
      </group>
      <group loc="0 20" size="205 40"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="gf2"
          vc="gf2='y'"
          vc2="gf2='n' gfs2= 'n'"
          set="on('gf2'):$VALUE"
          />
        <entry loc="115 20" size="85 20"
          style="PlainText"
          vq="gf2 gfs2"
          vc="gfs2=$VALUE gf_factor=n"
          set="$VALUE=gfs2"
          show="onparams('gf2','gfs2'):$VALUE"
          disable="Grayed out"
          />
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="gf2"
          vc="gf2=$VALUE gf_factor=n"
          set="$VALUE=gf2"
          show="on('gf2'):$VALUE"
          disable="Grayed out"
          />
        <check loc="95 20" size="20 20"
          style="PlainText"
          vq="gfs2"
          vc="gfs2='y'"
          vc2="gfs2='n'"
          set="on('gfs2'):$VALUE"
          />
        <label loc="0 0" size="95 20"
          style="PlainText"
          label="gaussian width"
          justify="Left"
          />
        <label loc="40 20" size="35 20"
          style="PlainText"
          label="shift"
          justify="Left"
          />
      </group>
    </group>
    <group loc="220 120" size="210 125"
      style="Heading1"
      label="Phase Encoding"
      vq="ftproc"
      show="$VALUE=(recon = 'internal') OR (recon = '')"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="PhaseEncodingWeighting"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="0 100" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="lb1"
          vc="lb1=$VALUE"
          set="$VALUE=lb1"
          show="on('lb1'):$VALUE"
          digits="1"
          disable="Grayed out"
          />
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="lb1"
          vc="lb1='y'"
          vc2="lb1='n'"
          set="on('lb1'):$VALUE"
          />
        <label loc="0 0" size="105 20"
          style="PlainText"
          label="line broadening"
          justify="Left"
          />
      </group>
      <group loc="0 60" size="205 40"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="115 20" size="85 20"
          style="PlainText"
          vq="sb1 sbs1"
          vc="sbs1=$VALUE sb_factor=n"
          set="$VALUE=sbs1"
          show="onparams('sb1','sbs1'):$VALUE"
          disable="Grayed out"
          />
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="sb1"
          vc="sb1=$VALUE sb_factor=n"
          set="$VALUE=sb1"
          show="on('sb1'):$VALUE"
          disable="Grayed out"
          />
        <check loc="95 20" size="20 20"
          style="PlainText"
          vq="sbs1"
          vc="sbs1='y'"
          vc2="sbs1='n'"
          set="on('sbs1'):$VALUE"
          />
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="sb1"
          vc="sb1='y'"
          vc2="sb1='n' sbs1='n'"
          set="on('sb1'):$VALUE"
          />
        <label loc="0 0" size="100 20"
          style="PlainText"
          label="sinebell width"
          justify="Left"
          />
        <label loc="30 20" size="35 20"
          style="PlainText"
          label="shift"
          justify="Left"
          />
      </group>
      <group loc="0 20" size="205 40"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="gf1"
          vc="gf1='y'"
          vc2="gf1='n' gfs1 = 'n'"
          set="on('gf1'):$VALUE"
          />
        <entry loc="115 20" size="85 20"
          style="PlainText"
          vq="gf1 gfs1"
          vc="gfs1=$VALUE gf_factor=n"
          set="$VALUE=gfs1"
          show="onparams('gf1','gfs1'):$VALUE"
          disable="Grayed out"
          />
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="gf1"
          vc="gf1=$VALUE gf_factor=n"
          set="$VALUE=gf1"
          show="on('gf1'):$VALUE"
          disable="Grayed out"
          />
        <check loc="95 20" size="20 20"
          style="PlainText"
          vq="gfs1"
          vc="gfs1='y'"
          vc2="gfs1='n'"
          set="on('gfs1'):$VALUE"
          />
        <label loc="0 0" size="95 20"
          style="PlainText"
          label="gaussian width"
          justify="Left"
          />
        <label loc="40 20" size="35 20"
          style="PlainText"
          label="shift"
          justify="Left"
          />
      </group>
    </group>
    <group loc="5 120" size="210 125"
      style="Heading1"
      label="Readout"
      vq="ftproc"
      show="$VALUE=(recon = 'internal') OR (recon = '')"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="WeightingParameters"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="0 100" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="115 0" size="85 20"
          style="Label1"
          vq="lb"
          vc="lb=$VALUE"
          set="$VALUE=lb"
          show="on('lb'):$VALUE"
          digits="1"
          disable="Grayed out"
          />
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="lb"
          vc="lb='y'"
          vc2="lb='n'"
          set="on('lb'):$VALUE"
          />
        <label loc="0 0" size="95 20"
          style="PlainText"
          label="line broadening"
          justify="Left"
          />
      </group>
      <group loc="0 60" size="205 40"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="115 20" size="85 20"
          style="PlainText"
          vq="sb sbs"
          vc="sbs=$VALUE sb_factor=n"
          set="$VALUE=sbs"
          show="onparams('sb','sbs'):$VALUE"
          disable="Grayed out"
          />
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="sb"
          vc="sb=$VALUE sb_factor =n"
          set="$VALUE=sb"
          show="on('sb'):$VALUE"
          disable="Grayed out"
          />
        <label loc="35 20" size="35 20"
          style="PlainText"
          label="shift"
          justify="Left"
          />
        <check loc="95 20" size="20 20"
          style="PlainText"
          vq="sbs"
          vc="sbs='y'"
          vc2="sbs='n'"
          set="on('sbs'):$VALUE"
          />
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="sb"
          vc="sb='y'"
          vc2="sb='n' sbs='n'"
          set="on('sb'):$VALUE"
          />
        <label loc="0 0" size="95 20"
          style="PlainText"
          label="sinebell width"
          justify="Left"
          />
      </group>
      <group loc="0 20" size="205 40"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Minor"
        >
        <label loc="40 20" size="35 20"
          style="PlainText"
          label="shift"
          justify="Left"
          />
        <entry loc="115 20" size="85 20"
          style="PlainText"
          vq="gf gfs"
          vc="gfs=$VALUE gf_factor = 'n'"
          set="$VALUE=gfs"
          show="onparams('gf','gfs'):$VALUE"
          disable="Grayed out"
          />
        <entry loc="115 0" size="85 20"
          style="PlainText"
          vq="gf"
          vc="gf=$VALUE gf_factor = 'n'"
          set="$VALUE=gf"
          show="on('gf'):$VALUE"
          disable="Grayed out"
          />
        <check loc="95 20" size="20 20"
          style="PlainText"
          vq="gfs"
          vc="gfs='y'"
          vc2="gfs='n'"
          set="on('gfs'):$VALUE"
          />
        <check loc="95 0" size="20 20"
          style="PlainText"
          vq="gf"
          vc="gf='y'"
          vc2="gf='n' gfs='n'"
          set="on('gf'):$VALUE"
          />
        <label loc="0 0" size="95 20"
          style="PlainText"
          label="gaussian width"
          justify="Left"
          />
      </group>
    </group>
    <group loc="5 25" size="425 95"
      style="Heading1"
      label="Auto Weighting, Both"
      vq="ftproc recon"
      show="$VALUE=(recon = 'internal') OR (recon = '')"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="AutoWeighting"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="5 20" size="80 20"
        style="PlainText"
        label="Gaussian:"
        justify="Left"
        />
      <label loc="5 45" size="80 20"
        style="PlainText"
        label="Sinebell:"
        justify="Left"
        />
      <label loc="5 70" size="165 20"
        style="PlainText"
        label="Line Broadening:"
        justify="Left"
        />
      <label loc="90 45" size="160 20"
        style="PlainText"
        label="Width in percent of at"
        justify="Left"
        />
      <label loc="90 20" size="160 20"
        style="PlainText"
        label="Signal reduction at edge"
        justify="Left"
        />
      <entry loc="255 20" size="40 20"
        style="PlainText"
        vq="gf_factor"
        vc="gf_factor=$VALUE"
        set="$VALUE=gf_factor"
        show="on('gf_factor'):$VALUE"
        disable="Grayed out"
        />
      <entry loc="255 45" size="40 20"
        style="PlainText"
        vq="sb_factor"
        vc="sb_factor=$VALUE"
        set="$VALUE=sb_factor"
        show="on('sb_factor'):$VALUE"
        disable="Grayed out"
        />
      <entry loc="255 70" size="40 20"
        style="PlainText"
        vq="lb lb1"
        vc="lb=$VALUE lb1=$VALUE gf=n gfs=n sb=n sbs=n gf1=n gfs1=n sb1=n sbs1=n"
        set="$VALUE = lb"
        show="on('lb'):$on $VALUE=(lb=lb1) AND (lb=lb2) AND ($on &gt; 0)"
        digits="0"
        disable="Grayed out"
        />
      <label loc="295 70" size="20 20"
        style="Label1"
        label="Hz"
        />
      <button loc="320 45" size="55 20"
        style="PlainText"
        label="Apply"
        vc="sb_factor='y' gf_factor='n' sb=at*sb_factor/100 sbs=at/2-sb  sb1=nv/sw1*sb_factor/100 sbs1=nv/sw1/2-sb1 sb2=nv/sw2*sb_factor/100 sbs2=nv/sw2/2-sb2  gf='n' gfs='n' lb='n' awc='n' gf1='n' gfs1='n' lb1='n' awc1='n' gf2='n' gfs2='n' lb2='n' awc2='n' "
        bg="VJBackground"
        decor1="no"
        />
      <button loc="320 70" size="55 20"
        style="PlainText"
        label="Apply"
        vc="lb=y lb1=lb lb2=lb sb_factor='n' gf_factor='n' gf='n' gfs='n' gf1='n' gfs1='n' gf2='n' gfs2='n' sb='n' sbs='n' sb1='n' sbs1='n' sb2='n' sbs2='n' awc='n' awc1='n' awc2='n' "
        bg="VJBackground"
        decor1="no"
        />
      <button loc="320 20" size="55 20"
        style="PlainText"
        label="Apply"
        vc="gf_factor='y' filter(gf_factor) sb_factor='n' sb='n' sbs='n' lb='n' awc='n' sb1='n' sbs1='n' lb1='n' awc1='n'  sb2='n' sbs2='n' lb2='n' awc2='n' "
        bg="transparent"
        decor1="no"
        />
      <label loc="295 20" size="20 20"
        style="Label1"
        label="dB"
        />
      <label loc="295 45" size="20 20"
        style="Label1"
        label="%"
        />
    </group>
    <check loc="5 0" size="210 25"
      style="Heading1"
      label="Apply Weighting"
      vq="ftproc"
      vc="ftproc[1] = 1"
      vc2="ftproc[1] = 0"
      set="$VALUE = (ftproc[1] =1)"
      />
  </group>
</template>
