<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="Prescan" element="pages" type="sample" >
  <group size="800 270"
    label="Prescan"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="yes"
    reference="Prescan"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <group loc="220 0" size="210 160"
      style="Heading1"
      label="Hardware"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Hardware"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <button loc="45 125" size="120 20"
        style="Label4"
        label="Setup Hardware"
        vc="expactive:$ret if (system &lt;&gt; 'datastation') and $ret=0 then su endif"
        bg="darkGreen"
        decor1="no"
        />
      <check loc="5 100" size="130 20"
        style="PlainText"
        label="Protocol specific"
        vq="VOLUMEXMT"
        vc="coiltype(0)"
        vc2="coiltype(coil_param[20])"
        set="$VALUE = (VOLUMEXMT = 'l')"
        />
      <textmessage loc="90 80" size="55 20"
        style="Label1"
        label="H1"
        vq="coil_param"
        set="prescan_tn:$VALUE"
        />
      <label loc="5 80" size="85 20"
        style="Label1"
        label="Nucleus"
        justify="Left"
        />
      <group loc="5 60" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="85 0" size="95 20"
          style="PlainText"
          vq="RCVRS"
          vc="RCVRS='$VALUE'"
          set="$VALUE = RCVRS"
          />
        <label loc="0 0" size="85 20"
          style="Label1"
          label="Rcvr setup"
          justify="Left"
          />
      </group>
      <group loc="5 40" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <textmessage loc="85 0" size="115 20"
          style="PlainText"
          label="Volume XMT/RCV"
          vq="coil_param"
          set="coiltype(coil_param[20]):$VALUE"
          />
        <label loc="0 0" size="85 20"
          style="Label1"
          label="RF coil type"
          justify="Left"
          />
      </group>
      <filemenu loc="90 20" size="115 20"
        style="PlainText"
        vq="rfcoil"
        vc="prescan_CoilTable('read','$VALUE') ldrf"
        set="$VALUE=rfcoil"
        file="$file='/templates/vnmrj/choicefiles/coil' get_path($file):$path $VALUE=$path+$file"
        type="file"
        bg="VJBackground"
        editable="No"
        vq2="rfcoil"
        statshow="yes"
        elastic="no"
        display="yes"
        />
      <label loc="5 20" size="85 20"
        style="Label1"
        label="RF Coil"
        justify="Left"
        />
    </group>
    <group loc="220 160" size="210 110"
      style="Heading1"
      label="Slice Selection"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="prescan_slice"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <entry loc="115 80" size="60 20"
        style="PlainText"
        vq="Prescan_Thickness"
        vc="Prescan_Thickness=$VALUE"
        set="$VALUE=Prescan_Thickness"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="115 60" size="60 20"
        style="PlainText"
        vq="Prescan_FOV"
        vc="Prescan_FOV=$VALUE/10"
        set="$VALUE=Prescan_FOV*10"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="115 40" size="60 20"
        style="PlainText"
        vq="Prescan_SliceOffset"
        vc="Prescan_SliceOffset=$VALUE"
        set="$VALUE=Prescan_SliceOffset"
        digits="1"
        disable="Grayed out"
        />
      <label loc="175 80" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <label loc="175 60" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <label loc="175 40" size="30 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <menu loc="115 20" size="85 20"
        style="PlainText"
        label="menu"
        vq="Prescan_Orient"
        vc="Prescan_Orient = '$VALUE'"
        set="$VALUE  = Prescan_Orient"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Axial"
          chval="trans"
          />
        <mlabel 
          label="Coronal"
          chval="cor"
          />
        <mlabel 
          label="Sagittal"
          chval="sag"
          />
      </menu>
      <label loc="5 40" size="95 20"
        style="Label1"
        label="Offset"
        justify="Left"
        />
      <label loc="5 60" size="95 20"
        style="Label1"
        label="FOV"
        justify="Left"
        />
      <label loc="5 80" size="95 20"
        style="Label1"
        label="Thickness"
        justify="Left"
        />
      <label loc="5 20" size="95 20"
        style="Label1"
        label="Orientation"
        justify="Left"
        />
    </group>
    <group loc="435 90" size="210 70"
      style="Heading1"
      label="Power"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Power"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <label loc="5 20" size="200 20"
        style="Label1"
        label="90deg pulse optimized between"
        justify="Left"
        />
      <label loc="130 40" size="30 20"
        style="Label1"
        label="dB"
        justify="Left"
        />
      <textmessage loc="85 40" size="45 20"
        style="Label1"
        label="30.80"
        set="calc_power(coil_param[1],coil_param[3]+(coil_param[5]-1)*coil_param[4]):$VALUE"
        digits="2"
        />
      <label loc="50 40" size="30 20"
        style="Label1"
        label="and"
        justify="Center"
        />
      <textmessage loc="5 40" size="45 20"
        style="Label1"
        label="10.80"
        set="calc_power(coil_param[1],coil_param[3]):$VALUE"
        digits="2"
        />
    </group>
    <group loc="435 0" size="210 90"
      style="Heading1"
      label="Frequency"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="PrescanResults"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <check loc="5 60" size="115 20"
        style="PlainText"
        label="Slice selective"
        vq="Prescan_SliceSelect"
        vc="Prescan_SliceSelect='y'"
        vc2="Prescan_SliceSelect='n'"
        set="$VALUE = (Prescan_SliceSelect='y')"
        />
      <textmessage loc="80 20" size="70 20"
        style="Label1"
        label="-460.8"
        vq="tn"
        set="$VALUE = {tn + 'offset'}"
        digits="1"
        />
      <textmessage loc="80 40" size="70 20"
        style="Label1"
        label="-1,745.6"
        vq="Prescan_FatOffset"
        set="$VALUE = Prescan_FatOffset"
        digits="1"
        />
      <label loc="150 40" size="25 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <label loc="150 20" size="25 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <textmessage loc="5 20" size="55 20"
        style="Label1"
        label="H1offset"
        vq="tn"
        set="write('line3','%soffset',tn):$VALUE"
        />
      <textmessage loc="5 40" size="90 20"
        style="Label1"
        label="Fat Offset"
        set="$VALUE = 'Fat Offset'"
        />
    </group>
    <group loc="5 0" size="210 160"
      style="Heading1"
      label="Run"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Run..."
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <check loc="20 135" size="175 20"
        style="PlainText"
        label="Trigger prescans"
        vq="Prescan_Ticks"
        vc="Prescan_Ticks = 1"
        vc2="Prescan_Ticks = 0"
        set="$VALUE = (Prescan_Ticks = 1)"
        />
      <button loc="20 110" size="120 20"
        style="Label4"
        label="List"
        vc="prescan_main"
        bg="darkGreen"
        decor1="no"
        />
      <button loc="19 45" size="120 20"
        style="Label4"
        label="Power"
        vc="prescan_main('power')"
        bg="darkGreen"
        decor1="no"
        />
      <button loc="19 20" size="120 20"
        style="Label4"
        label="Frequency"
        vc="prescan_main('freq')"
        bg="darkGreen"
        decor1="no"
        />
    </group>
    <group loc="5 160" size="210 110"
      style="Heading1"
      label="Retrieve Data/Params"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="tmp"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <button loc="15 25" size="120 20"
        style="Heading3"
        label="Frequency"
        vc="prescan_params('save') prescan_data('load','freq'):$ex if ($ex=0) then prescanfreq prescan_frequency('exp','nogo') endif"
        bg="transparent"
        decor1="no"
        />
      <button loc="15 50" size="120 20"
        style="Heading3"
        label="Power"
        vc="prescan_params('save') prescan_data('load','power'):$ex if ($ex=0) then prescanpower prescan_power('exp','nogo') endif"
        bg="transparent"
        decor1="no"
        />
      <button loc="15 85" size="120 20"
        style="Heading3"
        label="Modify Setup"
        vq="Prescan_ShowSetup"
        vc="Prescan_ShowSetup = 1  vnmrjcmd('setpage','Start','Prescan Setup')"
        bg="transparent"
        decor1="no"
        />
    </group>
    <group loc="650 0" size="145 250"
      style="Heading1"
      label="User List"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="PrescanList"
      useref="no"
      subtype="Titled"
      expanded="yes"
      >
      <group loc="5 215" size="130 25"
        vq="panellevel"
        show="$VALUE = (panellevel &gt; 0)"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <button loc="5 0" size="120 20"
          style="Heading3"
          label="Modify List"
          vc="Prescan_ShowList = 1 vnmrjcmd('setpage','Start','Prescan List')"
          bg="transparent"
          decor1="no"
          />
      </group>
      <textmessage loc="10 180" size="100 20"
        style="Label1"
        label=" "
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 7) then $VALUE = 'More...' else $VALUE = '' endif"
        />
      <textmessage loc="10 120" size="100 20"
        style="Label1"
        label=" "
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 5) then $VALUE = '5. ' + prescan_order[6] else $VALUE = '' endif"
        />
      <textmessage loc="10 100" size="100 20"
        style="Label1"
        label=" "
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 4) then $VALUE = '4. ' + prescan_order[5] else $VALUE = '' endif"
        />
      <textmessage loc="10 80" size="100 20"
        style="Label1"
        label=" "
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 3) then $VALUE = '3. ' + prescan_order[4] else $VALUE = '' endif"
        />
      <textmessage loc="10 60" size="100 20"
        style="Label1"
        label="2. power"
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 2) then $VALUE = '2. ' + prescan_order[3] else $VALUE = '' endif"
        />
      <textmessage loc="10 40" size="100 20"
        style="Label1"
        label="1. freq"
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 1) then $VALUE = '1. ' + prescan_order[2] else $VALUE = '' endif"
        />
      <textmessage loc="10 160" size="100 20"
        style="Label1"
        label=" "
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 7) then $VALUE = '7. ' + prescan_order[8] else $VALUE = '' endif"
        />
      <textmessage loc="10 140" size="100 20"
        style="Label1"
        label=" "
        vq="prescan_order"
        set="if (size('prescan_order') &gt; 6) then $VALUE = '6. ' + prescan_order[7] else $VALUE = '' endif"
        />
      <check loc="5 20" size="105 20"
        style="Label1"
        label="Use this list"
        vq="prescan_order"
        vc="prescan_order[1] = 'skip'"
        vc2="prescan_order[1] = 'stop'"
        set="$VALUE = (prescan_order[1] = 'skip')"
        />
    </group>
  </group>
</template>
