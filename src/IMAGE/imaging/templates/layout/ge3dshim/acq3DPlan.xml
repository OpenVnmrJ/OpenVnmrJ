<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acq3DPlan" element="pages" type="acquisition" >
  <group size="800 270"
    label="Plan"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acq3DPlan"
    useref="no"
    subtype="Convenience"
    expanded="yes"
    >
    <group loc="435 0" size="210 125"
      style="Heading1"
      label="Display Options"
      vq="iplanType"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="z"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 20" size="130 100"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <button loc="0 40" size="110 20"
          style="PlainText"
          label="Save for Shimming"
          vc="scoutpath=scoutpaths[1] writeparam(userdir+'/prescan/voxel.par','iplanDefaultType iplanType vtheta  vphi vpsi vox1 vox2 vox3 pos1 pos2 pos3 scoutpath')"
          decor1="no"
          />
        <group loc="0 60" size="130 40"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Convenience"
          >
          <check loc="0 20" size="100 20"
            style="PlainText"
            label="3D view"
            vq="iplanType"
            vc="gplan('setDraw3D', 1)"
            vc2="gplan('setDraw3D', 0)"
            set="gplan('getActStackInfo', 'draw3D'):$VALUE"
            />
          <check loc="0 0" size="100 20"
            style="PlainText"
            label="Display Axes"
            vq="iplanType"
            vc="gplan('setDrawAxes', 1)"
            vc2="gplan('setDrawAxes', 0)"
            set="gplan('getActStackInfo', 'drawAxes'):$VALUE"
            />
        </group>
        <button loc="0 20" size="110 20"
          style="PlainText"
          label="Save Milestone"
          vc="gplan('saveMilestoneStacks')"
          decor1="no"
          />
        <button loc="0 0" size="110 20"
          style="PlainText"
          label="Clear Display"
          vc="gplan('clearStacks')"
          decor1="no"
          />
      </group>
    </group>
    <group loc="220 0" size="210 270"
      style="Heading1"
      label="Voxel"
      vq="iplanType"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="z"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 20" size="200 20"
        vq="studyid"
        show="$VALUE=1"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Basic"
        >
        <label loc="0 0" size="90 20"
          style="Label1"
          label="Orientation"
          justify="Left"
          />
        <filemenu loc="95 0" size="100 20"
          style="PlainText"
          vq="orient planValue"
          vc="iplanType = 3 planValue='$VALUE' setgplan('$VALUE')"
          set="$VALUE = planValue"
          file="exists(sqdir+'/plans','file'):$e if ($e = 0) then $VALUE=systemdir+'/imaging/templates/vnmrj/choicefiles/plans' else $VALUE=sqdir+'/plans' endif"
          type="file"
          editable="No"
          vq2="sqdir studyid"
          statshow="yes"
          elastic="no"
          display="yes"
          />
      </group>
      <group loc="5 45" size="200 80"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="3DFOV"
        useref="no"
        subtype="Convenience"
        expanded="yes"
        >
        <label loc="105 0" size="60 20"
          style="Label1"
          label="Position"
          justify="Left"
          />
        <entry loc="105 60" size="50 20"
          style="PlainText"
          vq="pos3"
          vc="gplan('setValue','pos3',$VALUE/10.0)"
          set="$VALUE=pos3*10.0"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="105 40" size="50 20"
          style="PlainText"
          vq="pos2"
          vc="gplan('setValue','pos2',$VALUE/10.0)"
          set="$VALUE=pos2*10.0"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="50 60" size="50 20"
          style="PlainText"
          vq="vox3"
          vc="gplan('setValue','vox3',$VALUE)"
          set="$VALUE=vox3"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="50 40" size="50 20"
          style="PlainText"
          vq="vox2"
          vc="gplan('setValue','vox2',$VALUE)"
          set="$VALUE=vox2"
          digits="2"
          disable="Grayed out"
          />
        <label loc="155 60" size="25 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="0 60" size="50 20"
          style="Label1"
          label="Dim 3"
          justify="Left"
          />
        <label loc="50 0" size="40 20"
          style="Label1"
          label="Size"
          justify="Left"
          />
        <entry loc="50 20" size="50 20"
          style="PlainText"
          vq="vox1"
          vc="gplan('setValue','vox1',$VALUE)"
          set="$VALUE=vox1"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="105 20" size="50 20"
          style="PlainText"
          vq="pos1"
          vc="gplan('setValue','pos1',$VALUE/10.0)"
          set="$VALUE=pos1*10.0"
          digits="2"
          disable="Grayed out"
          />
        <label loc="155 20" size="35 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="155 40" size="25 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="0 40" size="50 20"
          style="Label1"
          label="Dim 2"
          justify="Left"
          />
        <label loc="0 20" size="50 20"
          style="Label1"
          label="Dim 1"
          justify="Left"
          />
      </group>
      <group loc="5 185" size="200 30"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <button loc="0 0" size="100 20"
          style="Label1"
          label="Marking"
          vc="gplan('setMarkMode', 1)"
          decor1="no"
          />
        <button loc="100 0" size="100 20"
          style="Label1"
          label="Add Voxel"
          vc="gplan('addAstack',3)"
          decor1="no"
          />
      </group>
      <group loc="5 130" size="200 45"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="euler_horz"
        useref="no"
        subtype="Convenience"
        expanded="yes"
        >
        <label loc="0 0" size="185 20"
          style="Label1"
          label="Angles (vpsi, vphi, vtheta)"
          justify="Left"
          />
        <entry loc="105 20" size="50 20"
          style="PlainText"
          vq="vtheta"
          vc="gplan('setValue','vtheta',$VALUE)"
          set="$VALUE=vtheta"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="0 20" size="45 20"
          style="PlainText"
          vq="vpsi"
          vc="gplan('setValue','vpsi',$VALUE)"
          set="$VALUE=vpsi"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="50 20" size="50 20"
          style="PlainText"
          vq="vphi"
          vc="gplan('setValue','vphi',$VALUE)"
          set="$VALUE=vphi"
          digits="1"
          disable="Grayed out"
          />
      </group>
    </group>
    <group loc="435 125" size="210 125"
      style="Heading1"
      label="Slab"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="slabthk"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="90 80" size="115 20"
        style="PlainText"
        label="Center on FOV"
        vq="slabctr"
        vc="slabctr = 'y' gplan('setValue','pss0',ppe2)"
        vc2="slabctr = 'n'"
        set="$VALUE = (slabctr='y')"
        />
      <toggle loc="90 100" size="100 20"
        style="PlainText"
        label="View Slab"
        vq="iplanType"
        vc="gplan('setDefaultType', 0) iplanDefaultType=0 setgplan('standard getCurrentStacks' )"
        vc2="gplan('setDefaultType', 2) iplanDefaultType=2 setgplan('standard getCurrentStacks' )"
        set="$VALUE = (iplanType = 0)"
        radiobutton="no"
        />
      <label loc="150 60" size="40 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <entry loc="90 60" size="60 20"
        style="PlainText"
        vq="pss0 slabctr"
        vc="pss0 = $VALUE/10 gplan('setValue','pss0',$VALUE/10) go('check') slabctr = 'n'"
        set="$VALUE = pss0*10"
        digits="2"
        disable="Grayed out"
        />
      <label loc="5 60" size="85 20"
        style="Label1"
        label="Position"
        justify="Left"
        />
      <label loc="150 40" size="55 20"
        style="Label1"
        label="% of lpe2"
        justify="Left"
        />
      <label loc="150 20" size="40 20"
        style="Label1"
        label="mm"
        justify="Left"
        />
      <entry loc="90 40" size="60 20"
        style="PlainText"
        vq="thk lpe2"
        vc="thk = $VALUE/10*lpe2"
        set="$VALUE = thk/lpe2*10"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="90 20" size="60 20"
        style="PlainText"
        vq="thk"
        vc="thk = $VALUE gplan('setValue','thk',$VALUE) go('check')"
        set="$VALUE = thk"
        digits="2"
        disable="Grayed out"
        />
      <label loc="5 20" size="85 20"
        style="Label1"
        label="Thickness"
        justify="Left"
        />
    </group>
    <group loc="5 0" size="210 270"
      style="Heading1"
      label="FOV"
      vq="iplanType"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FOV3D"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 20" size="200 20"
        vq="studyid"
        show="$VALUE=1"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Basic"
        >
        <label loc="0 0" size="90 20"
          style="Label1"
          label="Orientation"
          justify="Left"
          />
        <filemenu loc="95 0" size="100 20"
          style="PlainText"
          vq="orient planValue"
          vc="iplanType = 2 planValue='$VALUE' setgplan('$VALUE')"
          set="$VALUE = planValue"
          file="exists(sqdir+'/plans','file'):$e if ($e = 0) then $VALUE=systemdir+'/imaging/templates/vnmrj/choicefiles/plans' else $VALUE=sqdir+'/plans' endif"
          type="file"
          editable="No"
          vq2="sqdir studyid"
          statshow="yes"
          elastic="no"
          display="yes"
          />
      </group>
      <group loc="5 45" size="200 80"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="3DFOV"
        useref="no"
        subtype="Convenience"
        expanded="yes"
        >
        <label loc="155 60" size="25 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <entry loc="105 60" size="50 20"
          style="PlainText"
          vq="ppe2"
          vc="gplan('setValue','ppe2',$VALUE/10.0)"
          set="$VALUE=ppe2*10.0"
          digits="2"
          disable="Label"
          />
        <entry loc="50 60" size="50 20"
          style="PlainText"
          vq="lpe2"
          vc="gplan('setValue','lpe2',$VALUE/10.0)"
          set="$VALUE=lpe2*10.0"
          digits="2"
          disable="Grayed out"
          />
        <label loc="0 60" size="50 20"
          style="Label1"
          label="Phase 2"
          justify="Left"
          />
        <label loc="50 0" size="40 20"
          style="Label1"
          label="FOV"
          justify="Left"
          />
        <label loc="105 0" size="40 20"
          style="Label1"
          label="Offset"
          justify="Left"
          />
        <entry loc="50 20" size="50 20"
          style="PlainText"
          vq="lro"
          vc="gplan('setValue','lro',$VALUE/10.0)"
          set="$VALUE=lro*10.0"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="50 40" size="50 20"
          style="PlainText"
          vq="lpe"
          vc="gplan('setValue','lpe',$VALUE/10.0)"
          set="$VALUE=lpe*10.0"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="105 20" size="50 20"
          style="PlainText"
          vq="pro"
          vc="gplan('setValue','pro',$VALUE/10.0)"
          set="$VALUE=pro*10.0"
          digits="2"
          disable="Grayed out"
          />
        <entry loc="105 40" size="50 20"
          style="PlainText"
          vq="ppe"
          vc="gplan('setValue','ppe',$VALUE/10.0)"
          set="$VALUE=ppe*10.0"
          show="gplan('getUseppe'):$v if ($v = 0) then $VALUE = 0 else $VALUE = 1 endif"
          digits="2"
          disable="Label"
          />
        <label loc="155 20" size="35 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="155 40" size="25 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <check loc="180 40" size="20 20"
          style="PlainText"
          vc="gplan('setUseppe',1) ppe=ppe"
          vc2="gplan('setUseppe',0)"
          set="gplan('getUseppe'):$VALUE"
          />
        <label loc="0 40" size="50 20"
          style="Label1"
          label="Phase"
          justify="Left"
          />
        <label loc="0 20" size="50 20"
          style="Label1"
          label="Readout"
          justify="Left"
          />
      </group>
      <group loc="5 185" size="200 30"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <button loc="0 0" size="100 20"
          style="Label1"
          label="Marking"
          vc="gplan('setMarkMode', 1)"
          decor1="no"
          />
        <button loc="100 0" size="100 20"
          style="Label1"
          label="Add Volume"
          vc="gplan('addAstack',2)"
          decor1="no"
          />
      </group>
      <group loc="5 130" size="200 45"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="euler_horz"
        useref="no"
        subtype="Convenience"
        expanded="yes"
        >
        <entry loc="105 20" size="50 20"
          style="PlainText"
          vq="theta"
          vc="gplan('setValue','theta',$VALUE)"
          set="$VALUE=theta"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="0 20" size="45 20"
          style="PlainText"
          vq="psi"
          vc="gplan('setValue','psi',$VALUE)"
          set="$VALUE=psi"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="50 20" size="50 20"
          style="PlainText"
          vq="phi"
          vc="gplan('setValue','phi',$VALUE)"
          set="$VALUE=phi"
          digits="1"
          disable="Grayed out"
          />
        <label loc="0 0" size="145 20"
          style="Label1"
          label="Angles (psi, phi, theta)"
          justify="Left"
          />
      </group>
    </group>
  </group>
</template>
