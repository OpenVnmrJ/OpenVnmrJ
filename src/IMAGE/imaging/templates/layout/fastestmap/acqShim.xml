<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acqShim" element="pages" type="acquisition" >
  <group size="855 280"
    label="Shim"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acqShim"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="100 145" size="580 130"
      style="Heading1"
      label="Shim Parameters"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="trstuff"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <menu loc="400 65" size="70 20"
        style="PlainText"
        label="menu"
        vq="nproj"
        vc="nproj[4]=$VALUE"
        set="$VALUE=nproj[4]"
        editable="No"
        >
        <mlabel 
          label="3"
          chval="1"
          />
        <mlabel 
          label="6"
          chval="2"
          />
      </menu>
      <menu loc="320 65" size="70 20"
        style="PlainText"
        label="menu"
        vq="nproj"
        vc="nproj[3]=$VALUE"
        set="$VALUE=nproj[3]"
        editable="No"
        >
        <mlabel 
          label="3"
          chval="1"
          />
        <mlabel 
          label="6"
          chval="2"
          />
      </menu>
      <menu loc="240 65" size="70 20"
        style="PlainText"
        label="menu"
        vq="nproj"
        vc="nproj[2]=$VALUE"
        set="$VALUE=nproj[2]"
        editable="No"
        >
        <mlabel 
          label="3"
          chval="1"
          />
        <mlabel 
          label="6"
          chval="2"
          />
      </menu>
      <menu loc="400 45" size="70 20"
        style="PlainText"
        label="menu"
        vq="shsel"
        vc="shsel[4]=$VALUE"
        set="$VALUE=shsel[4]"
        editable="No"
        >
        <mlabel 
          label="1-(xyz)"
          chval="1"
          />
        <mlabel 
          label="1&amp;2"
          chval="2"
          />
      </menu>
      <menu loc="320 45" size="70 20"
        style="PlainText"
        label="menu"
        vq="shsel"
        vc="shsel[3]=$VALUE"
        set="$VALUE=shsel[3]"
        editable="No"
        >
        <mlabel 
          label="1-(xyz)"
          chval="1"
          />
        <mlabel 
          label="1&amp;2"
          chval="2"
          />
      </menu>
      <menu loc="240 45" size="70 20"
        style="PlainText"
        label="menu"
        vq="shsel"
        vc="shsel[2]=$VALUE"
        set="$VALUE=shsel[2]"
        editable="No"
        >
        <mlabel 
          label="1-(xyz)"
          chval="1"
          />
        <mlabel 
          label="1&amp;2"
          chval="2"
          />
      </menu>
      <menu loc="160 45" size="70 20"
        style="PlainText"
        label="menu"
        vq="shsel"
        vc="shsel[1]=$VALUE "
        set="$VALUE=shsel[1]"
        editable="No"
        >
        <mlabel 
          label="1-(xyz)"
          chval="1"
          />
        <mlabel 
          label="1&amp;2"
          chval="2"
          />
      </menu>
      <entry loc="545 85" size="30 20"
        style="PlainText"
        vq="nf_def epi"
        vc="nf_def=$VALUE go('check')"
        set="$VALUE=nf_def"
        show="$VALUE=(epi='y')"
        digits="0"
        disable="Grayed out"
        />
      <label loc="480 85" size="55 20"
        style="Label1"
        label="Echoes"
        justify="Left"
        />
      <menu loc="160 65" size="70 20"
        style="PlainText"
        label="menu"
        vq="nproj"
        vc="nproj[1]=$VALUE"
        set="$VALUE=nproj[1]"
        editable="No"
        >
        <mlabel 
          label="3"
          chval="1"
          />
        <mlabel 
          label="6"
          chval="2"
          />
      </menu>
      <label loc="5 65" size="155 20"
        style="Label1"
        label="No of projections"
        justify="Left"
        />
      <check loc="400 85" size="60 20"
        style="PlainText"
        vq="epi"
        vc="epiflag[4]='y'"
        vc2="epiflag[4]='n'"
        set="$VALUE=(epiflag[4]='y')"
        />
      <check loc="320 85" size="60 20"
        style="PlainText"
        vq="epi"
        vc="epiflag[3]='y'"
        vc2="epiflag[3]='n'"
        set="$VALUE=(epiflag[3]='y')"
        />
      <check loc="240 85" size="60 20"
        style="PlainText"
        vq="epi"
        vc="epiflag[2]='y'"
        vc2="epiflag[2]='n'"
        set="$VALUE=(epiflag[2]='y')"
        />
      <check loc="160 85" size="60 20"
        style="PlainText"
        vq="epi"
        vc="epiflag[1]='y'"
        vc2="epiflag[1]='n'"
        set="$VALUE=(epiflag[1]='y')"
        />
      <label loc="5 85" size="155 20"
        style="Label1"
        label="Multi-echo flag"
        justify="Left"
        />
      <entry loc="400 105" size="50 20"
        style="PlainText"
        vq="shdel[4]"
        vc="shdel[4]=$VALUE/1000"
        set="$VALUE=shdel[4]*1000"
        show="on('shdel'):$VALUE"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="320 105" size="50 20"
        style="PlainText"
        vq="shdel"
        vc="shdel[3]=$VALUE/1000"
        set="$VALUE=shdel[3]*1000"
        show="on('shdel'):$VALUE"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="240 105" size="50 20"
        style="PlainText"
        vq="shdel[2]"
        vc="shdel[2]=$VALUE/1000"
        set="$VALUE=shdel[2]*1000"
        show="on('shdel'):$VALUE"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="160 105" size="50 20"
        style="PlainText"
        vq="shdel[1]"
        vc="shdel[1]=$VALUE/1000"
        set="$VALUE=shdel[1]*1000"
        show="on('shdel'):$VALUE"
        digits="1"
        disable="Grayed out"
        />
      <label loc="5 105" size="155 20"
        style="Label1"
        label="Phase delay, tau (ms)"
        justify="Left"
        />
      <label loc="5 20" size="155 20"
        style="Label1"
        label="Iterations"
        justify="Left"
        />
      <label loc="5 43" size="155 20"
        style="Label1"
        label="Shim selection"
        justify="Left"
        />
      <check loc="160 23" size="60 20"
        style="PlainText"
        vq="shcycle"
        vc="shcycle[1]=1"
        vc2="shcycle[1]=0"
        set="$VALUE=(shcycle[1]=1)"
        />
      <check loc="240 23" size="60 20"
        style="PlainText"
        vq="shcycle"
        vc="shcycle[2]=1"
        vc2="shcycle[2]=0"
        set="$VALUE=(shcycle[2]=1)"
        />
      <check loc="320 23" size="60 20"
        style="PlainText"
        vq="shcycle"
        vc="shcycle[3]=1"
        vc2="shcycle[3]=0"
        set="$VALUE=(shcycle[3]=1)"
        />
      <check loc="400 23" size="60 20"
        style="PlainText"
        vq="shcycle"
        vc="shcycle[4]=1"
        vc2="shcycle[4]=0"
        set="$VALUE=(shcycle[4]=1)"
        />
    </group>
    <group loc="370 25" size="310 120"
      style="Heading1"
      label="Shimfiles"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ShimCalibration"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <entry loc="155 25" size="90 20"
        style="PlainText"
        vq="shims"
        vc="shimfile='$VALUE'"
        set="$VALUE=shimfile"
        disable="Grayed out"
        />
      <label loc="15 25" size="130 20"
        style="Label1"
        label="Shim filename"
        justify="Left"
        />
      <button loc="15 45" size="130 20"
        style="Heading3"
        label="Load shimfile"
        vc="rts(shimfile) setallshims"
        decor1="no"
        />
      <button loc="15 65" size="130 20"
        style="Heading3"
        label="Save shimfile"
        vq="shims"
        vc="svs(shimfile,'force') "
        decor1="no"
        />
      <button loc="15 90" size="130 20"
        style="Heading3"
        label="Zero all shims"
        vc="rts('reg0') setallshims"
        decor1="no"
        />
    </group>
    <group loc="100 25" size="255 120"
      style="Heading1"
      label="Autoshim"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ShimCalibration"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <button loc="20 90" size="160 20"
        style="Heading3"
        label="Save Prescan Params"
        vc="svpshimprescan"
        bg="transparent"
        decor1="no"
        />
      <button loc="20 55" size="160 20"
        style="Heading3"
        label="Restore Shims"
        vc="rts('start0') setallshims"
        bg="transparent"
        decor1="no"
        />
      <button loc="20 30" size="160 20"
        style="Label4"
        label="Shim"
        vc="Prescan_ShimMethod='fastmap'   prescan_control[1]=-1  cnt=1 wexp='' werr='' fm_acquire"
        bg="darkGreen"
        decor1="no"
        />
    </group>
    <textmessage loc="0 0" size="150 20"
      style="Heading1"
      label="fastestmap"
      vq="pslabel"
      set="$VALUE=pslabel"
      />
  </group>
</template>
