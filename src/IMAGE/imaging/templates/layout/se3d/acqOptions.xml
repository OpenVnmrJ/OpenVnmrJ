<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acqOptions" element="pages" type="acquisition" >
  <group size="800 270"
    style="Heading1"
    label="Options"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acqOptions"
    useref="no"
    subtype="Convenience"
    expanded="yes"
    >
    <group loc="220 130" size="210 130"
      style="Heading1"
      label="Magnetization Transfer"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FatSaturation"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="5 45" size="70 20"
        style="PlainText"
        label="Flip Angle"
        justify="Left"
        />
      <label loc="135 85" size="30 20"
        style="PlainText"
        label="Hz"
        justify="Left"
        />
      <label loc="5 85" size="60 20"
        style="PlainText"
        label="Offset"
        justify="Left"
        />
      <entry loc="75 85" size="60 20"
        style="PlainText"
        vq="mt"
        vc="mtfrq=$VALUE"
        set="$VALUE=mtfrq"
        show="if (mt = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="75 65" size="60 20"
        style="PlainText"
        vq="pmt fsat"
        vc="pmt=$VALUE*1000.0 go('check')"
        set="$VALUE=pmt/1000.0"
        show="if (mt = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <label loc="135 65" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="5 65" size="60 20"
        style="PlainText"
        label="Duration"
        justify="Left"
        />
      <label loc="135 45" size="30 20"
        style="PlainText"
        label="deg"
        justify="Left"
        />
      <entry loc="75 45" size="60 20"
        style="PlainText"
        vq="flipmt mt"
        vc="flipmt=$VALUE"
        set="$VALUE=flipmt"
        show="if (mt = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <check loc="5 20" size="65 20"
        style="PlainText"
        label="MT"
        vq="mt"
        vc="mt='y'"
        vc2="mt='n' go('check')"
        set="$VALUE=(mt='y')"
        />
    </group>
    <group loc="435 0" size="210 260"
      style="Heading1"
      label="Diffusion"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Diffusion"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 170" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <entry loc="70 0" size="55 20"
          style="PlainText"
          vq="gdiff diff tdelta tDELTA max_bval"
          vc="if (max_bval = 0) then gdiff=1 bvalue endif gdiff = gdiff*sqrt($VALUE/max_bval) bvalue go('check')"
          set="$VALUE = max_bval"
          show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
          digits="2"
          />
        <label loc="130 0" size="45 20"
          style="PlainText"
          label="s/mm2"
          justify="Left"
          />
        <label loc="0 0" size="70 20"
          style="Label1"
          label="Target b-value"
          justify="Left"
          />
      </group>
      <group loc="5 190" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
        <textmessage loc="70 0" size="55 20"
          style="PlainText"
          label="---"
          vq="max_bval gdiff diff bvalue"
          set="arraymax('bvalue'):$VALUE $VALUE = $VALUE*(diff='y')"
          show="$VALUE = (diff='y')"
          digits="2"
          statpar="max_bval"
          />
        <label loc="130 0" size="45 20"
          style="PlainText"
          label="s/mm2"
          justify="Left"
          />
        <label loc="0 0" size="70 20"
          style="Label1"
          label="Max b-value"
          justify="Left"
          />
      </group>
      <entry loc="125 140" size="60 20"
        style="PlainText"
        vq="dsl diff"
        vc="dsl = $VALUE bvalue"
        set="$VALUE = dsl"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="65 140" size="60 20"
        style="PlainText"
        vq="dpe diff"
        vc="dpe = $VALUE bvalue"
        set="$VALUE = dpe"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="5 140" size="60 20"
        style="PlainText"
        vq="dro diff"
        vc="dro = $VALUE bvalue"
        set="$VALUE = dro"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <menu loc="85 40" size="120 20"
        style="PlainText"
        label="menu"
        vq="diff diffscheme"
        vc="diffscheme='$VALUE' {'$VALUE'}"
        set="$VALUE = diffscheme"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        editable="No"
        >
        <mlabel 
          label="Off"
          chval="zero_gf"
          />
        <mlabel 
          label="Readout"
          chval="diffRO"
          />
        <mlabel 
          label="Phase"
          chval="diffPE"
          />
        <mlabel 
          label="Slice"
          chval="diffSL"
          />
        <mlabel 
          label="All"
          chval="diff111"
          />
        <mlabel 
          label="Dual"
          chval="dual_1"
          />
        <mlabel 
          label="Dual(2)"
          chval="dual"
          />
      </menu>
      <label loc="145 100" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="145 80" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="145 60" size="40 20"
        style="PlainText"
        label="G/cm"
        justify="Left"
        />
      <entry loc="85 100" size="60 20"
        style="PlainText"
        vq="tDELTA diff"
        vc="tDELTA = $VALUE/1000 bvalue"
        set="$VALUE = tDELTA*1000"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="85 80" size="60 20"
        style="PlainText"
        vq="tdelta diff"
        vc="tdelta = $VALUE/1000 bvalue"
        set="$VALUE = tdelta*1000"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="85 60" size="60 20"
        style="PlainText"
        vq="gdiff diff"
        vc="gdiff = $VALUE bvalue"
        set="$VALUE = gdiff"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <label loc="5 120" size="110 20"
        style="Label1"
        label="Scaling (ro, pe, sl)"
        justify="Left"
        />
      <label loc="5 100" size="80 20"
        style="Label1"
        label="Separation"
        justify="Left"
        />
      <label loc="5 80" size="80 20"
        style="Label1"
        label="Duration"
        justify="Left"
        />
      <label loc="5 60" size="80 20"
        style="Label1"
        label="Amplitude"
        justify="Left"
        />
      <label loc="5 40" size="80 20"
        style="Label1"
        label="Scheme"
        justify="Left"
        />
      <check loc="5 20" size="95 20"
        style="PlainText"
        label="Diffusion"
        vq="diff"
        vc="diff='y' dro=dro dpe=dpe dsl=dsl go('check')"
        vc2="diff='n' unarray('dro','dpe','dsl') go('check')"
        set="$VALUE=(diff='y')"
        />
    </group>
    <group loc="220 0" size="210 130"
      style="Heading1"
      label="Fat Saturation"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FatSaturation"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="5 45" size="70 20"
        style="PlainText"
        label="Flip Angle"
        justify="Left"
        />
      <check loc="75 105" size="90 20"
        style="PlainText"
        label="Auto offset"
        vq="fsat fsatfrq autooffset"
        vc="autooffset='y' fsatfrq=Prescan_FatOffset"
        vc2="autooffset='n'"
        set="$VALUE=(autooffset='y')"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        />
      <label loc="135 85" size="30 20"
        style="PlainText"
        label="Hz"
        justify="Left"
        />
      <label loc="5 85" size="60 20"
        style="PlainText"
        label="Offset"
        justify="Left"
        />
      <entry loc="75 85" size="60 20"
        style="PlainText"
        vq="fsat fsatfrq"
        vc="fsatfrq=$VALUE autooffset=n"
        set="$VALUE=fsatfrq"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="75 65" size="60 20"
        style="PlainText"
        vq="pfsat fsat"
        vc="pfsat=$VALUE*1000.0 go('check')"
        set="$VALUE=pfsat/1000.0"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <label loc="135 65" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="5 65" size="60 20"
        style="PlainText"
        label="Duration"
        justify="Left"
        />
      <label loc="135 45" size="30 20"
        style="PlainText"
        label="deg"
        justify="Left"
        />
      <entry loc="75 45" size="60 20"
        style="PlainText"
        vq="flipfsat fsat"
        vc="flipfsat=$VALUE"
        set="$VALUE=flipfsat"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <check loc="5 20" size="65 20"
        style="PlainText"
        label="Fatsat"
        vq="fsat Prescan_FatOffset"
        vc="fsat='y'  fsatfrq=fsatfrq pfsat=pfsat if (autooffset='y') then fsatfrq=Prescan_FatOffset endif go('check')"
        vc2="fsat='n' unarray('fsatfrq','pfsat')   go('check')"
        set="$VALUE=(fsat='y')"
        />
    </group>
    <group loc="5 0" size="210 90"
      style="Heading1"
      label="Inversion Recovery"
      bg="transparent"
      border="etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="IR"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <entry loc="75 45" size="60 20"
        style="PlainText"
        vq="ti ir"
        vc="ti=$VALUE/1000.0 go('check')"
        set="$VALUE=ti*1000.0"
        show="if (ir = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <label loc="135 45" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="5 45" size="60 20"
        style="PlainText"
        label="TI"
        justify="Left"
        />
      <check loc="5 20" size="40 20"
        style="PlainText"
        label="IR"
        vq="ir"
        vc="ir='y' ti=ti go('check')"
        vc2="ir='n' unarray('ti') go('check')"
        set="$VALUE=(ir='y')"
        />
    </group>
  </group>
</template>
