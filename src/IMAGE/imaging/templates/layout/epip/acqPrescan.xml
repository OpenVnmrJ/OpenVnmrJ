<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acqPrescan" element="pages" type="acquisition" >
  <group size="950 270"
    label="Prescan"
    vc="if (allvolumes = 'y') then aipXrecon('allvolumes') endif"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acqPrescan"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <group loc="220 0" size="210 230"
      style="Heading1"
      label="Sampling"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="EPI Sampling"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 200" size="180 20"
        vq="oversample"
        show="$VALUE=(oversample&gt;1)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="170 20"
          style="Label1"
          label="Data oversampled     x2"
          />
      </group>
      <group loc="5 110" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="125 20"
          style="Label1"
          label="# Readout Samples"
          />
        <textmessage loc="125 0" size="50 20"
          style="PlainText"
          label="64"
          vq="platnp"
          set="$VALUE=platnp+2*rampnp"
          digits="0"
          />
      </group>
      <group loc="5 130" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="125 20"
          style="Label1"
          label="# Plateau Samples"
          />
        <textmessage loc="125 0" size="50 20"
          style="PlainText"
          label="58"
          vq="platnp"
          set="$VALUE=platnp"
          digits="0"
          />
      </group>
      <group loc="5 150" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <group loc="165 0" size="30 20"
          vq="rampsamp"
          show="$VALUE=(rampsamp='y')"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <label loc="10 0" size="20 20"
            style="Label1"
            label="x2"
            justify="Left"
            />
        </group>
        <textmessage loc="125 0" size="50 20"
          style="PlainText"
          label="3"
          vq="rampnp"
          set="$VALUE = rampnp"
          digits="0"
          />
        <label loc="0 0" size="120 20"
          style="Label1"
          label="# Ramp Samples"
          />
      </group>
      <group loc="5 180" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="125 0" size="50 20"
          style="PlainText"
          vq="ropad rampsamp"
          vc="ropad = $VALUE/1e6  im2Depi('prep','check')"
          set="$VALUE = ropad*1e6"
          show="if (rampsamp='n') then $VALUE = 1 else $VALUE = -1 endif"
          />
        <label loc="175 0" size="20 20"
          style="Label1"
          label="us"
          justify="Left"
          />
        <label loc="0 0" size="110 20"
          style="Label1"
          label="Pad Readout"
          justify="Left"
          />
      </group>
      <group loc="5 80" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="175 0" size="20 20"
          style="Label1"
          label="us"
          justify="Left"
          />
        <textmessage loc="125 0" size="50 20"
          style="PlainText"
          label="20.0"
          vq="tpe"
          set="$VALUE = tpe*1e6/2"
          digits="1"
          />
        <label loc="0 0" size="120 20"
          style="Label1"
          label="PE blip end"
          justify="Left"
          />
      </group>
      <group loc="5 60" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="175 0" size="20 20"
          style="Label1"
          label="us"
          justify="Left"
          />
        <textmessage loc="125 0" size="50 20"
          style="PlainText"
          label="10.6"
          vq="delacq"
          set="$VALUE = delacq*1e6"
          digits="1"
          />
        <label loc="0 0" size="120 20"
          style="Label1"
          label="Pre Sample Delay"
          justify="Left"
          />
      </group>
      <group loc="5 40" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="ms"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <textmessage loc="125 0" size="50 20"
          style="PlainText"
          label="0.288"
          vq="esp"
          set="$VALUE=esp*1000"
          />
        <label loc="175 0" size="30 20"
          style="Label1"
          label="ms"
          justify="Left"
          />
        <label loc="0 0" size="90 20"
          style="Label1"
          label="Echo Spacing"
          justify="Left"
          />
      </group>
      <group loc="5 20" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="kHz"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <label loc="175 0" size="30 20"
          style="Label1"
          label="kHz"
          justify="Left"
          />
        <scroll loc="85 0" size="35 20"
          style="PlainText"
          label="value1"
          vq="dw"
          vc="dw=$VALUE im2Depi('setdwell') im2Depi('prep','check')"
          set="$VALUE=dw"
          show="xm1('vp'):$vp if ($vp='plan') then $VALUE=1 else $VALUE=-1 endif"
          values="dw+0.4e-6 dw-0.4e-6"
          />
        <entry loc="125 0" size="50 20"
          style="PlainText"
          vq="episw dw pro"
          vc="episw=$VALUE*1000.0 sw=episw episw=sw dw=1/sw im2Depi('setdwell') im2Depi('prep','check')"
          set="$VALUE=episw/1000.0"
          digits="1"
          disable="Grayed out"
          />
        <label loc="0 0" size="70 20"
          style="Label1"
          label="Spec Width"
          justify="Left"
          />
      </group>
    </group>
    <group loc="435 120" size="210 110"
      style="Heading1"
      label="Output"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Display"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <toggle loc="10 25" size="60 20"
        style="PlainText"
        label="Image"
        vq="showPreOptions"
        vc="showPreOptions=1"
        vc2="showPreOptions=0"
        set="$VALUE=(showPreOptions=1)"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="70 25" size="60 20"
        style="PlainText"
        label="k-space"
        vq="showPreOptions"
        vc="showPreOptions=2"
        vc2="showPreOptions=0"
        set="$VALUE=(showPreOptions=2)"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <check loc="10 60" size="160 20"
        style="PlainText"
        label="EPI Reference"
        vq="imRF"
        vc="imRF='y'"
        vc2="imRF='n'"
        set="$VALUE=(imRF='y')"
        />
      <check loc="10 80" size="180 20"
        style="PlainText"
        label="Standard GE Reference"
        vq="imSGE"
        vc="imSGE='y'"
        vc2="imSGE='n'"
        set="$VALUE=(imSGE='y')"
        />
    </group>
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Image Output"
      vq="showPreOptions"
      show="$VALUE=(showPreOptions=1)"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Output"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="10 200" size="130 20"
        vq="cseg nseg"
        show="if (nseg&gt;1 AND cseg='y') then $VALUE=1 else $VALUE=0 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="scaleseg"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <check loc="0 0" size="120 20"
          style="PlainText"
          label="Scale segments"
          vq="scaleseg"
          vc="scaleseg=1"
          vc2="scaleseg=0"
          set="$VALUE=scaleseg"
          />
      </group>
      <group loc="10 100" size="200 80"
        vq="imRE imIM"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="15 0" size="115 20"
          style="Label1"
          label="Phase"
          />
        <entry loc="130 20" size="60 20"
          style="PlainText"
          vq="rp imRE imIM"
          vc="rp=$VALUE"
          set="$VALUE=rp"
          show="$VALUE=(imRE='y' OR imIM='y')"
          digits="1"
          />
        <entry loc="130 40" size="60 20"
          style="PlainText"
          vq="lp imRE imIM"
          vc="lp=$VALUE"
          set="$VALUE=lp"
          show="$VALUE=(imRE='y' OR imIM='y')"
          digits="1"
          />
        <entry loc="130 60" size="60 20"
          style="PlainText"
          vq="lp1 imRE imIM"
          vc="lp1=$VALUE"
          set="$VALUE=lp1"
          show="$VALUE=(imRE='y' OR imIM='y')"
          digits="1"
          />
        <label loc="15 60" size="115 20"
          style="Label1"
          label="First order (phase)"
          />
        <label loc="15 40" size="115 20"
          style="Label1"
          label="First order (read)"
          />
        <label loc="15 20" size="115 20"
          style="Label1"
          label="Zero order"
          />
      </group>
      <check loc="10 80" size="90 20"
        style="PlainText"
        label="Imaginary"
        vq="imIM"
        vc="imIM='y'"
        vc2="imIM='n'"
        set="$VALUE=(imIM='y')"
        />
      <check loc="10 60" size="60 20"
        style="PlainText"
        label="Real"
        vq="imRE"
        vc="imRE='y'"
        vc2="imRE='n'"
        set="$VALUE=(imRE='y')"
        />
      <group loc="100 20" size="110 20"
        vq="rcvrs"
        show="aipXrecon('nrcvrs'):$nr $VALUE=($nr&gt;1)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="0 0" size="90 20"
          style="PlainText"
          label="Individual"
          vq="imIR"
          vc="imIR='y' imMG='y'"
          vc2="imIR='n'"
          set="$VALUE=(imIR='y')"
          />
      </group>
      <check loc="10 40" size="100 20"
        style="PlainText"
        label="Phase"
        vq="imPH"
        vc="imPH='y' "
        vc2="imPH='n'"
        set="$VALUE=(imPH='y')"
        />
      <check loc="10 20" size="100 20"
        style="PlainText"
        label="Magnitude"
        vq="imMG"
        vc="imMG='y'"
        vc2="imMG='n' imIR='n'"
        set="$VALUE=(imMG='y')"
        />
    </group>
    <group loc="650 0" size="210 120"
      style="Heading1"
      label="k-space Output"
      vq="showPreOptions"
      show="$VALUE=(showPreOptions=2)"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="recon_raw"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="10 80" size="100 20"
        style="PlainText"
        label="Imaginary"
        vq="rawIM"
        vc="rawIM='y'"
        vc2="rawIM='n'"
        set="$VALUE=(rawIM='y')"
        />
      <check loc="10 60" size="100 20"
        style="PlainText"
        label="Real"
        vq="rawRE"
        vc="rawRE='y'"
        vc2="rawRE='n'"
        set="$VALUE=(rawRE='y')"
        />
      <group loc="100 20" size="110 20"
        vq="rcvrs"
        show="aipXrecon('nrcvrs'):$nr $VALUE=($nr&gt;1)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="0 0" size="90 20"
          style="PlainText"
          label="Individual"
          vq="rawIR"
          vc="rawIR='y' rawMG='y'"
          vc2="rawIR='n'"
          set="$VALUE=(rawIR='y')"
          />
      </group>
      <check loc="10 40" size="100 20"
        style="PlainText"
        label="Phase"
        vq="rawPH"
        vc="rawPH='y'"
        vc2="rawPH='n'"
        set="$VALUE=(rawPH='y')"
        />
      <check loc="10 20" size="100 20"
        style="PlainText"
        label="Magnitude"
        vq="rawMG"
        vc="rawMG='y'"
        vc2="rawMG='n'"
        set="$VALUE=(rawMG='y')"
        />
    </group>
    <group loc="435 0" size="210 120"
      style="Heading1"
      label="Ramp Sampling"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="recon_raw"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 40" size="205 60"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="70 20"
          style="Label1"
          label="Plateau"
          justify="Left"
          />
        <label loc="175 0" size="30 20"
          style="Label1"
          label="pts"
          justify="Left"
          />
        <entry loc="125 0" size="50 20"
          style="PlainText"
          vq="minplatnp rampsamp"
          vc="platnpmin='n' minplatnp = $VALUE if (minplatnp&lt;2) then minplatnp=2 endif if (minplatnp&gt;nread/2) then minplatnp=nread/2 endif im2Depi('prep','check')"
          set="$VALUE = minplatnp"
          show="if (rampsamp='y') then $VALUE = 1 else $VALUE = -1 endif"
          />
        <check loc="80 0" size="45 20"
          style="PlainText"
          label="Min"
          vq="platnpmin rampsamp"
          vc="platnpmin='y' im2Depi('prep','check')"
          vc2="platnpmin='n'"
          set="$VALUE=platnpmin='y'"
          show="if (rampsamp='y') then $VALUE = 1 else $VALUE = -1 endif"
          />
        <group loc="0 40" size="205 20"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <scroll loc="85 0" size="35 20"
            style="PlainText"
            label="value1"
            vq="rsm0adj rampsamp"
            vc="rsm0adj=$VALUE  if (rsm0adj&lt;0.0001 AND rsm0adj&gt;-0.0001) then rsm0adj=0 endif im2Depi('prep','check')"
            set="$VALUE=rsm0adj"
            show="xm1('vp'):$vp if (rampsamp='y' and $vp='plan') then $VALUE = 1 else $VALUE = -1 endif"
            values="rsm0adj-0.025 rsm0adj+0.025"
            />
          <entry loc="125 0" size="50 20"
            style="PlainText"
            vq="rsm0adj rampsamp"
            vc="rsm0adj = $VALUE im2Depi('prep','check')"
            set="$VALUE = rsm0adj"
            show="if (rampsamp='y') then $VALUE = 1 else $VALUE = -1 endif"
            digits="3"
            />
          <label loc="0 0" size="100 20"
            style="Label1"
            label="Moment +/-"
            justify="Left"
            />
        </group>
        <group loc="0 20" size="205 20"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <label loc="175 0" size="20 20"
            style="Label1"
            label="us"
            justify="Left"
            />
          <label loc="0 0" size="110 20"
            style="Label1"
            label="Adjust Pre Delay"
            justify="Left"
            />
          <entry loc="125 0" size="50 20"
            style="PlainText"
            vq="rstadj rampsamp"
            vc="rstadj = $VALUE/1e6  im2Depi('prep','check')"
            set="$VALUE = rstadj*1e6"
            show="if (rampsamp='y') then $VALUE = 1 else $VALUE = -1 endif"
            digits="1"
            />
        </group>
      </group>
      <check loc="5 20" size="120 20"
        style="PlainText"
        label="Ramp Sampling"
        vq="rampsamp"
        vc="rampsamp='y' if (linearsamp='y') then grid='y' endif im2Depi('prep','check')"
        vc2="rampsamp='n' grid='n' im2Depi('prep','check')"
        set="$VALUE=(rampsamp='y')"
        />
    </group>
    <group loc="5 0" size="210 120"
      style="Heading1"
      label="Gradient Delay"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="EPItweakers"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <button loc="10 50" size="85 20"
        style="Label4"
        label="Manual Set"
        vc="im2Depi('prep','ref') au"
        bg="darkGreen"
        decor1="no"
        />
      <button loc="10 25" size="85 20"
        style="Label4"
        label="Auto Set"
        vc="im2Depi('prep','refauto') au"
        bg="darkGreen"
        decor1="no"
        />
      <label loc="10 75" size="80 20"
        style="Label1"
        label="Delay (tep)"
        justify="Left"
        />
      <button loc="110 50" size="60 20"
        style="Label1"
        label="Adjust"
        vc="im2Depi('proc','tepadj')"
        bg="transparent"
        decor1="no"
        />
      <entry loc="110 75" size="60 20"
        style="PlainText"
        vq="tep"
        vc="tep = $VALUE"
        set="$VALUE=tep"
        digits="2"
        disable="Grayed out"
        />
      <label loc="175 75" size="25 20"
        style="Label1"
        label="us"
        justify="Left"
        />
    </group>
    <group loc="5 120" size="210 110"
      style="Heading1"
      label="Test Scans"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="EPItweakers"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <button loc="10 25" size="85 20"
        style="Label4"
        label="Test"
        vc="im2Depi('prep','test') au"
        bg="darkGreen"
        decor1="no"
        />
      <check loc="10 80" size="120 20"
        style="PlainText"
        label="Stretch Readout"
        vq="readstretch"
        vc="readstretch=1e-12 im2Depi('prep','check')"
        vc2="readstretch=0 im2Depi('prep','check')"
        set="$VALUE=(readstretch&lt;&gt;0)"
        />
      <check loc="10 60" size="180 20"
        style="PlainText"
        label="Standard GE Reference"
        vq="sgeref"
        vc="sgeref='y' imSGE='y' image=-3 im2Depi('prep','check') image=1"
        vc2="sgeref='n' imSGE='n' im2Depi('prep','check')"
        set="$VALUE=(sgeref='y')"
        />
      <button loc="110 25" size="60 20"
        style="PlainText"
        label="Process"
        vc="im2Depi('proc')"
        bg="transparent"
        decor1="yes"
        />
      <group loc="125 80" size="85 20"
        vq="readstretch"
        show="$VALUE=(readstretch&lt;&gt;0)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="45 0" size="40 20"
          style="Label1"
          label="pixels"
          justify="Left"
          />
        <entry loc="5 0" size="40 20"
          style="PlainText"
          vq="readstretch"
          vc="readstretch = $VALUE"
          set="$VALUE=readstretch"
          digits="1"
          disable="Grayed out"
          />
      </group>
    </group>
    <group loc="860 10" size="90 40"
      vq="showPreOptions"
      show="$VALUE=(showPreOptions&lt;&gt;0)"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="show"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      >
      <toggle loc="10 0" size="80 20"
        style="PlainText"
        label="show RF"
        vq="show_rf"
        vc="show_rf = 1"
        vc2="show_rf = 0"
        set="$VALUE=show_rf"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="10 20" size="80 20"
        style="PlainText"
        label="show Grad"
        vq="show_grad"
        vc="show_grad = 1"
        vc2="show_grad = 0"
        set="$VALUE=show_grad"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
    </group>
    <group loc="645 10" size="90 40"
      vq="showPreOptions"
      show="$VALUE=(showPreOptions=0)"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="show"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      >
      <toggle loc="10 0" size="80 20"
        style="PlainText"
        label="show RF"
        vq="show_rf"
        vc="show_rf = 1"
        vc2="show_rf = 0"
        set="$VALUE=show_rf"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="10 20" size="80 20"
        style="PlainText"
        label="show Grad"
        vq="show_grad"
        vc="show_grad = 1"
        vc2="show_grad = 0"
        set="$VALUE=show_grad"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
    </group>
  </group>
</template>
