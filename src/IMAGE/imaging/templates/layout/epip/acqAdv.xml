<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acqAdv" element="pages" type="acquisition" >
  <group size="955 270"
    label="Advanced"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acqAdv"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Standard GE Reference"
      vq="showAdvOptions sgeref"
      show="if (showAdvOptions=1) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="StandardGradientEcho"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="5 20" size="175 20"
        style="PlainText"
        label="Standard GE Reference"
        vq="sgeref"
        vc="sgeref='y' imSGE='y' image=-3 im2Depi('prep','check') image=1"
        vc2="sgeref='n' imSGE='n' im2Depi('prep','check')"
        set="$VALUE=(sgeref='y')"
        />
      <check loc="5 140" size="180 20"
        style="PlainText"
        label="Centric-out Phase Encode"
        vq="sgecentric sgeref"
        vc="sgecentric='y' image=-3 im2Depi('prep','check') image=1"
        vc2="sgecentric='n' image=-3 im2Depi('prep','check') image=1"
        set="$VALUE=(sgecentric='y')"
        show="if (sgeref='y') then $VALUE=1 else $VALUE=-1 endif"
        />
      <label loc="175 100" size="30 20"
        style="Label1"
        label="deg"
        justify="Left"
        />
      <label loc="175 40" size="25 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="115 40" size="60 20"
        style="PlainText"
        vq="sgetr minsgetr sgeref"
        vc="sgetr=$VALUE/1000 if (sgepreps='y') then image=-4 else image=-3 endif im2Depi('prep','check') image=1"
        set="$VALUE=sgetr*1000.0"
        show="if (sgeref='y') then $VALUE = (minsgetr='n') else $VALUE=-1 endif"
        digits="2"
        disable="Grayed out"
        />
      <check loc="65 40" size="50 20"
        style="PlainText"
        label="Min"
        vq="minsgetr sgetr sgeref"
        vc="minsgetr='y' if (sgepreps='y') then image=-4 else image=-3 endif im2Depi('prep','check') image=1"
        vc2="minsgetr='n' if (sgepreps='y') then image=-4 else image=-3 endif im2Depi('prep','check') image=1"
        set="$VALUE=(minsgetr='y')"
        show="if (sgeref='y') then $VALUE=1 else $VALUE=-1 endif"
        />
      <label loc="5 40" size="35 20"
        style="PlainText"
        label="TR"
        justify="Left"
        />
      <label loc="175 60" size="25 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="115 60" size="60 20"
        style="PlainText"
        vq="sgete minsgete sgeref"
        vc="sgete=$VALUE/1000 if (sgepreps='y') then image=-4 else image=-3 endif im2Depi('prep','check') image=1"
        set="$VALUE=sgete*1000.0"
        show="if (sgeref='y') then $VALUE = (minsgete='n') else $VALUE=-1 endif"
        digits="2"
        disable="Grayed out"
        />
      <check loc="65 60" size="50 20"
        style="PlainText"
        label="Min"
        vq="minsgete sgete sgeref"
        vc="minsgete='y' if (sgepreps='y') then image=-4 else image=-3 endif im2Depi('prep','check') image=1"
        vc2="minsgete='n' if (sgepreps='y') then image=-4 else image=-3 endif im2Depi('prep','check') image=1"
        set="$VALUE=(minsgete='y')"
        show="if (sgeref='y') then $VALUE=1 else $VALUE=-1 endif"
        />
      <label loc="5 60" size="35 20"
        style="PlainText"
        label="TE"
        justify="Left"
        />
      <label loc="175 80" size="30 20"
        style="Label1"
        label="kHz"
        justify="Left"
        />
      <entry loc="115 80" size="60 20"
        style="PlainText"
        vq="sgesw sgeref"
        vc="sgesw=$VALUE*1000.0 image=-3 im2Depi('prep','check') image=1"
        set="$VALUE=sgesw/1000.0"
        show="if (sgeref='y') then $VALUE=1 else $VALUE=-1 endif"
        digits="1"
        disable="Grayed out"
        />
      <label loc="5 80" size="100 20"
        style="Label1"
        label="Spectral Width"
        justify="Left"
        />
      <entry loc="115 100" size="60 20"
        style="PlainText"
        vq="flipsge sgeref"
        vc="flipsge=$VALUE"
        set="$VALUE=flipsge"
        show="if (sgeref='y') then $VALUE=1 else $VALUE=-1 endif"
        digits="1"
        disable="Grayed out"
        />
      <label loc="5 100" size="70 20"
        style="Label1"
        label="Flipangle"
        justify="Left"
        />
      <entry loc="115 120" size="60 20"
        style="PlainText"
        vq="ssc sgeref"
        vc="ssc=$VALUE"
        set="$VALUE=ssc"
        show="if (sgeref='y') then $VALUE=1 else $VALUE=-1 endif"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 120" size="90 20"
        style="Label1"
        label="Steady states"
        justify="Left"
        />
    </group>
    <group loc="435 0" size="210 230"
      style="Heading1"
      label="Segments"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="New"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 180" size="205 20"
        show="$VALUE=0"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="0 0" size="200 20"
          style="PlainText"
          label="Reverse Reference Segments"
          vq="rseg nseg cseg epiref_type spinecho"
          vc="rseg='y' im2Depi('prep','check')"
          vc2="rseg='n' im2Depi('prep','check')"
          set="$VALUE=(rseg='y')"
          show="if (nseg&gt;1 AND cseg='y' AND epiref_type &lt;&gt; 'single' AND spinecho='n') then $VALUE=1 else $VALUE=-1 endif"
          />
      </group>
      <label loc="155 160" size="25 20"
        style="Label1"
        label="%"
        justify="Left"
        />
      <group loc="90 160" size="65 20"
        vq="cseg nseg spinecho"
        show="if (nseg&gt;1 AND cseg='y' AND spinecho='n') then $VALUE=1 else $VALUE=-1 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <textmessage loc="10 0" size="55 20"
          style="PlainText"
          label="42.1"
          vq="snrpenalty approxt1 segtr"
          set="$VALUE = snrpenalty"
          digits="1"
          />
      </group>
      <label loc="5 160" size="80 20"
        style="Label1"
        label="SNR penalty"
        justify="Left"
        />
      <label loc="155 140" size="25 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <entry loc="100 140" size="55 20"
        style="PlainText"
        vq="csegt1 cseg nseg spinecho"
        vc="csegt1 = $VALUE/1000 im2Depi('prep','check')"
        set="$VALUE = csegt1*1000"
        show="if (nseg&gt;1 AND cseg='y' AND spinecho='n') then $VALUE=1 else $VALUE=-1 endif"
        digits="1"
        />
      <label loc="5 140" size="80 20"
        style="Label1"
        label="Approx T1"
        justify="Left"
        />
      <button loc="155 120" size="50 20"
        style="PlainText"
        label="Display"
        vq="cseg nseg"
        vc="im2Depi('displayflips')"
        show="if (nseg&gt;1 AND cseg='y') then $VALUE=1 else $VALUE=-1 endif"
        bg="transparent"
        decor1="no"
        />
      <check loc="100 120" size="50 20"
        style="PlainText"
        label="Auto"
        vq="autoscale cseg nseg spinecho"
        vc="autoscale=1 im2Depi('prep','check')"
        vc2="autoscale=0 im2Depi('prep','check')"
        set="$VALUE=autoscale"
        show="if (nseg&gt;1 AND cseg='y' AND spinecho='n') then $VALUE=1 else $VALUE=-1 endif"
        />
      <label loc="5 120" size="75 20"
        style="Label1"
        label="Flip scaling"
        justify="Left"
        />
      <label loc="155 100" size="25 20"
        style="Label1"
        label="ms"
        justify="Left"
        />
      <entry loc="100 100" size="55 20"
        style="PlainText"
        vq="segtr cseg nseg spinecho"
        vc="segtr = $VALUE/1000 im2Depi('prep','check')"
        set="$VALUE = segtr*1000"
        show="if (nseg&gt;1 AND cseg='y' AND spinecho='n') then $VALUE=1 else $VALUE=-1 endif"
        digits="2"
        />
      <label loc="5 100" size="80 20"
        style="Label1"
        label="Segment TR"
        justify="Left"
        />
      <check loc="5 80" size="160 20"
        style="PlainText"
        label="Compressed Segments"
        vq="cseg nseg spinecho"
        vc="cseg='y' im2Depi('prep','check')"
        vc2="cseg='n' im2Depi('prep','check')"
        set="$VALUE=(cseg='y')"
        show="if (nseg&gt;1 AND spinecho&lt;&gt;'y') then $VALUE=1 else $VALUE=-1 endif"
        />
      <label loc="5 20" size="75 20"
        style="Label1"
        label="Segments"
        justify="Left"
        />
      <scroll loc="160 20" size="35 20"
        style="PlainText"
        label="value1"
        vq="nseg"
        vc="nseg=$VALUE kzero=1000 im2Depi('prep','check')"
        set="$VALUE=nseg"
        show="xm1('vp'):$vp if ($vp='plan') then $VALUE=1 else $VALUE=-1 endif"
        values="nseg-1 nseg+1"
        />
      <entry loc="100 20" size="55 20"
        style="PlainText"
        vq="nseg"
        vc="nseg = $VALUE im2Depi('prep','check')"
        set="$VALUE = nseg"
        />
      <check loc="5 40" size="160 20"
        style="PlainText"
        label="T2* time correction"
        vq="segtc nseg"
        vc="segtc='y' im2Depi('prep','check')"
        vc2="segtc='n' im2Depi('prep','check')"
        set="$VALUE=(segtc='y')"
        show="if (nseg&gt;1) then $VALUE=1 else $VALUE=-1 endif"
        />
      <check loc="5 60" size="160 20"
        style="PlainText"
        label="Alternate Readout"
        vq="altread nseg"
        vc="altread='y' im2Depi('prep','check')"
        vc2="altread='n' im2Depi('prep','check')"
        set="$VALUE=(altread='y')"
        show="if (nseg&gt;1 AND nseg mod 2 = 1) then $VALUE=1 else $VALUE=-1 endif"
        />
    </group>
    <group loc="220 0" size="210 230"
      style="Heading1"
      label="Sequence"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="EchoTiming"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="5 100" size="200 20"
        style="PlainText"
        label="Centric-out PE (even # shots)"
        vq="pescheme nseg"
        vc="pescheme='c' im2Depi('prep','check')"
        vc2="pescheme='l' im2Depi('prep','check')"
        set="$VALUE=(pescheme='c')"
        show="if (nseg mod 2 = 0) then $VALUE=1 else $VALUE=-1 endif"
        />
      <group loc="5 120" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <toggle loc="155 0" size="45 20"
          style="PlainText"
          label="More"
          vq="showAdvOptions"
          vc="showAdvOptions=1"
          vc2="showAdvOptions=0"
          set="$VALUE=(showAdvOptions=1)"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <check loc="0 0" size="160 20"
          style="PlainText"
          label="Standard GE Reference"
          vq="sgeref"
          vc="sgeref='y' imSGE='y' image=-3 im2Depi('prep','check') image=1"
          vc2="sgeref='n' imSGE='n' im2Depi('prep','check')"
          set="$VALUE=(sgeref='y')"
          />
      </group>
      <group loc="5 140" size="200 40"
        vq="coil_param"
        show="$VALUE=(coil_param[20]=3)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="tmp"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <entry loc="100 20" size="80 20"
          style="PlainText"
          vq="rcvrs volumercv"
          vc="rcvrs='$VALUE'"
          set="$VALUE=rcvrs"
          />
        <check loc="0 0" size="190 20"
          style="PlainText"
          label="Volume Coil Receive"
          vq="volumercv rcvrs"
          vc="create('local_volumercv','flag'):$e local_volumercv=y volumercv=y rcvrs=y"
          vc2="create('local_volumercv','flag'):$e local_volumercv=n  ldrf"
          set="$VALUE=(local_volumercv=y)"
          />
        <label loc="18 20" size="70 20"
          style="Label1"
          label="Receivers"
          />
      </group>
      <group loc="5 80" size="205 20"
        vq="epiref_type"
        show="exists('epiref_type','parameter'):$VALUE"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="ReferenceScan"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <menu loc="100 0" size="100 20"
          style="PlainText"
          label="menu"
          vq="epiref_type"
          vc="epiref_type = '$VALUE' im2Depi('prep')"
          set="$VALUE = epiref_type"
          bg="VJBackground"
          editable="No"
          >
          <mlabel 
            label="Manual"
            chval="manual"
            />
          <mlabel 
            label="Single"
            chval="single"
            />
          <mlabel 
            label="Triple"
            chval="triple"
            />
          <mlabel 
            label="Full Triple"
            chval="fulltriple"
            />
        </menu>
        <label loc="0 0" size="95 20"
          style="Label1"
          label="Reference Scan"
          />
      </group>
      <radio loc="165 60" size="30 20"
        style="PlainText"
        label="3"
        vq="trigger"
        vc="trigger=3"
        set="$VALUE=(trigger=3)"
        />
      <radio loc="135 60" size="30 20"
        style="PlainText"
        label="2"
        vq="trigger"
        vc="trigger=2"
        set="$VALUE=(trigger=2)"
        />
      <radio loc="105 60" size="30 20"
        style="PlainText"
        label="1"
        vq="trigger"
        vc="trigger=1"
        set="$VALUE=(trigger=1)"
        />
      <label loc="5 60" size="90 20"
        style="PlainText"
        label="Trigger Select"
        justify="Left"
        />
      <group loc="5 40" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="100 0" size="90 20"
          style="PlainText"
          label="Distributed"
          vq="trtype"
          vc="trtype=0 im2Depi('prep','check')"
          vc2="trtype=1 im2Depi('prep','check')"
          set="$VALUE=(trtype=0) "
          />
        <label loc="0 0" size="80 20"
          style="Label1"
          label="TR Spacing"
          justify="Left"
          />
      </group>
      <group loc="5 20" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="160 0" size="25 20"
          style="Label1"
          label="ms"
          justify="Left"
          />
        <entry loc="100 0" size="60 20"
          style="PlainText"
          vq="trimage"
          vc="trimage = $VALUE/1000 im2Depi('prep','check')"
          set="$VALUE = trimage*1000"
          />
        <label loc="0 0" size="85 20"
          style="Label1"
          label="Image Delay"
          justify="Left"
          />
      </group>
    </group>
    <group loc="5 0" size="210 230"
      style="Heading1"
      label="Acquisition"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="EPIAcquisition"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 100" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="ms"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <textmessage loc="110 0" size="60 20"
          style="PlainText"
          label="0.312"
          vq="esp"
          set="$VALUE=esp*1000"
          />
        <label loc="170 0" size="30 20"
          style="Label1"
          label="ms"
          justify="Left"
          />
        <label loc="0 0" size="90 20"
          style="Label1"
          label="Echo Spacing"
          justify="Left"
          />
      </group>
      <group loc="5 120" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="kzero"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <entry loc="110 0" size="60 20"
          style="PlainText"
          vq="nnav"
          vc="nnav = $VALUE if (nnav=0) then navigator='n' else navigator='y' endif im2Depi('prep','check')"
          set="$VALUE = nnav"
          />
        <label loc="0 0" size="75 20"
          style="Label1"
          label="Navigators"
          justify="Left"
          />
      </group>
      <group loc="5 140" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="95 20"
          style="Label1"
          label="Receiver Gain"
          justify="Left"
          />
        <label loc="170 0" size="25 20"
          style="Label1"
          label="dB"
          justify="Left"
          />
        <entry loc="110 0" size="60 20"
          style="PlainText"
          vq="gain"
          vc="gain=$VALUE"
          set="$VALUE=gain"
          digits="0"
          disable="Grayed out"
          />
      </group>
      <group loc="5 160" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <menu loc="110 0" size="80 20"
          style="PlainText"
          label="menu"
          vc="presig = '$VALUE'"
          set="$VALUE = presig"
          bg="VJBackground"
          editable="No"
          >
          <mlabel 
            label="high"
            chval="h"
            />
          <mlabel 
            label="low"
            chval="l"
            />
        </menu>
        <label loc="0 0" size="60 20"
          style="Label1"
          label="Presig"
          justify="Left"
          />
      </group>
      <group loc="5 180" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="170 0" size="25 20"
          style="Label1"
          label="%"
          justify="Left"
          />
        <entry loc="110 0" size="60 20"
          style="PlainText"
          vq="glim"
          vc="glim = $VALUE im2Depi('prep','check')"
          set="$VALUE=glim"
          digits="0"
          disable="Grayed out"
          />
        <label loc="0 0" size="60 20"
          style="Label1"
          label="Glim"
          />
      </group>
      <group loc="5 200" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="170 0" size="25 20"
          style="Label1"
          label="%"
          justify="Left"
          />
        <entry loc="110 0" size="60 20"
          style="PlainText"
          vq="glimpe"
          vc="glimpe = $VALUE im2Depi('prep','check')"
          set="$VALUE=glimpe"
          digits="0"
          disable="Grayed out"
          />
        <label loc="0 0" size="60 20"
          style="Label1"
          label="Glim PE"
          />
      </group>
      <group loc="5 80" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="kHz"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <label loc="170 0" size="30 20"
          style="Label1"
          label="kHz"
          justify="Left"
          />
        <entry loc="110 0" size="60 20"
          style="PlainText"
          vq="episw dw pro"
          vc="episw=$VALUE*1000.0 sw=episw episw=sw dw=1/sw im2Depi('setdwell') im2Depi('prep','check')"
          set="$VALUE=episw/1000.0"
          digits="1"
          disable="Grayed out"
          />
        <scroll loc="70 0" size="35 20"
          style="PlainText"
          label="value1"
          vq="dw"
          vc="dw=$VALUE im2Depi('setdwell') im2Depi('prep','check')"
          set="$VALUE=dw"
          show="xm1('vp'):$vp if ($vp='plan') then $VALUE=1 else $VALUE=-1 endif"
          values="dw+0.4e-6 dw-0.4e-6"
          />
        <label loc="0 0" size="70 20"
          style="Label1"
          label="Spec Width"
          justify="Left"
          />
      </group>
      <textmessage loc="115 60" size="60 20"
        style="PlainText"
        label="-83.9"
        vq="resto"
        set="$VALUE=resto"
        digits="1"
        />
      <label loc="5 60" size="110 20"
        style="Label1"
        label="Obs Offset"
        justify="Left"
        />
      <label loc="5 40" size="110 20"
        style="Label1"
        label="Obs Frequency"
        justify="Left"
        />
      <label loc="175 40" size="30 20"
        style="Label1"
        label="MHz"
        justify="Left"
        />
      <menu loc="115 20" size="80 20"
        style="PlainText"
        vq="tn"
        vc="tn='$VALUE'"
        set="$VALUE=tn"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Proton"
          chval="H1"
          />
        <mlabel 
          label="F19"
          chval="F19"
          />
        <mlabel 
          label="P31"
          chval="P31"
          />
        <mlabel 
          label="C13"
          chval="C13"
          />
        <mlabel 
          label="Na23"
          chval="Na23"
          />
        <mlabel 
          label="Xe129"
          chval="Xe129"
          />
      </menu>
      <textmessage loc="115 40" size="60 20"
        style="PlainText"
        label="299.492"
        vq="sfrq"
        set="$VALUE=sfrq"
        digits="3"
        />
      <label loc="175 60" size="30 20"
        style="Label1"
        label="Hz"
        justify="Left"
        />
      <label loc="5 20" size="110 20"
        style="Label1"
        label="Nucleus"
        justify="Left"
        />
    </group>
    <group loc="645 10" size="90 40"
      vq="showAdvOptions"
      show="$VALUE=(showAdvOptions=0)"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="show"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      >
      <toggle loc="10 20" size="80 20"
        style="PlainText"
        label="show Grad"
        vq="show_grad"
        vc="show_grad = 1"
        vc2="show_grad = 0"
        set="$VALUE=show_grad"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="10 0" size="80 20"
        style="PlainText"
        label="show RF"
        vq="show_rf"
        vc="show_rf = 1"
        vc2="show_rf = 0"
        set="$VALUE=show_rf"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
    </group>
    <group loc="860 10" size="90 40"
      vq="showAdvOptions"
      show="$VALUE=(showAdvOptions&lt;&gt;0)"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="show"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      >
      <toggle loc="10 20" size="80 20"
        style="PlainText"
        label="show Grad"
        vq="show_grad"
        vc="show_grad = 1"
        vc2="show_grad = 0"
        set="$VALUE=show_grad"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <toggle loc="10 0" size="80 20"
        style="PlainText"
        label="show RF"
        vq="show_rf"
        vc="show_rf = 1"
        vc2="show_rf = 0"
        set="$VALUE=show_rf"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
    </group>
  </group>
</template>
