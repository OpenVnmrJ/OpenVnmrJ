<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="acqScan" element="pages" type="acquisition" >
  <group size="900 280"
    label="Scan"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="acqScan"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <button loc="710 235" size="150 20"
      style="Children"
      label="Start Scan (Manual Save)"
      vc="prep au"
      bg="transparent"
      decor1="yes"
      />
    <button loc="570 235" size="130 20"
      style="Children"
      label="EPSI Train Profile"
      vc="epsi='y' profile='yyn' slprofile='n' seqcon='nsssc' sw=250000 np=128 etl_steps=256  nv3=etl_steps im3Dcsi('prep','profile') nt=1 wexp='ft(`nf`) av dssh prep' au axis='c' "
      bg="transparent"
      decor1="yes"
      />
    <group loc="435 0" size="210 230"
      style="Heading1"
      label="FOV &amp; Slice Plan"
      vq="lro"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="2D_FOV"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 40" size="200 85"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="3DFOV"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <label loc="0 20" size="60 20"
          style="Label1"
          label="Phase1(X)"
          justify="Left"
          />
        <label loc="0 40" size="60 20"
          style="Label1"
          label="Phase2(Z)"
          justify="Left"
          />
        <label loc="0 60" size="60 20"
          style="Label1"
          label="Read(Y)"
          justify="Left"
          />
        <entry loc="120 60" size="45 20"
          style="PlainText"
          vq="pro"
          vc="gplan('setValue','pro',$VALUE/10.0)"
          set="$VALUE=pro*10.0"
          digits="1"
          disable="Label"
          />
        <entry loc="120 40" size="45 20"
          style="PlainText"
          vq="ppe2"
          vc="gplan('setValue','ppe2',$VALUE/10.0)"
          set="$VALUE=ppe2*10.0"
          digits="1"
          disable="Label"
          />
        <entry loc="120 20" size="45 20"
          style="PlainText"
          vq="ppe"
          vc="gplan('setValue','ppe',$VALUE/10.0)"
          set="$VALUE=ppe*10.0"
          digits="1"
          disable="Grayed out"
          />
        <label loc="60 0" size="30 20"
          style="Label1"
          label="FOV"
          justify="Left"
          />
        <entry loc="60 60" size="50 20"
          style="PlainText"
          vq="lro"
          vc="gplan('setValue','lro',$VALUE/10.0) go('check')"
          set="$VALUE=lro*10.0"
          digits="1"
          disable="Grayed out"
          />
        <label loc="170 40" size="30 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="170 20" size="30 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="155 0" size="40 20"
          style="Label1"
          label="Offset"
          justify="Left"
          />
        <entry loc="60 20" size="50 20"
          style="PlainText"
          vq="lpe"
          vc="gplan('setValue','lpe',$VALUE/10.0) go('check')"
          set="$VALUE=lpe*10.0"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="60 40" size="50 20"
          style="PlainText"
          vq="lpe2"
          vc="gplan('setValue','lpe2',$VALUE/10.0) go('check')"
          set="$VALUE=lpe2*10.0"
          digits="1"
          disable="Grayed out"
          />
      </group>
      <group loc="5 165" size="170 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="60 0" size="50 20"
          style="PlainText"
          vq="pss0"
          vc="pss0=$VALUE/10.0 gplan('setValue','pss0',$VALUE/10)"
          set="$VALUE=pss0*10"
          digits="1"
          disable="Grayed out"
          />
        <label loc="110 0" size="30 20"
          style="PlainText"
          label="mm"
          justify="Left"
          />
        <label loc="0 0" size="50 20"
          style="PlainText"
          label="Position"
          justify="Left"
          />
      </group>
      <group loc="5 145" size="170 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="60 0" size="50 20"
          style="PlainText"
          vq="gap"
          vc="gplan('setValue','gap',$VALUE/10)"
          set="$VALUE=gap*10"
          digits="1"
          disable="Grayed out"
          />
        <label loc="110 0" size="30 20"
          style="PlainText"
          label="mm"
          justify="Left"
          />
        <label loc="0 0" size="70 20"
          style="PlainText"
          label="Gap"
          justify="Left"
          />
      </group>
      <group loc="5 125" size="170 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="60 20"
          style="PlainText"
          label="Thk (Z)"
          justify="Left"
          />
        <entry loc="60 0" size="50 20"
          style="PlainText"
          vq="thk"
          vc="gplan('setValue','thk',$VALUE) prep go('check')"
          set="$VALUE=thk"
          digits="1"
          disable="Grayed out"
          />
        <label loc="110 0" size="30 20"
          style="PlainText"
          label="mm"
          justify="Left"
          />
      </group>
      <group loc="10 195" size="190 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <button loc="0 0" size="60 20"
          style="PlainText"
          label="Show"
          vq="iplanType planValue"
          vc="gplan('setDefaultType', 5) iplanDefaultType=5 iplanType = 5 gplan('setUseppe',1) ppe=ppe planValue='standard getCurrentStacks' setgplan('standard getCurrentStacks')"
          bg="transparent"
          decor1="yes"
          />
        <toggle loc="130 0" size="60 20"
          style="PlainText"
          label="More.."
          vq="showOptions"
          vc="showOptions=5"
          vc2="showOptions=0"
          set="$VALUE=(showOptions=5)"
          enable="yes"
          radiobutton="no"
          subtype="no"
          />
        <button loc="65 0" size="60 20"
          style="PlainText"
          label="Clear"
          vc="gplan('clearStacks')"
          bg="transparent"
          decor1="yes"
          />
      </group>
      <group loc="5 20" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <menu loc="60 0" size="105 20"
          style="PlainText"
          vq="orient"
          vc="iplanType=5 gplan('setValue','orient','$VALUE') calcdim planValue = 'standard getCurrentStacks'"
          set="$VALUE=orient"
          bg="VJBackground"
          editable="No"
          >
          <mlabel 
            label="Axial"
            chval="trans"
            />
          <mlabel 
            label="Coronal"
            chval="cor"
            />
          <mlabel 
            label="Sagittal"
            chval="sag"
            />
          <mlabel 
            label="3 Planes"
            chval="3orthogonal"
            />
          <mlabel 
            label="Axial 90"
            chval="trans90"
            />
          <mlabel 
            label="Coronal 90"
            chval="cor90"
            />
          <mlabel 
            label="Sagittal 90"
            chval="sag90"
            />
          <mlabel 
            label="Oblique"
            chval="oblique"
            />
        </menu>
        <label loc="0 0" size="50 20"
          style="PlainText"
          label="Orient"
          justify="Left"
          />
      </group>
    </group>
    <group loc="220 0" size="210 230"
      style="Heading1"
      label="Scan Options"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ScanOptions"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <button loc="100 140" size="100 20"
        style="Children"
        label="VIEW"
        vc="epsi='y' profile='yyn' slprofile='y' sw=250000 np=256 etl_steps=1 nv3=etl_steps setloop nt=1 au wexp='wft av f full prep' axis='c'"
        bg="transparent"
        decor1="yes"
        />
      <check loc="5 140" size="160 20"
        style="PlainText"
        label="Slice Profile"
        vq="slprofile"
        vc="slprofile='y' prep go('check')"
        vc2="slprofile='n' prep go('check')"
        set="$VALUE=(slprofile='y')"
        />
      <button loc="5 200" size="140 20"
        style="PlainText"
        label="Save For Shim"
        vc="gs_slice('save')"
        bg="transparent"
        decor1="yes"
        />
      <check loc="5 120" size="160 20"
        style="PlainText"
        label="EPSI mode"
        vq="epsi"
        vc="epsi='y' prep go('check')"
        vc2="epsi='n' prep go('check')"
        set="$VALUE=(epsi='y')"
        />
      <check loc="5 100" size="160 20"
        style="PlainText"
        label="Water Suppression"
        vq="ws"
        vc="ws='y' go('check')"
        vc2="ws='n' go('check')"
        set="$VALUE=(ws='y')"
        />
      <check loc="5 80" size="160 20"
        style="PlainText"
        label="Water Suppression RF"
        vq="ws wsrf wref"
        vc="ws ='y' wsrf='y' go('check')"
        vc2="ws ='y' wsrf='n' go('check') wref='n'"
        set="$VALUE=(ws = 'y' and wsrf='y')"
        />
      <check loc="5 60" size="180 20"
        style="PlainText"
        label="External Trigger"
        vq="ticks"
        vc="ticks = 1"
        vc2="ticks = 0"
        set="$VALUE=(ticks &gt; 0)"
        />
      <toggle loc="155 40" size="45 20"
        style="PlainText"
        label="More"
        vq="showOptions"
        vc="showOptions=4"
        vc2="showOptions=0"
        set="$VALUE=(showOptions=4)"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <check loc="5 40" size="140 20"
        style="PlainText"
        label="Spatial Satbands"
        vq="sat"
        vc="sat='y' go('check')"
        vc2="sat='n' go('check')"
        set="$VALUE=(sat='y')"
        />
      <check loc="5 20" size="160 20"
        style="PlainText"
        label="Spin Echo"
        vq="spinecho"
        vc="spinecho='y' go('check')"
        vc2="spinecho='n' go('check')"
        set="$VALUE=(spinecho='y')"
        />
    </group>
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Setup"
      vq="showOptions"
      show="if (showOptions=0) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="ScanOptions"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 20" size="200 110"
        style="Heading1"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="MRSfreq"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <group loc="5 85" size="195 20"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <entry loc="85 0" size="60 20"
            style="PlainText"
            vq="refval"
            vc="refval=$VALUE"
            set="$VALUE=refval"
            digits="2"
            disable="Grayed out"
            />
          <button loc="0 0" size="85 20"
            style="PlainText"
            label="Set Ref"
            vc="nl offset:r1 r1=r1-tof rl(refval*sfrq) axis='p'"
            bg="transparent"
            decor1="yes"
            />
          <label loc="145 0" size="40 20"
            style="PlainText"
            label="ppm"
            justify="Left"
            />
        </group>
        <group loc="5 65" size="195 20"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <label loc="145 0" size="30 20"
            style="PlainText"
            label="Hz"
            justify="Left"
            />
          <entry loc="85 0" size="60 20"
            style="PlainText"
            vq="ws_delta"
            vc="ws_delta = $VALUE"
            set="$VALUE = ws_delta"
            digits="2"
            />
          <button loc="0 0" size="85 20"
            style="PlainText"
            label="Wat Sup"
            vc="setfrq1d('ws')"
            bg="transparent"
            decor1="no"
            tooltip="WS choice via cursor"
            />
        </group>
        <group loc="5 45" size="195 20"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <label loc="145 0" size="30 20"
            style="PlainText"
            label="Hz"
            justify="Left"
            />
          <entry loc="85 0" size="60 20"
            style="PlainText"
            vq="roff roffadjust"
            vc="roffadjust=$VALUE-roff rfladjust=$VALUE-roff"
            set="$VALUE = roff+roffadjust"
            digits="2"
            />
          <button loc="0 0" size="85 20"
            style="PlainText"
            label="Receiver"
            vc="setfrq1d('rec')"
            bg="transparent"
            decor1="no"
            tooltip="Rcvr choice via cursor"
            />
        </group>
        <group loc="5 25" size="195 20"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          >
          <label loc="145 0" size="30 20"
            style="PlainText"
            label="Hz"
            justify="Left"
            />
          <entry loc="85 0" size="60 20"
            style="PlainText"
            vq="restol"
            vc="restol = $VALUE"
            set="$VALUE = restol"
            digits="2"
            />
          <button loc="0 0" size="85 20"
            style="PlainText"
            label="Local Offset"
            vc="setfrq1d('local')"
            bg="transparent"
            decor1="no"
            tooltip="CenterFreq=H1offset-Local Offset"
            />
        </group>
        <button loc="5 5" size="145 20"
          style="Children"
          label="SET ALL FREQ (Hz)"
          vc="nt=1 epsi='n' slprofile='n' prep profile='yyy' setloop setfrq1d('all')"
          bg="transparent"
          decor1="no"
          tooltip="Prepares for Slice Shimming as well"
          />
      </group>
      <group loc="5 130" size="200 70"
        style="Heading1"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="ScanOptionsRF"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <entry loc="115 25" size="40 20"
          style="PlainText"
          vq="tpwr1f"
          vc="tpwr1f = $VALUE"
          set="$VALUE = tpwr1f"
          digits="0"
          />
        <entry loc="115 45" size="40 20"
          style="PlainText"
          vq="tpwr2f"
          vc="tpwr2f = $VALUE"
          set="$VALUE = tpwr2f"
          digits="0"
          />
        <entry loc="90 45" size="25 20"
          style="PlainText"
          vq="tpwr2"
          vc="tpwr2 = $VALUE"
          set="$VALUE = tpwr2"
          digits="0"
          />
        <entry loc="90 25" size="25 20"
          style="PlainText"
          vq="tpwr1"
          vc="tpwr1 = $VALUE"
          set="$VALUE = tpwr1"
          digits="0"
          />
        <button loc="5 45" size="85 20"
          style="PlainText"
          label="180 deg"
          vc="profile='yyy' pss=pss0 setloop pwr_opt('tpwr2','tpwr2f')"
          bg="transparent"
          decor1="no"
          tooltip="Set 180 (Array)"
          />
        <button loc="5 25" size="85 20"
          style="PlainText"
          label="10 deg"
          vc="profile='yyy' pss=pss0 setloop pwr_opt('tpwr1','tpwr1f')"
          bg="transparent"
          decor1="no"
          tooltip="SET 90 (Array)"
          />
        <label loc="5 5" size="145 20"
          style="Children"
          label="SET RF POWER (dB)"
          justify="Center"
          />
      </group>
      <check loc="10 200" size="120 20"
        style="PlainText"
        label="Auto Rf"
        vq="sglpower"
        vc="sglpower = 0 go('check') "
        vc2="sglpower=1"
        set="$VALUE = (sglpower = 0)"
        tooltip="If selected, powers will be recalculated by VNMR"
        />
    </group>
    <group loc="5 0" size="210 230"
      style="Heading1"
      label="Scan Parameters"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="trstuff"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <label loc="175 160" size="25 20"
        style="PlainText"
        label="Hz"
        justify="Left"
        />
      <entry loc="115 160" size="60 20"
        style="PlainText"
        vq="sws np epsi"
        vc="$np = np sws=$VALUE np=$np"
        set="$VALUE=sws"
        show="$VALUE = (epsi='y')"
        digits="0"
        disable="Grayed out"
        tooltip="spectral width for epsi depends on Acquisition Points+Imaging width"
        />
      <entry loc="115 140" size="60 20"
        style="PlainText"
        vq="sw"
        vc="$np = np sw=$VALUE np=$np go('check')"
        set="$VALUE=sw"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 160" size="110 20"
        style="PlainText"
        label="Spec Width (sws)"
        justify="Left"
        />
      <label loc="135 205" size="65 20"
        style="PlainText"
        label="EPI lobes"
        justify="Left"
        />
      <menu loc="135 185" size="65 20"
        style="PlainText"
        label="menu"
        vq="etl_steps"
        vc="etl_steps=$VALUE go('check')"
        set="$VALUE=etl_steps"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="8"
          chval="8"
          />
        <mlabel 
          label="16"
          chval="16"
          />
        <mlabel 
          label="32"
          chval="32"
          />
        <mlabel 
          label="64"
          chval="64"
          />
        <mlabel 
          label="96"
          chval="96"
          />
        <mlabel 
          label="128"
          chval="128"
          />
        <mlabel 
          label="192"
          chval="192"
          />
        <mlabel 
          label="256"
          chval="256"
          />
        <mlabel 
          label="512"
          chval="512"
          />
        <mlabel 
          label="1024"
          chval="1024"
          />
      </menu>
      <label loc="175 140" size="25 20"
        style="PlainText"
        label="Hz"
        justify="Left"
        />
      <menu loc="5 185" size="65 20"
        style="PlainText"
        label="menu"
        vq="nv"
        vc="nv=$VALUE go('check')"
        set="$VALUE=nv"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="15"
          chval="15"
          />
        <mlabel 
          label="23"
          chval="23"
          />
        <mlabel 
          label="31"
          chval="31"
          />
      </menu>
      <menu loc="70 185" size="65 20"
        style="PlainText"
        label="menu"
        vq="nv2"
        vc="nv2=$VALUE go('check')"
        set="$VALUE=nv2"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="15"
          chval="15"
          />
        <mlabel 
          label="23"
          chval="23"
          />
        <mlabel 
          label="31"
          chval="31"
          />
      </menu>
      <textmessage loc="70 205" size="65 20"
        style="PlainText"
        label="15"
        vq="nv2"
        set="if nv2&lt;&gt;8 and nv2&lt;&gt;16 and nv2&lt;&gt;32 and nv2&lt;&gt;64 and nv2&lt;&gt;128 and nv2&lt;&gt;256 and nv2&lt;&gt;512 and nv2&lt;&gt;1024 then $VALUE=nv2 else $VALUE='' endif"
        />
      <textmessage loc="5 205" size="65 20"
        style="PlainText"
        label="15"
        vq="nv"
        set="if nv&lt;&gt;8 and nv&lt;&gt;16 and nv&lt;&gt;32 and nv&lt;&gt;64 and nv&lt;&gt;128 and nv&lt;&gt;256 and nv&lt;&gt;512 and nv&lt;&gt;1024 then $VALUE=nv else $VALUE='' endif"
        />
      <label loc="5 140" size="110 20"
        style="PlainText"
        label="Imaging Width (sw)"
        justify="Left"
        />
      <entry loc="115 120" size="60 20"
        style="PlainText"
        vq="np"
        vc="np=$VALUE*2 go('check')"
        set="$VALUE=np/2"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 120" size="110 20"
        style="PlainText"
        label="Acquisition Points"
        justify="Left"
        />
      <label loc="175 60" size="25 20"
        style="PlainText"
        label="dB"
        justify="Left"
        />
      <entry loc="115 60" size="60 20"
        style="PlainText"
        vq="gain"
        vc="gain=$VALUE"
        set="$VALUE=gain"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 60" size="110 20"
        style="PlainText"
        label="Receiver Gain"
        justify="Left"
        />
      <entry loc="115 80" size="60 20"
        style="PlainText"
        vq="ssc"
        vc="ssc=$VALUE"
        set="$VALUE=ssc"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 80" size="110 20"
        style="PlainText"
        label="Dummy Scans"
        justify="Left"
        />
      <entry loc="115 100" size="60 20"
        style="PlainText"
        vq="nt"
        vc="nt=$VALUE"
        set="$VALUE=nt"
        digits="0"
        disable="Grayed out"
        />
      <label loc="5 100" size="110 20"
        style="PlainText"
        label="Averages"
        justify="Left"
        />
      <check loc="65 40" size="50 20"
        style="PlainText"
        label="Min"
        vq="minte te"
        vc="minte='y' go('check')"
        vc2="minte='n'  go('check')"
        set="$VALUE=(minte='y')"
        />
      <check loc="65 20" size="50 20"
        style="PlainText"
        label="Min"
        vq="tr mintr"
        vc="mintr='y' go('check')"
        vc2="mintr='n' go('check')"
        set="$VALUE=(mintr='y')"
        />
      <entry loc="115 40" size="60 20"
        style="PlainText"
        vq="te minte"
        vc="te=$VALUE/1000 go('check')"
        set="$VALUE=te*1000.0"
        show="$VALUE = (minte='n')"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="115 20" size="60 20"
        style="PlainText"
        vq="tr mintr"
        vc="tr=$VALUE/1000.0 go('check')"
        set="$VALUE=tr*1000.0"
        show="$VALUE = (mintr='n') "
        digits="2"
        disable="Grayed out"
        />
      <label loc="175 40" size="25 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="175 20" size="25 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="5 40" size="30 20"
        style="PlainText"
        label="TE"
        justify="Left"
        />
      <label loc="5 20" size="30 20"
        style="PlainText"
        label="TR"
        justify="Left"
        />
    </group>
    <group loc="5 235" size="555 45"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <textmessage loc="300 20" size="130 20"
        style="PlainText"
        label="88_55_HD_S"
        vq="gcoil"
        set="$VALUE = gcoil"
        />
      <textmessage loc="300 0" size="130 20"
        style="PlainText"
        label="main"
        vq="rfcoil"
        set="$VALUE = rfcoil"
        />
      <label loc="220 20" size="80 20"
        style="Heading1"
        label="Gradient"
        justify="Left"
        />
      <label loc="220 0" size="80 20"
        style="Heading1"
        label="RF Coil"
        justify="Left"
        />
      <textmessage loc="80 20" size="130 20"
        style="PlainText"
        label="fepsi3d"
        vq="pslabel"
        set="$VALUE = pslabel"
        />
      <entry loc="80 0" size="130 20"
        style="PlainText"
        vq="comment"
        vc="comment='$VALUE' xm1('addcomment')"
        set="$VALUE=comment"
        digits="0"
        disable="Grayed out"
        />
      <label loc="0 20" size="80 20"
        style="Heading1"
        label="Protocol"
        justify="Left"
        />
      <label loc="0 0" size="80 20"
        style="Heading1"
        label="Comment"
        justify="Left"
        />
    </group>
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Sat Bands"
      vq="sat showOptions"
      show="if (showOptions=4) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="plansatbands2D"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="0 90" size="120 20"
        vq="sat"
        show="$VALUE=(sat='n')"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="5 0" size="105 20"
          style="PlainText"
          label="Set Orientation"
          justify="Left"
          />
      </group>
      <group loc="5 90" size="120 20"
        vq="sat"
        show="$VALUE=(sat='y')"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="105 20"
          style="PlainText"
          label="Add Orientation"
          justify="Left"
          />
      </group>
      <menu loc="110 90" size="95 20"
        style="PlainText"
        vq="satorient"
        vc="setsatorient satorient='$VALUE' setsatorient('add')"
        set="$VALUE=satorient"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Axial"
          chval="trans"
          />
        <mlabel 
          label="Coronal"
          chval="cor"
          />
        <mlabel 
          label="Sagittal"
          chval="sag"
          />
        <mlabel 
          label="3 Planes"
          chval="3orthogonal"
          />
        <mlabel 
          label="Axial 90"
          chval="trans90"
          />
        <mlabel 
          label="Coronal 90"
          chval="cor90"
          />
        <mlabel 
          label="Sagittal 90"
          chval="sag90"
          />
      </menu>
      <label loc="5 120" size="90 20"
        style="Label1"
        label="No. Bands"
        justify="Left"
        />
      <toggle loc="110 60" size="75 20"
        style="PlainText"
        label="View"
        vq="iplanType"
        vc="setsatorient gplan('setDefaultType', 4) iplanDefaultType=4 setgplan('standard getCurrentStacks' )"
        vc2="gplan('setDefaultType', 0) iplanDefaultType=0 setgplan('standard getCurrentStacks' )"
        set="$VALUE = (iplanType = 4)"
        enable="yes"
        radiobutton="no"
        subtype="no"
        />
      <textmessage loc="110 120" size="30 20"
        style="PlainText"
        label="0"
        vq="nsat sat satpos"
        set="$VALUE=size('satpos')*(sat='y')"
        />
      <group loc="5 195" size="205 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="150 0" size="40 20"
          style="PlainText"
          vq="stheta planSs"
          vc="gplan('setValue','stheta',$VALUE)"
          set="gplan('getValue', 'stheta'):$VALUE"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="105 0" size="40 20"
          style="PlainText"
          vq="sphi planSs"
          vc="gplan('setValue','sphi',$VALUE)"
          set="gplan('getValue', 'sphi'):$VALUE"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="60 0" size="40 20"
          style="PlainText"
          vq="spsi planSs"
          vc="gplan('setValue','spsi',$VALUE)"
          set="gplan('getValue', 'spsi'):$VALUE"
          digits="1"
          disable="Grayed out"
          />
        <label loc="0 0" size="60 20"
          style="Label1"
          label="Angles"
          justify="Left"
          />
      </group>
      <group loc="5 145" size="200 40"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <label loc="0 0" size="90 20"
          style="Label1"
          label="Position"
          justify="Left"
          />
        <label loc="0 20" size="90 20"
          style="Label1"
          label="Thickness"
          justify="Left"
          />
        <label loc="165 20" size="30 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <label loc="165 0" size="30 20"
          style="Label1"
          label="mm"
          justify="Left"
          />
        <entry loc="105 20" size="60 20"
          style="PlainText"
          vq="satthk planSs"
          vc="gplan('setValue','satthk',$VALUE)"
          set="gplan('getValue', 'satthk'):$VALUE"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="105 0" size="60 20"
          style="PlainText"
          vq="satpos planSs"
          vc="gplan('setValue','satpos',$VALUE/10.0)"
          set="gplan('getValue', 'satpos'):$v $VALUE=$v*10"
          digits="1"
          disable="Grayed out"
          />
      </group>
      <button loc="110 40" size="75 20"
        style="PlainText"
        label="Delete"
        vq="planSs"
        vc="if (size('satpos') = 1) then sat = n endif gplan('deleteSelected')  if (sat = 'n') then gplan('setDefaultType', 0) iplanDefaultType=0 setgplan('standard getcurrentStacks') endif"
        bg="transparent"
        decor1="no"
        />
      <button loc="110 20" size="75 20"
        style="PlainText"
        label="Add"
        vc="setsatorient('add')"
        bg="transparent"
        decor1="no"
        />
      <check loc="5 20" size="90 20"
        style="PlainText"
        label="On/Off"
        vq="sat"
        vc="sat = 'y' setsatorient gplan('setDefaultType', 4) iplanDefaultType=4 setgplan('standard getCurrentStacks' )"
        vc2="sat = 'n'  gplan('setDefaultType', 0) iplanDefaultType=0 setgplan('standard getCurrentStacks' )"
        set="$VALUE = (sat = 'y')"
        />
    </group>
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Magnetization Transfer"
      vq="mt showOptions"
      show="if (showOptions=2) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FatSaturation"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <entry loc="115 45" size="60 20"
        style="PlainText"
        vq="flipmt mt"
        vc="flipmt=$VALUE"
        set="$VALUE=flipmt"
        show="if (mt = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="0"
        disable="Grayed out"
        />
      <entry loc="115 85" size="60 20"
        style="PlainText"
        vq="mt"
        vc="mtfrq=$VALUE"
        set="$VALUE=mtfrq"
        show="if (mt = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="0"
        disable="Grayed out"
        />
      <label loc="175 85" size="30 20"
        style="PlainText"
        label="Hz"
        justify="Left"
        />
      <entry loc="115 65" size="60 20"
        style="PlainText"
        vq="pmt mt"
        vc="pmt=$VALUE*1000.0 go('check')"
        set="$VALUE=pmt/1000.0"
        show="if (mt = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="0"
        disable="Grayed out"
        />
      <label loc="175 65" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="175 45" size="30 20"
        style="PlainText"
        label="deg"
        justify="Left"
        />
      <label loc="5 45" size="70 20"
        style="PlainText"
        label="Flip Angle"
        justify="Left"
        />
      <label loc="5 85" size="60 20"
        style="PlainText"
        label="Offset"
        justify="Left"
        />
      <label loc="5 65" size="60 20"
        style="PlainText"
        label="Duration"
        justify="Left"
        />
      <check loc="5 20" size="65 20"
        style="PlainText"
        label="MT"
        vq="mt"
        vc="mt='y'"
        vc2="mt='n' go('check')"
        set="$VALUE=(mt='y')"
        />
    </group>
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Inversion Recovery"
      vq="ir showOptions"
      show="if (showOptions=1) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="IR"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <entry loc="115 45" size="60 20"
        style="PlainText"
        vq="ti ir"
        vc="ti=$VALUE/1000.0 go('check')"
        set="$VALUE=ti*1000.0"
        show="if (ir = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <label loc="175 45" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="5 45" size="60 20"
        style="PlainText"
        label="TI"
        justify="Left"
        />
      <check loc="5 20" size="40 20"
        style="PlainText"
        label="IR"
        vq="ir"
        vc="ir='y' ti=ti go('check')"
        vc2="ir='n' unarray('ti') go('check')"
        set="$VALUE=(ir='y')"
        />
    </group>
    <group loc="650 0" size="210 220"
      style="Heading1"
      label="Diffusion"
      vq="diff showOptions"
      show="if (showOptions=6) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Diffusion"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <menu loc="85 40" size="120 20"
        style="PlainText"
        label="menu"
        vq="diff diffscheme"
        vc="diffscheme='$VALUE' {'$VALUE'} go('check')"
        set="$VALUE = diffscheme "
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Off"
          chval="zero_gf"
          />
        <mlabel 
          label="Readout"
          chval="diffRO"
          />
        <mlabel 
          label="Phase"
          chval="diffPE"
          />
        <mlabel 
          label="Slice"
          chval="diffSL"
          />
        <mlabel 
          label="All"
          chval="diff111"
          />
        <mlabel 
          label="Trace"
          chval="diffTR"
          />
        <mlabel 
          label="Dual"
          chval="dual_1"
          />
        <mlabel 
          label="Dual(2)"
          chval="dual"
          />
      </menu>
      <group loc="5 170" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <entry loc="70 0" size="55 20"
          style="PlainText"
          vq="gdiff diff tdelta tDELTA max_bval"
          vc="target_bval($VALUE)"
          set="$VALUE = max_bval"
          show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
          digits="2"
          />
        <label loc="130 0" size="45 20"
          style="PlainText"
          label="s/mm2"
          justify="Left"
          />
        <label loc="0 0" size="70 20"
          style="Label1"
          label="Target b-value"
          justify="Left"
          />
      </group>
      <group loc="5 190" size="200 20"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <textmessage loc="70 0" size="55 20"
          style="PlainText"
          vq="max_bval gdiff diff bvalue"
          set="arraymax('bvalue'):$VALUE $VALUE = $VALUE*(diff='y')"
          show="$VALUE = (diff='y')"
          digits="2"
          statpar="max_bval"
          />
        <label loc="130 0" size="45 20"
          style="PlainText"
          label="s/mm2"
          justify="Left"
          />
        <label loc="0 0" size="70 20"
          style="Label1"
          label="Max b-value"
          justify="Left"
          />
      </group>
      <entry loc="125 140" size="60 20"
        style="PlainText"
        vq="dsl diff"
        vc="dsl = $VALUE bvalue"
        set="$VALUE = dsl"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="65 140" size="60 20"
        style="PlainText"
        vq="dpe diff"
        vc="dpe = $VALUE bvalue"
        set="$VALUE = dpe"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="5 140" size="60 20"
        style="PlainText"
        vq="dro diff"
        vc="dro = $VALUE bvalue"
        set="$VALUE = dro"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <label loc="145 100" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="145 80" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <label loc="145 60" size="40 20"
        style="PlainText"
        label="G/cm"
        justify="Left"
        />
      <entry loc="85 100" size="60 20"
        style="PlainText"
        vq="tDELTA diff"
        vc="tDELTA = $VALUE/1000 go('check')"
        set="$VALUE = tDELTA*1000"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="85 80" size="60 20"
        style="PlainText"
        vq="tdelta diff"
        vc="tdelta = $VALUE/1000 go('check')"
        set="$VALUE = tdelta*1000"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <entry loc="85 60" size="60 20"
        style="PlainText"
        vq="gdiff diff"
        vc="gdiff = $VALUE go('check')"
        set="$VALUE = gdiff"
        show="if (diff='y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="2"
        disable="Grayed out"
        />
      <label loc="5 120" size="110 20"
        style="Label1"
        label="Scaling (ro, pe, sl)"
        justify="Left"
        />
      <label loc="5 100" size="80 20"
        style="Label1"
        label="Separation"
        justify="Left"
        />
      <label loc="5 80" size="80 20"
        style="Label1"
        label="Duration"
        justify="Left"
        />
      <label loc="5 60" size="80 20"
        style="Label1"
        label="Amplitude"
        justify="Left"
        />
      <label loc="5 40" size="80 20"
        style="Label1"
        label="Scheme"
        justify="Left"
        />
      <check loc="5 20" size="95 20"
        style="PlainText"
        label="Diffusion"
        vq="diff"
        vc="diff='y' dro=dro dpe=dpe dsl=dsl go('check')"
        vc2="diff='n' unarray('dro','dpe','dsl') go('check')"
        set="$VALUE=(diff='y')"
        />
    </group>
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Slice Plan"
      vq="iplanType showOptions"
      show="if (showOptions=5) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FOV3D"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <group loc="5 70" size="200 65"
        style="Heading1"
        label="3-Point Marking"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="Marking"
        useref="no"
        subtype="Minor"
        expanded="yes"
        >
        <button loc="105 40" size="90 20"
          style="Label1"
          label="Clear"
          vc="gplan('stopMarking') gplan('clearMarking') gplan('clearStacks')"
          bg="transparent"
          decor1="no"
          />
        <button loc="105 20" size="90 20"
          style="Label1"
          label="Show Slices"
          vq="iplanMarking"
          vc="gplan('addAstack',0) gplan('stopMarking') iplanMarking=-1"
          show="if(iplanMarking&gt;0) then $VALUE=1 else $VALUE=0 endif"
          bg="transparent"
          decor1="no"
          />
        <button loc="5 20" size="90 20"
          style="Label1"
          label="Start"
          vq="iplanMarking"
          vc="gplan('startMarking',3)"
          show="if(iplanMarking=0) then $VALUE=1 else $VALUE=0 endif"
          bg="transparent"
          decor1="no"
          tooltip="Select 1-3 points in displayed images to specify slice center slice position"
          />
        <textmessage loc="45 40" size="20 20"
          style="PlainText"
          vq="iplanMarking"
          set="if(iplanMarking&gt;0) then $VALUE=iplanMarking else $VALUE='' endif"
          />
      </group>
      <group loc="5 135" size="205 85"
        style="Heading1"
        label="Display"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        reference="SliceDisplay"
        useref="no"
        subtype="Minor"
        expanded="yes"
        >
        <check loc="115 60" size="80 20"
          style="PlainText"
          label="Rev order"
          vq="sliceOrder"
          vc="gplan('getActStackInfo','alternateOrder'):$ord $ord=$ord+2 gplan('alternateSlices',$ord)"
          vc2="gplan('getActStackInfo','alternateOrder'):$ord $ord=$ord-2 gplan('alternateSlices',$ord)"
          set="gplan('getActStackInfo', 'alternateOrder'):$ord if ($ord&gt;1) then $VALUE=1 else $VALUE=0 endif"
          />
        <check loc="115 40" size="70 20"
          style="PlainText"
          label="3D view"
          vq="iplanType"
          vc="gplan('setDraw3D', 1)"
          vc2="gplan('setDraw3D', 0)"
          set="gplan('getActStackInfo', 'draw3D'):$VALUE"
          />
        <check loc="5 60" size="95 20"
          style="PlainText"
          label="Show order"
          vq="iplanType"
          vc="gplan('setDrawOrders', 1)"
          vc2="gplan('setDrawOrders', 0)"
          set="gplan('getActStackInfo', 'drawOrder'):$VALUE"
          />
        <check loc="5 40" size="100 20"
          style="PlainText"
          label="Display Axes"
          vq="iplanType"
          vc="gplan('setDrawAxes', 1)"
          vc2="gplan('setDrawAxes', 0)"
          set="gplan('getActStackInfo', 'drawAxes'):$VALUE"
          />
        <radio loc="80 20" size="55 20"
          style="PlainText"
          label="Filled"
          vq="iplanType"
          vc="gplan('setDisplayStyle', 0) gplan('setFillPolygon', 1)"
          vc2="gplan('setFillPolygon', 0)"
          set="gplan('getActStackInfo', 'fill'):$VALUE"
          />
        <radio loc="145 20" size="45 20"
          style="PlainText"
          label="Line"
          vq="iplanType"
          vc="gplan('setDisplayStyle', 1)"
          vc2="gplan('setDisplayStyle', 0)"
          set="gplan('getActStackInfo', 'style'):$VALUE"
          />
        <radio loc="5 20" size="65 20"
          style="PlainText"
          label="Normal"
          vq="iplanType"
          vc="gplan('setFillPolygon', 0) gplan('setDisplayStyle', 0)"
          set="gplan('getActStackInfo', 'fill'):$v1 gplan('getActStackInfo', 'style'):$v2 $VALUE = $v1+$v2"
          />
        <check loc="5 130" size="160 20"
          style="PlainText"
          label="Show order"
          vq="iplanType"
          vc="gplan('setDrawOrders', 1)"
          vc2="gplan('setDrawOrders', 0)"
          set="gplan('getActStackInfo', 'drawOrder'):$VALUE"
          />
      </group>
      <group loc="5 20" size="200 45"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="euler_horz"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        >
        <entry loc="20 20" size="50 20"
          style="PlainText"
          vq="psi"
          vc="gplan('setValue','psi',$VALUE)"
          set="$VALUE=psi"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="75 20" size="50 20"
          style="PlainText"
          vq="phi"
          vc="gplan('setValue','phi',$VALUE)"
          set="$VALUE=phi"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="130 20" size="50 20"
          style="PlainText"
          vq="theta"
          vc="gplan('setValue','theta',$VALUE)"
          set="$VALUE=theta"
          digits="1"
          disable="Grayed out"
          />
        <label loc="0 0" size="180 20"
          style="Label1"
          label="Angles (psi, phi, theta)"
          justify="Left"
          />
      </group>
    </group>
    <group loc="650 0" size="210 230"
      style="Heading1"
      label="Fat Saturation"
      vq="fsat showOptions"
      show="if (showOptions=3) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="FatSaturation"
      useref="no"
      subtype="Major"
      expanded="yes"
      >
      <check loc="115 105" size="90 20"
        style="PlainText"
        label="Auto offset"
        vq="fsat fsatfrq autooffset"
        vc="autooffset='y' fsatfrq=Prescan_FatOffset"
        vc2="autooffset='n'"
        set="$VALUE=(autooffset='y')"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        />
      <entry loc="115 85" size="60 20"
        style="PlainText"
        vq="fsat fsatfrq"
        vc="fsatfrq=$VALUE autooffset=n"
        set="$VALUE=fsatfrq"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="0"
        disable="Grayed out"
        />
      <label loc="175 85" size="30 20"
        style="PlainText"
        label="Hz"
        justify="Left"
        />
      <entry loc="115 65" size="60 20"
        style="PlainText"
        vq="pfsat fsat"
        vc="pfsat=$VALUE*1000.0 go('check')"
        set="$VALUE=pfsat/1000.0"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="1"
        disable="Grayed out"
        />
      <label loc="175 65" size="30 20"
        style="PlainText"
        label="ms"
        justify="Left"
        />
      <entry loc="115 45" size="60 20"
        style="PlainText"
        vq="flipfsat fsat"
        vc="flipfsat=$VALUE"
        set="$VALUE=flipfsat"
        show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
        digits="0"
        disable="Grayed out"
        />
      <label loc="175 45" size="30 20"
        style="PlainText"
        label="deg"
        justify="Left"
        />
      <label loc="5 45" size="70 20"
        style="PlainText"
        label="Flip Angle"
        justify="Left"
        />
      <label loc="5 85" size="60 20"
        style="PlainText"
        label="Offset"
        justify="Left"
        />
      <label loc="5 65" size="60 20"
        style="PlainText"
        label="Duration"
        justify="Left"
        />
      <check loc="5 20" size="65 20"
        style="PlainText"
        label="Fatsat"
        vq="fsat Prescan_FatOffset"
        vc="fsat='y'  fsatfrq=fsatfrq pfsat=pfsat if (autooffset='y') then fsatfrq=Prescan_FatOffset endif  go('check')"
        vc2="fsat='n' unarray('fsatfrq','pfsat')   go('check')"
        set="$VALUE=(fsat='y')"
        />
    </group>
  </group>
</template>
