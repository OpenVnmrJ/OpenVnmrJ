<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="DoubleSpinEcho" element="groups" type="acquisition" >
  <group size="210 230"
    style="Heading1"
    label="Spin-echo"
    vq="ir"
    bg="transparent"
    border="Etched"
    side="Top"
    justify="Left"
    tab="no"
    enable="no"
    reference="DoubleSpinEcho"
    useref="no"
    subtype="Major"
    expanded="yes"
    >
    <group loc="105 85" size="65 20"
      vq="spinecho dblspinecho"
      show="if (spinecho='y' AND dblspinecho='y') then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <textmessage loc="10 0" size="55 20"
        style="PlainText"
        label="50.00"
        vq="te dsete spinecho dblspinecho"
        set="if (spinecho='y' AND dblspinecho='y') then $VALUE=(te-dsete)*1000 else $VALUE=te*1000 endif"
        digits="2"
        />
    </group>
    <check loc="5 45" size="185 20"
      style="PlainText"
      label="Double Spin-echo"
      vq="spinecho dblspinecho"
      vc="dblspinecho='y' go('check')"
      vc2="dblspinecho='n' go('check')"
      set="$VALUE=(dblspinecho='y')"
      show="if (spinecho = 'y') then $VALUE = 1 else $VALUE = -1 endif"
      />
    <check loc="5 110" size="195 20"
      style="PlainText"
      label="Adjust Refocusing RF Power"
      vq="spinecho p2flipadjust"
      vc="p2flipadjust='y' go('check')"
      vc2="p2flipadjust='n' go('check')"
      set="$VALUE=(p2flipadjust='y')"
      show="if (spinecho = 'y') then $VALUE = 1 else $VALUE = -1 endif"
      />
    <label loc="5 130" size="90 20"
      style="Label1"
      label="Flip Multiplier"
      />
    <entry loc="115 130" size="55 20"
      style="PlainText"
      vq="p2flipmult spinecho p2flipadjust"
      vc="p2flipmult=$VALUE go('check')"
      set="$VALUE=p2flipmult"
      show="if (spinecho = 'y' AND p2flipadjust='y') then $VALUE = 1 else $VALUE = -1 endif"
      digits="2"
      />
    <label loc="175 150" size="30 20"
      style="PlainText"
      label="dB"
      justify="Left"
      />
    <textmessage loc="115 150" size="55 20"
      style="PlainText"
      label="59.04"
      vq="tpwr2 tpwr2f"
      set="calc_power(tpwr2,tpwr2f):$VALUE"
      digits="2"
      />
    <label loc="5 150" size="60 20"
      style="Label1"
      label="Power"
      />
    <entry loc="115 65" size="55 20"
      style="PlainText"
      vq="dsete spinecho dblspinecho mindsete"
      vc="mindsete='n' dsete=$VALUE/1000 go('check')"
      set="$VALUE=dsete*1000"
      show="if (dblspinecho = 'n' OR spinecho='n') then $VALUE = -1 elseif (mindsete='y') then $VALUE=0 else $VALUE = 1 endif"
      digits="2"
      />
    <label loc="175 65" size="30 20"
      style="PlainText"
      label="ms"
      justify="Left"
      />
    <label loc="175 85" size="30 20"
      style="PlainText"
      label="ms"
      justify="Left"
      />
    <check loc="65 65" size="50 20"
      style="PlainText"
      label="min"
      vq="mindsete dsete spinecho dblspinecho"
      vc="mindsete='y' go('check')"
      vc2="mindsete='n' go('check')"
      set="$VALUE=(mindsete='y')"
      show="if (spinecho='y' AND dblspinecho = 'y') then $VALUE = 1 else $VALUE = -1 endif"
      />
    <label loc="5 65" size="60 20"
      style="Label1"
      label="TE1"
      />
    <label loc="5 85" size="105 20"
      style="Label1"
      label="TE2 (TE-TE1)"
      />
    <check loc="5 20" size="115 20"
      style="PlainText"
      label="Spin-echo"
      vq="spinecho spinstimecho"
      vc="spinecho='y' spinstimecho='n' im2Depi('prep','check')"
      vc2="spinecho='n' im2Depi('prep','check')"
      set="$VALUE=(spinecho='y')"
      />
  </group>
</template>
