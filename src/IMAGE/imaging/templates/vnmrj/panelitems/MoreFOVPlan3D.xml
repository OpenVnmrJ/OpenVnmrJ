<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="MoreFOVPlan3D" element="groups" type="acquisition" >
  <group size="210 230"
    style="Heading1"
    label="Slab Plan"
    bg="transparent"
    border="Etched"
    side="Top"
    justify="Left"
    tab="no"
    enable="no"
    reference="MoreFOVPlan3D"
    useref="no"
    subtype="Major"
    expanded="yes"
    >
    <group loc="5 20" size="200 40"
      vq="iplanType"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="euler_horz"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      >
      <entry loc="35 20" size="50 20"
        style="PlainText"
        vq="psi"
        vc="gplan('setValue','psi',$VALUE)"
        set="$VALUE=psi"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="90 20" size="50 20"
        style="PlainText"
        vq="phi"
        vc="gplan('setValue','phi',$VALUE)"
        set="$VALUE=phi"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="145 20" size="50 20"
        style="PlainText"
        vq="theta"
        vc="gplan('setValue','theta',$VALUE)"
        set="$VALUE=theta"
        digits="1"
        disable="Grayed out"
        />
      <label loc="0 0" size="180 20"
        style="Label1"
        label="Angles (psi, phi, theta)"
        justify="Left"
        />
    </group>
    <group loc="5 65" size="115 20"
      vq="iplanType"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <entry loc="35 0" size="50 20"
        style="PlainText"
        vq="pss ns"
        vc="gplan('setValue','ns',$VALUE) ns=ns prep go('check')"
        set="$VALUE=size('pss')"
        digits="0"
        disable="Grayed out"
        />
      <label loc="0 0" size="40 20"
        style="PlainText"
        label="Slabs"
        justify="Left"
        />
    </group>
    <group loc="5 110" size="200 45"
      style="Heading1"
      label="3-Point Marking"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="Marking"
      useref="no"
      subtype="Minor"
      expanded="yes"
      >
      <textmessage loc="10 20" size="20 20"
        style="PlainText"
        label=" "
        vq="iplanMarking"
        set="if(iplanMarking&gt;0) then $VALUE=iplanMarking else $VALUE='' endif"
        />
      <button loc="35 20" size="50 20"
        style="Label1"
        label="Start"
        vq="iplanMarking"
        vc="gplan('clearStacks') gplan('startMarking',3)"
        show="if(iplanMarking=0) then $VALUE=1 else $VALUE=0 endif"
        bg="transparent"
        decor1="no"
        tooltip="Select 1-3 points in displayed images to specify slab center slab position"
        />
      <button loc="90 20" size="50 20"
        style="Label1"
        label="Show"
        vq="iplanMarking"
        vc="gplan('addAstack',0) gplan('stopMarking') iplanMarking=-1"
        show="if(iplanMarking&gt;0) then $VALUE=1 else $VALUE=0 endif"
        bg="transparent"
        decor1="no"
        />
      <button loc="145 20" size="50 20"
        style="Label1"
        label="Clear"
        vc="gplan('stopMarking') gplan('clearMarking') gplan('clearStacks')"
        bg="transparent"
        decor1="no"
        />
    </group>
    <group loc="5 155" size="205 65"
      style="Heading1"
      label="Display"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="SliceDisplay"
      useref="no"
      subtype="Minor"
      expanded="yes"
      >
      <check loc="110 40" size="80 20"
        style="PlainText"
        label="3D view"
        vq="iplanType"
        vc="gplan('setDraw3D', 1)"
        vc2="gplan('setDraw3D', 0)"
        set="gplan('getActStackInfo', 'draw3D'):$VALUE"
        />
      <check loc="5 40" size="100 20"
        style="PlainText"
        label="Display Axes"
        vq="iplanType"
        vc="gplan('setDrawAxes', 1)"
        vc2="gplan('setDrawAxes', 0)"
        set="gplan('getActStackInfo', 'drawAxes'):$VALUE"
        />
      <radio loc="80 20" size="55 20"
        style="PlainText"
        label="Filled"
        vq="iplanType"
        vc="gplan('setDisplayStyle', 0) gplan('setFillPolygon', 1)"
        vc2="gplan('setFillPolygon', 0)"
        set="gplan('getActStackInfo', 'fill'):$VALUE"
        />
      <radio loc="145 20" size="45 20"
        style="PlainText"
        label="Line"
        vq="iplanType"
        vc="gplan('setDisplayStyle', 1)"
        vc2="gplan('setDisplayStyle', 0)"
        set="gplan('getActStackInfo', 'style'):$VALUE"
        />
      <radio loc="5 20" size="65 20"
        style="PlainText"
        label="Normal"
        vq="iplanType"
        vc="gplan('setFillPolygon', 0) gplan('setDisplayStyle', 0)"
        set="gplan('getActStackInfo', 'fill'):$v1 gplan('getActStackInfo', 'style'):$v2 $VALUE = $v1+$v2"
        />
    </group>
    <check loc="10 265" size="160 20"
      style="PlainText"
      label="Show order"
      vq="iplanType"
      vc="gplan('setDrawOrders', 1)"
      vc2="gplan('setDrawOrders', 0)"
      set="gplan('getActStackInfo', 'drawOrder'):$VALUE"
      />
    <group loc="5 85" size="205 20"
      vq="pss"
      show="if (size('pss')&gt;1) then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <group loc="115 0" size="85 20"
        vq="iplanType"
        show="$VALUE = (iplanType = 0)"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        >
        <check loc="40 0" size="45 20"
          style="PlainText"
          label="Rev"
          vq="sliceorder"
          vc="sliceorder=sliceorder+2 gplan('alternateSlices',sliceorder)"
          vc2="sliceorder=sliceorder-2 gplan('alternateSlices',sliceorder)"
          set="if (sliceorder&gt;1) then $VALUE=1 else $VALUE=0 endif"
          />
        <check loc="5 0" size="40 20"
          style="PlainText"
          label="Int"
          vq="sliceorder"
          vc="sliceorder=sliceorder+1 gplan('alternateSlices',sliceorder)"
          vc2="sliceorder=sliceorder-1 gplan('alternateSlices',sliceorder)"
          set="$VALUE=(sliceorder % 2)"
          />
      </group>
      <label loc="85 0" size="30 20"
        style="PlainText"
        label="mm"
        justify="Left"
        />
      <entry loc="35 0" size="50 20"
        style="PlainText"
        vq="gap"
        vc="gplan('setValue','gap',$VALUE/10) prep"
        set="$VALUE=gap*10"
        digits="1"
        disable="Grayed out"
        />
      <label loc="0 0" size="35 20"
        style="PlainText"
        label="Gap"
        justify="Left"
        />
    </group>
    <toggle loc="125 65" size="75 20"
      style="PlainText"
      label="View Slab"
      vq="iplanType"
      vc="gplan('addType','slices') gplan('alternateSlices',sliceorder)"
      vc2="gplan('deleteType','slices') iplanType = 2"
      set="$VALUE = (iplanType = 0)"
      enable="yes"
      radiobutton="no"
      subtype="no"
      />
  </group>
</template>
