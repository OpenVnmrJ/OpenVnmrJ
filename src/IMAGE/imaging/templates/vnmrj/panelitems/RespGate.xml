<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="RespGate" element="groups" type="acquisition" >
  <group size="210 230"
    style="Heading1"
    label="Respiration Gating"
    bg="transparent"
    border="Etched"
    side="Top"
    justify="Left"
    tab="no"
    enable="no"
    reference="RespGate"
    useref="no"
    subtype="Major"
    expanded="yes"
    >
    <check loc="5 160" size="200 20"
      style="PlainText"
      label="Start at Fresh Resp Phase"
      vq="freshresp rgate ir dir"
      vc="freshresp='y' go('check')"
      vc2="freshresp='n' go('check')"
      set="$VALUE=(freshresp='y')"
      show="if (rgate='y' AND (ir='y' OR dir='y')) then $VALUE = 1 else $VALUE = -1 endif"
      />
    <check loc="5 140" size="200 20"
      style="PlainText"
      label="Resp Gate before Trigger"
      vq="trigmode rgate ticks"
      vc="trigmode='r' go('check')"
      vc2="trigmode='c' go('check')"
      set="$VALUE=(trigmode='r')"
      show="if (rgate='y' AND ticks&gt;0) then $VALUE = 1 else $VALUE = -1 endif"
      />
    <check loc="5 120" size="145 20"
      style="PlainText"
      label="Zero gate open"
      vq="gatezero rgate"
      vc="gatezero='o' go('check')"
      vc2="gatezero='c' go('check')"
      set="$VALUE = (gatezero='o')"
      show="if (rgate='y') then $VALUE=1 else $VALUE=-1 endif"
      />
    <label loc="175 100" size="30 20"
      style="PlainText"
      label="ms"
      justify="Left"
      />
    <entry loc="115 100" size="60 20"
      style="PlainText"
      vq="rgatewindow rgate ir dir freshresp"
      vc="rgatewindow=$VALUE/1000 go('check')"
      set="$VALUE=rgatewindow*1000"
      show="if ( (rgate='y') and (ir='y') and (dir='n') and (freshresp='y')) then $VALUE=1 else $VALUE=-1 endif"
      digits="2"
      />
    <label loc="5 100" size="85 20"
      style="Label1"
      label="Resp Window"
      />
    <entry loc="115 80" size="60 20"
      style="PlainText"
      vq="rgateperiod rgate ir dir rgaterate freshresp"
      vc="rgateperiod=$VALUE/1000 rgaterate=60/rgateperiod  go('check')"
      set="$VALUE=rgateperiod*1000"
      show="if ( (rgate='y') and (ir='y') and (dir='n') and (freshresp='y')) then $VALUE=1 else $VALUE=-1 endif"
      digits="2"
      />
    <entry loc="115 60" size="60 20"
      style="PlainText"
      vq="rgaterate rgate ir dir rgateperiod freshresp"
      vc="rgaterate=$VALUE   rgateperiod=60/rgaterate  go('check')"
      set="$VALUE=rgaterate"
      show="if ( (rgate='y') and (ir='y') and (dir='n') and (freshresp='y')) then $VALUE=1 else $VALUE=-1 endif"
      digits="0"
      />
    <entry loc="115 40" size="60 20"
      style="PlainText"
      vq="blankingdelay rgate"
      vc="blankingdelay=$VALUE/1000 go('check')"
      set="$VALUE=blankingdelay*1000"
      show="if (rgate='y') then $VALUE=1 else $VALUE=-1 endif"
      digits="2"
      />
    <label loc="175 40" size="30 20"
      style="PlainText"
      label="ms"
      justify="Left"
      />
    <label loc="175 60" size="30 20"
      style="PlainText"
      label="bpm"
      justify="Left"
      />
    <label loc="175 80" size="30 20"
      style="PlainText"
      label="ms"
      justify="Left"
      />
    <label loc="5 80" size="85 20"
      style="Label1"
      label="Resp Period"
      />
    <label loc="5 60" size="85 20"
      style="Label1"
      label="Resp Rate"
      />
    <label loc="5 40" size="90 20"
      style="Label1"
      label="Reading Period"
      />
    <check loc="5 20" size="145 20"
      style="PlainText"
      label="Respiration Gate"
      vq="rgate"
      vc="rgate ='y' go('check')"
      vc2="rgate ='n' go('check')"
      set="$VALUE = (rgate='y')"
      />
  </group>
</template>
