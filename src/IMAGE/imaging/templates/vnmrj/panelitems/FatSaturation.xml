<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="FatSaturation" element="groups" type="acquisition" >
  <group size="210 230"
    style="Heading1"
    label="Fat Saturation"
    vq="fsat"
    bg="transparent"
    border="Etched"
    side="Top"
    justify="Left"
    tab="no"
    enable="no"
    reference="FatSaturation"
    useref="no"
    subtype="Major"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <check loc="25 200" size="140 20"
      style="PlainText"
      label="Fat on-resonance"
      vq="fsat fsatswap fsatswapref"
      vc="fsatswapref='y'"
      vc2="fsatswapref='n'"
      set="$VALUE=(fsatswapref='y')"
      show="if ((fsat='y') and (fsatswap='y')) then $VALUE=1 else $VALUE=-1 endif"
      />
    <check loc="5 180" size="140 20"
      style="PlainText"
      label="Reverse fat/water"
      vq="fsat fsatswap"
      vc="fsatswap='y'"
      vc2="fsatswap='n'"
      set="$VALUE=(fsatswap='y')"
      show="if (fsat='y') then $VALUE=1 else $VALUE=-1 endif"
      />
    <label loc="5 150" size="105 20"
      style="PlainText"
      label="Crusher duration"
      justify="Left"
      />
    <label loc="5 130" size="105 20"
      style="PlainText"
      label="Crusher strength"
      justify="Left"
      />
    <label loc="5 110" size="110 20"
      style="PlainText"
      label="Number of Pulses"
      justify="Left"
      />
    <label loc="175 150" size="30 20"
      style="PlainText"
      label="ms"
      justify="Left"
      />
    <label loc="175 130" size="35 20"
      style="PlainText"
      label="G/cm"
      justify="Left"
      />
    <entry loc="115 150" size="60 20"
      style="PlainText"
      vq="fsat tcrushfs"
      vc="tcrushfs=$VALUE/1000.0 go('check')"
      set="$VALUE=tcrushfs*1000"
      show="if (fsat='y') then $VALUE=1 else $VALUE=-1 endif"
      digits="1"
      disable="Grayed out"
      />
    <entry loc="115 130" size="60 20"
      style="PlainText"
      vq="fsat gcrushfs"
      vc="gcrushfs=$VALUE go('check')"
      set="$VALUE=gcrushfs"
      show="if (fsat='y') then $VALUE=1 else $VALUE=-1 endif"
      digits="1"
      disable="Grayed out"
      />
    <entry loc="115 110" size="60 20"
      style="PlainText"
      vq="fsat fsatpulses"
      vc="fsatpulses=$VALUE go('check')"
      set="$VALUE=fsatpulses"
      show="if (fsat='y') then $VALUE=1 else $VALUE=-1 endif"
      digits="0"
      disable="Grayed out"
      />
    <entry loc="115 45" size="60 20"
      style="PlainText"
      vq="flipfsat fsat"
      vc="flipfsat=$VALUE"
      set="$VALUE=flipfsat"
      show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
      digits="0"
      disable="Grayed out"
      />
    <entry loc="115 65" size="60 20"
      style="PlainText"
      vq="pfsat fsat"
      vc="pfsat=$VALUE*1000.0 go('check')"
      set="$VALUE=pfsat/1000.0"
      show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
      digits="1"
      disable="Grayed out"
      />
    <label loc="5 45" size="70 20"
      style="PlainText"
      label="Flip Angle"
      justify="Left"
      />
    <label loc="5 65" size="60 20"
      style="PlainText"
      label="Duration"
      justify="Left"
      />
    <check loc="65 85" size="55 20"
      style="PlainText"
      label="Auto"
      vq="fsat fsatfrq autooffset"
      vc="autooffset='y' fsatfrq=Prescan_FatOffset"
      vc2="autooffset='n'"
      set="$VALUE=(autooffset='y')"
      show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
      />
    <label loc="175 65" size="30 20"
      style="PlainText"
      label="ms"
      justify="Left"
      />
    <entry loc="115 85" size="60 20"
      style="PlainText"
      vq="fsat fsatfrq"
      vc="fsatfrq=$VALUE autooffset=n"
      set="$VALUE=fsatfrq"
      show="if (fsat = 'y') then $VALUE = 1 else $VALUE = -1 endif"
      digits="0"
      disable="Grayed out"
      />
    <label loc="175 85" size="30 20"
      style="PlainText"
      label="Hz"
      justify="Left"
      />
    <label loc="175 45" size="30 20"
      style="PlainText"
      label="deg"
      justify="Left"
      />
    <label loc="5 85" size="60 20"
      style="PlainText"
      label="Offset"
      justify="Left"
      />
    <check loc="5 20" size="65 20"
      style="PlainText"
      label="Fatsat"
      vq="fsat Prescan_FatOffset"
      vc="fsat='y' genpars('fsat') fsatfrq=fsatfrq pfsat=pfsat if (autooffset='y') then fsatfrq=Prescan_FatOffset endif  go('check')"
      vc2="fsat='n' unarray('fsatfrq','pfsat')   go('check')"
      set="$VALUE=(fsat='y')"
      />
  </group>
</template>
