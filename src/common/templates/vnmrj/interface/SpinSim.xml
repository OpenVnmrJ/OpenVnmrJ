<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
 ! 
 ! Copyright (C) 2015  University of Oregon
 ! You may distribute under the terms of either the GNU General Public
 ! License or the Apache License, as specified in the LICENSE file.
 ! For more information, see the LICENSE file.
 !
 -->
<template name="SpinSim" element="pages" type="processing" >
<folder loc="8 8" size="760 290">
  <group loc="10 10" size="750 220"
    style="Heading1"
    label="Spin Selection"
    border="None"
    side="Top"
    justify="Right"
    tab="yes"
    enable="no"
    reference="SpinSelect"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="270 10" size="150 180"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Convenience"
      >
      <button loc="10 160" size="130 20"
        style="Heading2"
        label="Show spectrum"
        vc="wft vsadj"
        />
      <button loc="0 30" size="150 20"
        style="Heading2"
        label="Initialize parameters"
        vc="spins_button('initialize')"
        />
      <label loc="0 50" size="60 20"
        style="Label1"
        label="min freq"
        justify="Left"
        />
      <label loc="0 70" size="60 20"
        style="Label1"
        label="max freq"
        justify="Left"
        />
      <entry loc="60 50" size="90 20"
        style="PlainText"
        vq="sminf"
        vc="sminf=$VALUE"
        set="$VALUE=sminf"
        />
      <entry loc="60 70" size="90 20"
        style="PlainText"
        vq="smaxf"
        vc="smaxf=$VALUE"
        set="$VALUE=smaxf"
        />
      <entry loc="60 90" size="90 20"
        style="PlainText"
        vq="sth"
        vc="sth=$VALUE"
        set="$VALUE=sth"
        />
      <label loc="0 90" size="70 20"
        style="Label1"
        label="threshhold"
        justify="Left"
        />
      <label loc="0 110" size="60 20"
        style="Label1"
        label="line width"
        justify="Left"
        />
      <entry loc="60 110" size="90 20"
        style="PlainText"
        vq="slw"
        vc="slw=$VALUE"
        set="$VALUE=slw"
        />
      <entry loc="60 130" size="90 20"
        style="PlainText"
        vq="svs"
        vc="svs=$VALUE"
        set="$VALUE=svs"
        />
      <label loc="0 130" size="60 20"
        style="Label1"
        label="vert scale"
        justify="Left"
        />
      <label loc="0 0" size="150 20"
        style="Heading1"
        label="Simulation parameters:"
        justify="Left"
        />
    </group>
    <textfile loc="590 30" size="150 180"
      style="PlainText"
      vq="spinsys A B C D E F G H X Y JAB JAC JAX"
      vc="spins('param','show')"
      set="$VALUE=curexp+'/spinj.par'"
      editable="no"
      wrap="no"
      />
    <label loc="10 10" size="180 20"
      style="Heading1"
      label="Choose spin system:"
      justify="Left"
      />
    <button loc="440 190" size="130 20"
      style="Heading2"
      label="Simulate"
      vc="spins dsp vsadj dss"
      decor1=""
      />
    <group loc="430 10" size="150 180"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Convenience"
      >
      <label loc="0 90" size="140 20"
        style="Heading1"
        label="Coupling constants:"
        justify="Left"
        />
      <filemenu loc="0 110" size="150 20"
        style="PlainText"
        vq="JAB"
        vc="spins('param','setjmenu','$VALUE')"
        set="spins('param','getjmenu'):$VALUE"
        file="$VALUE=userdir+'/persistence/spins_parj'"
        type="file"
        vq2="spinsys"
        />
      <entry loc="0 130" size="150 20"
        style="PlainText"
        vq="spinsys JAB JAX"
        vc="spins('param','setjvalue',$VALUE)"
        set="spins('param','getjvalue'):$VALUE"
        digits="4"
        />
      <button loc="0 150" size="150 20"
        style="Heading2"
        label="Set J from spectrum"
        vc="spins_button('setjvalue')"
        />
      <button loc="0 60" size="150 20"
        style="Heading2"
        label="Set shift from spectrum"
        vc="spins_button('setdvalue')"
        />
      <entry loc="0 40" size="150 20"
        style="PlainText"
        vq="spinsys A B C D E F G H X Y"
        vc="spins('param','setdvalue',$VALUE)"
        set="spins('param','getdvalue'):$VALUE"
        digits="2"
        />
      <filemenu loc="0 20" size="150 20"
        style="PlainText"
        vq="A"
        vc="spins('param','setdmenu','$VALUE')"
        set="spins('param','getdmenu'):$VALUE"
        file="$VALUE=userdir+'/persistence/spins_pard'"
        type="file"
        vq2="spinsys"
        />
      <label loc="0 0" size="130 20"
        style="Heading1"
        label="Chemical shifts:"
        justify="Left"
        />
    </group>
    <entry loc="100 170" size="150 20"
      style="PlainText"
      vq="spinsys"
      vc="spinsys='$VALUE' spins('system',spinsys) spins_button('initialize')"
      set="$VALUE=spinsys"
      />
    <group loc="10 30" size="240 130"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Convenience"
      >
      <toggle loc="160 110" size="80 20"
        style="Heading2"
        label="AX3"
        vq="spinsys"
        vc="spinsys='AX3' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='AX3')"
        radiobutton="false"
        />
      <toggle loc="160 90" size="80 20"
        style="Heading2"
        label="AX2Y"
        vq="spinsys"
        vc="spinsys='AX2Y' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='AX2Y')"
        radiobutton="false"
        />
      <toggle loc="160 70" size="80 20"
        style="Heading2"
        label="AXYZ"
        vq="spinsys"
        vc="spinsys='AXYZ' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='AXYZ')"
        radiobutton="false"
        />
      <toggle loc="160 50" size="80 20"
        style="Heading2"
        label="AX2"
        vq="spinsys"
        vc="spinsys='AX2' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='AX2')"
        radiobutton="false"
        />
      <toggle loc="160 30" size="80 20"
        style="Heading2"
        label="AXY"
        vq="spinsys"
        vc="spinsys='AXY' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='AXY')"
        radiobutton="false"
        />
      <toggle loc="160 10" size="80 20"
        style="Heading2"
        label="AX"
        vq="spinsys"
        vc="spinsys='AX' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='AX')"
        radiobutton="false"
        />
      <toggle loc="80 110" size="80 20"
        style="Heading2"
        label="A3B2C"
        vq="spinsys"
        vc="spinsys='A3B2C' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A3B2C')"
        radiobutton="false"
        />
      <toggle loc="80 90" size="80 20"
        style="Heading2"
        label="A3B2"
        vq="spinsys"
        vc="spinsys='A3B2' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A3B2')"
        radiobutton="false"
        />
      <toggle loc="80 70" size="80 20"
        style="Heading2"
        label="A2B2C"
        vq="spinsys"
        vc="spinsys='A2B2C' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A2B2C')"
        radiobutton="false"
        />
      <toggle loc="80 50" size="80 20"
        style="Heading2"
        label="A3BC"
        vq="spinsys"
        vc="spinsys='A3BC' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A3BC')"
        radiobutton="false"
        />
      <toggle loc="80 30" size="80 20"
        style="Heading2"
        label="A2BCD"
        vq="spinsys"
        vc="spinsys='A2BCD' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A2BCD')"
        radiobutton="false"
        />
      <toggle loc="80 10" size="80 20"
        style="Heading2"
        label="ABCDE"
        vq="spinsys"
        vc="spinsys='ABCDE' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='ABCDE')"
        radiobutton="false"
        />
      <toggle loc="0 110" size="80 20"
        style="Heading2"
        label="A3B"
        vq="spinsys"
        vc="spinsys='A3B' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A3B')"
        radiobutton="false"
        />
      <toggle loc="0 90" size="80 20"
        style="Heading2"
        label="A2BC"
        vq="spinsys"
        vc="spinsys='A2BC' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A2BC')"
        radiobutton="false"
        />
      <toggle loc="0 70" size="80 20"
        style="Heading2"
        label="ABCD"
        vq="spinsys"
        vc="spinsys='ABCD' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='ABCD')"
        radiobutton="false"
        />
      <toggle loc="0 50" size="80 20"
        style="Heading2"
        label="A2B"
        vq="spinsys"
        vc="spinsys='A2B' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='A2B')"
        radiobutton="false"
        />
      <toggle loc="0 30" size="80 20"
        style="Heading2"
        label="ABC"
        vq="spinsys"
        vc="spinsys='ABC' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='ABC')"
        radiobutton="false"
        />
      <toggle loc="0 10" size="80 20"
        style="Heading2"
        label="AB"
        vq="spinsys"
        vc="spinsys='AB' spins('system',spinsys) spins_button('initialize')"
        set="$VALUE=(spinsys='AB')"
        radiobutton="false"
        />
    </group>
    <button loc="590 10" size="150 20"
      style="Heading2"
      label="Show parameters"
      vc="dga spins('param','show')"
      decor1=""
      />
    <label loc="40 170" size="60 20"
      style="Label1"
      label="Other:"
      justify="Left"
      />
  </group>
  <group size="750 250"
    style="Heading1"
    label="Spin Assignment"
    border="None"
    side="Top"
    justify="Right"
    tab="yes"
    enable="no"
    reference="SpinAssign"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >
    <group loc="530 10" size="210 40"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Convenience"
      >
      <entry loc="80 0" size="130 20"
        style="PlainText"
        vq="niter"
        vc="niter=$VALUE"
        set="$VALUE=niter"
        />
      <entry loc="80 20" size="130 20"
        style="PlainText"
        vq="iterate"
        vc="iterate='$VALUE'"
        set="$VALUE=iterate"
        />
      <label loc="10 20" size="70 20"
        style="Label1"
        label="Iterate"
        justify="Left"
        />
      <label loc="10 0" size="70 20"
        style="Label1"
        label="# iterations"
        justify="Left"
        />
    </group>
    <button loc="350 10" size="140 30"
      style="Heading2"
      vq="iterate"
      label="Iterate"
      vc="if (iterate='') then initialize_iterate endif spins('iterate') dla dsp vsadj dss"
      decor1=""
      />
    <textfile loc="350 60" size="390 180"
      style="PlainText"
      vq="spinsys slfreq clfreq clindex clamp cla"
      set="$VALUE=curexp+'/spins.list'"
      editable="no"
      wrap="no"
      />
    <textfile loc="10 130" size="320 110"
      style="PlainText"
      vq="spinsys slfreq clfreq clindex clamp cla"
      vc="dla"
      set="$VALUE=curexp+'/spini.la'"
      editable="no"
      wrap="no"
      />
    <button loc="180 10" size="130 20"
      style="Heading2"
      label="Make line list"
      vc="dll dla spinll dpf('noll')"
      />
    <button loc="180 30" size="130 20"
      style="Heading2"
      label="Use line list"
      vc="spinll dpf('noll')"
      />
    <button loc="180 50" size="130 20"
      style="Heading2"
      label="Use fitspec"
      vc="fitspec('setslfreq') dla"
      />
    <button loc="180 80" size="130 20"
      style="Heading2"
      label="Assign lines"
      vc="assign"
      />
    <button loc="180 110" size="150 20"
      style="Heading2"
      label="Clear assigned lines"
      vc="cla"
      />
    <button loc="10 60" size="130 20"
      style="Heading2"
      label="Show simulation"
      vc="dsp vsadj dss"
      />
    <button loc="10 80" size="130 20"
      style="Heading2"
      label="Show spectrum"
      vc="wft('nods') vsadj dss"
      />
    <button loc="10 110" size="150 20"
      style="Heading2"
      label="Show assigned lines"
      vc="dla"
      />
    <textmessage loc="30 30" size="140 20"
      style="PlainText"
      label="AX2"
      vq="spinsys"
      set="$VALUE=spinsys"
      />
    <label loc="10 10" size="130 20"
      style="Label1"
      label="Spin system:"
      justify="Left"
      />
  </group>
</folder>
</template>
