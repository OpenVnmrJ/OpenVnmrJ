<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
 !
 ! Copyright (C) 2015  University of Oregon
 ! You may distribute under the terms of either the GNU General Public
 ! License or the Apache License, as specified in the LICENSE file.
 ! For more information, see the LICENSE file.
 !
 -->

<template name="HTfreq" element="pages" type="sample" >
  <group size="490 240"
    style="Heading1"
    label="HT Freq"
    bg=""
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="HTfreq"
    useref="no"
    subtype="Convenience"
    expanded="yes"
    >
    <button loc="290 190" size="180 20"
      style="Heading2"
      label="Set list into parameters"
      vc="htfrqdisp('read','htfrq1','htbw1') selecthtfrq1('display') writeHT"
      decor1=""
      />
    <button loc="320 210" size="120 20"
      style="Heading2"
      label="CLEAR"
      vc="selecthtfrq1('clear')"
      decor1=""
      />
    <textfile loc="290 30" size="180 150"
      style="PlainText"
      vq="htfrq1 htbw1 seqfil layout"
      set="htfrqdisp('write','htfrq1','htbw1') $VALUE=curexp+'/htfrq1.ll'"
      editable="yes"
      wrap="no"
      />
    <label loc="290 10" size="90 20"
      style="Label1"
      label=" Line List"
      justify="Left"
      />
    <group loc="30 110" size="160 140"
      bg=""
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="htsel"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <label loc="0 0" size="160 20"
        style="Heading1"
        label="Select HT Frequencies"
        justify="Center"
        />
      <label loc="0 20" size="160 20"
        style="Label1"
        label="Using Cursors"
        justify="Center"
        />
      <button loc="20 40" size="120 20"
        style="Heading2"
        label="Nearest line"
        vq="lockHT"
        vc="selecthtfrq1('nl')"
        show="$ENABLE=(lockHT='n')"
        decor1=""
        />
      <button loc="20 60" size="120 20"
        style="Heading2"
        label="Select"
        vq="lockHT"
        vc="selecthtfrq1('select')"
        show="$ENABLE=(lockHT='n')"
        decor1=""
        />
      <button loc="20 80" size="120 20"
        style="Heading2"
        label="Remove"
        vq="lockHT"
        vc="selecthtfrq1('remove')"
        show="$ENABLE=(lockHT='n')"
        decor1=""
        />
      <button loc="20 100" size="120 20"
        style="Heading2"
        label="Display"
        vc="selecthtfrq1('display')"
        decor1=""
        />
    </group>
    <entry loc="160 10" size="40 20"
      style="PlainText"
      vq="lockHT lb"
      vc="if not (lockHT='y') then lb=$VALUE wft(1) endif"
      set="$VALUE=lb"
      show="$ENABLE=(lockHT='n')"
      tooltip="Use 20 to 25 Hz for H1 and 0 to 5 Hz for C13"
      />
    <label loc="20 10" size="140 25"
      style="Label1"
      label="HT linewidth, lb [Hz]"
      justify="Center"
      tooltip="Use 20 to 25 Hz for H1 and 0 to 5 Hz for C13"
      />
    <button loc="20 35" size="180 20"
      style="Heading2"
      label="Create Line List"
      vq="lockHT"
      vc="if not (lockHT='y') then editht('makell') endif"
      show="$ENABLE=(lockHT='n')"
      decor1=""
      />
    <check loc="210 35" size="50 20"
      style="Label1"
      label="lock"
      vq="lockHT"
      vc="lockHT='y'"
      vc2="lockHT='n'"
      set="$VALUE=(lockHT='y')"
      />
    <button loc="20 55" size="180 20"
      style="Heading2"
      label="Copy HT List to Exp"
      vq="r6"
      vc="moveHT(r6)"
      decor1=""
      />
    <entry loc="200 55" size="50 20"
      style="PlainText"
      vq="r6"
      vc="r6=$VALUE"
      set="$VALUE=r6"
      />
    <button loc="20 75" size="180 20"
      style="Heading2"
      label="Import HT List from Exp"
      vq="r7"
      vc="importHT(r7)"
      decor1=""
      />
    <entry loc="200 75" size="50 20"
      style="PlainText"
      vq="r7"
      vc="r7=$VALUE"
      set="$VALUE=r7"
      />
  </group>
  <label loc="180 210" size="30 20"
    style="Label1"
    vq="htfrq1"
    vc="$s=size(htfrq1) if($s=1) and (htfrq1[1]=0) then $s=0 endif"
    set="$s=size('htfrq1') if ($s=1) and (htfrq1[1]=0) then $s=0 endif $VALUE=$s"
    justify="Right"
    />
  <label loc="215 210" size="80 20"
    style="Label1"
    label="Lines found"
    vq="htfrq1"
    justify="Left"
    />
  <group loc="25 240" size="120 25"
      bg=""
      border="None"
      vq="file"
      show="exists('is_cpsample','maclib'):$cp $SHOW=($cp=0)"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="htsel"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
    <button loc="10 0" size="100 25"
      style="Heading2"
      label="Save in Datadir"
      vq="file curexp tn"
      show="if (file='exp') or (file='') then $ENABLE=-1 else $ENABLE=1 endif"
      vc="$frqname=tn+'.ll' setHTdir:$svfdir copy(curexp+'/htll.htfrq1',$svfdir+'/'+$frqname)"
      decor1=""
    />
  </group>
  <group loc="30 240" size="440 25"
      bg=""
      border="None"
      vq="file"
      show="exists('is_cpsample','maclib'):$cp $SHOW=($cp)"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="htsel"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
  <button loc="5 0" size="100 25"
    style="Heading2"
    label="Save in Datadir"
    vq="file curexp tn"
    show="isnewexp:$new if ($new) then $ENABLE=-1 else $ENABLE=1 endif"
    vc="updateHTfrqs"
    decor1=""
    />
  <textmessage loc="110 0" size="330 20"
    style="PlainText"
    vq="htfrq1 file"
    set="$VALUE='' isnewexp:$new if ($new=0) then shell('basename '+file):$VALUE endif"
    />
  </group>
</template>
