<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="editprotocol" element="groups" type="acquisition" >
  <group size="470 480"
    bg=""
    border="None"
    tab="no"
    enable="no"
    reference="editprotocol"
    useref="no"
    subtype="Convenience"
    expanded="yes"
    >
    <group loc="20 90" size="430 380"
      bg=""
      border="Etched"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      expanded="yes"
      >
      <label loc="10 185" size="85 20"
        style="Heading1"
        label="Action"
        justify="Right"
        />
      <label loc="10 60" size="85 20"
        style="Label1"
        label="Tabname"
        justify="Right"
        />
      <label loc="10 110" size="85 20"
        style="Label1"
        label="MenuLevel"
        justify="Right"
        />
      <label loc="10 135" size="85 20"
        style="Label1"
        label="Submenu"
        justify="Right"
        />
      <label loc="10 160" size="85 20"
        style="Label1"
        label="Label"
        justify="Right"
        />
      <label loc="10 35" size="85 20"
        style="Label1"
        label="Name"
        justify="Right"
        />
      <label loc="10 10" size="85 20"
        style="Label1"
        label="Type"
        justify="Right"
        />
      <label loc="10 230" size="85 20"
        style="Label1"
        label="Req. Exp"
        justify="Right"
        />
      <label loc="10 255" size="85 20"
        style="Label1"
        label="ExpTime"
        justify="Right"
        />
      <entry loc="105 230" size="275 20"
        style="PlainText"
        vq="editprotpars"
        show="$ENABLE=(editprotpars[7]&lt;&gt;'CMD')*2-1"
        vc="editprotpars[11]='$VALUE'"
        set="$VALUE=editprotpars[11]"
        />
      <entry loc="105 35" size="220 20"
        style="PlainText"
        vq="editprotpars"
        vc="if (editprotpars[7]='CMD') then $arg=9 else $arg=1 endif editprotocol('setvalue','$VALUE',$arg)"
        set="if (editprotpars[7]='CMD') then $VALUE=editprotpars[9] else $VALUE=editprotpars[1] endif"
        />
      <check loc="235 10" size="130 20"
        style="Label1"
        label="Command"
        vq="editprotpars apptype"
        vc="editprotocol('setvalue','CMD',7) if (editprotpars[2]&lt;&gt;'UserCMD') then editprotpars[14]='NeWTaBNaMe' editprotpars[2]='UserCMD' endif"
        vc2="editprotocol('setvalue','LIB',7) if (editprotpars[2]='UserCMD') then editprotpars[2]=apptype editprotpars[14]=apptype endif"
        set="$VALUE=(editprotpars[7]='CMD')"
        />
      <check loc="105 10" size="130 20"
        style="Label1"
        label="Experiment"
        vq="editprotpars apptype"
        vc="editprotocol('setvalue','LIB',7) if (editprotpars[2]='UserCMD') then editprotpars[2]=apptype editprotpars[14]=apptype endif"
        vc2="editprotocol('setvalue','CMD',7) if (editprotpars[2]&lt;&gt;'UserCMD') then editprotpars[14]='NeWTaBNaMe' editprotpars[2]='UserCMD' endif"
        set="$VALUE=(editprotpars[7]='LIB')"
        />
      <check loc="105 305" size="275 20"
        style="Label1"
        label="AutoPrompt customization"
        vq="editprotpars"
        vc="editprotpars[18]='yes'"
        vc2="editprotpars[18]='no'"
        set="$VALUE=(editprotpars[18]='yes')"
        />
      <button loc="105 340" size="220 25"
        style="Heading2"
	fg=""
        label="Make protocol"
        vq="editprotpars"
        vc="editprotocol('save')"
        show="if (((editprotpars[7]&lt;&gt;'CMD') and (editprotpars[1]&lt;&gt;'')) or ((editprotpars[7]='CMD') and (editprotpars[9]&lt;&gt;''))) then $ENABLE=1 else $ENABLE=0 endif"
        bg=""
        decor1=""
        />
      <check loc="105 205" size="275 20"
        style="Label1"
        label="Recall current parameters (rtp)"
        vq="editprotpars"
        vc="editprotocol('setvalue','y',6)"
        vc2="editprotocol('setvalue','n',6)"
        set="$VALUE=(editprotpars[6]='y')"
        show="$ENABLE=(editprotpars[7]&lt;&gt;'CMD')*2-1"
        />
      <textmessage loc="105 255" size="275 20"
        style="PlainText"
        vq="editprotpars"
        set="if (editprotpars[7]='CMD') then $VALUE='Not Applicable' else $VALUE=editprotpars[3] endif"
        />
      <label loc="10 280" size="85 20"
        style="Label1"
        label="AppDir"
        justify="Right"
        />
      <group loc="105 280" size="275 20"
        bg=""
        border="None"
	vq="editprotpars"
	show="$SHOW=(editprotpars[8]&lt;&gt;'')"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
      <textmessage loc="0 0" size="275 20"
        style="PlainText"
        vq="editprotpars"
        set="$VALUE=editprotpars[13]"
        />
      </group>
      <group loc="105 280" size="275 20"
        bg=""
        border="None"
        vq="editprotpars"
        show="$SHOW=(editprotpars[8]='')"
        tab="no"
        enable="no"
        useref="no"
        subtype="Convenience"
        >
<!-- prevj3 (protocols.j2205 bug) protocols in appdirs not allowed -->
<!--
      <textmessage loc="0 0" size="215 20"
        style="PlainText"
        vq="editprotpars"
        set="$VALUE=editprotpars[13]"
        />
-->
<!-- vj3 allows new protocols in any writable appdirs -->
       <filemenu loc="0 0" size="275 20"
         style="PlainText"
         vq="userdir editprotpars"
         vc="editprotpars[12]='$VALUE'"
         set="$VALUE=editprotpars[12]"
         file="$VALUE=userdir+'/persistence/CloneManager/writable_appdirs'"
         type="file"
         editable="No"
         vq2="userdir editprotpars"
         statshow="no"
         elastic="no"
         display="yes"
         />
      </group>
      <label loc="330 60" size="80 20"
        style="Label1"
        vq="editprotpars"
        label="Select OR"
        justify="Left"
        />
      <filemenu loc="105 60" size="220 20"
        style="PlainText"
        vq="userdir editprotpars"
        vc="editprotpars[14]='$VALUE' if (editprotpars[14]='NeWTaBNaMe') then editprotpars[2]='UserStudies' else editprotpars[2]=editprotpars[14] endif"
        set="$VALUE=editprotpars[14]"
	show="$ENABLE=(editprotpars[7]&lt;&gt;'CMD')*2-1"
        file="$VALUE=userdir+'/persistence/CloneManager/ProtocolTabList'"
        type="file"
        editable="No"
        vq2="userdir editprotpars"
        statshow="no"
        elastic="no"
        display="yes"
        />
      <label loc="330 85" size="80 20"
        style="Label1"
        vq="editprotpars"
        label=" Enter"
        justify="Left"
        />
      <entry loc="105 85" size="220 20"
        style="PlainText"
        vq="editprotpars"
        show="$ENABLE=((editprotpars[14]='NeWTaBNaMe') or (editprotpars[7]='CMD'))*2-1"
        vc="editprotocol('setvalue','$VALUE',2)"
        set="$VALUE=editprotpars[2]"
        />
      <entry loc="105 110" size="220 20"
        style="PlainText"
        vq="editprotpars"
        vc="editprotocol('setvalue','$VALUE',15)"
        set="$VALUE=editprotpars[15]"
        />
      <entry loc="105 135" size="220 20"
        style="PlainText"
        vq="editprotpars"
        vc="editprotocol('setvalue','$VALUE',16)"
        set="$VALUE=editprotpars[16]"
        />
      <entry loc="105 160" size="220 20"
        style="PlainText"
        vq="editprotpars"
        vc="editprotocol('setvalue','$VALUE',17)"
        set="$VALUE=editprotpars[17]"
        />
<!--
      <label loc="105 110" size="220 20"
        style="Label1"
	label="[Not supported in VnmrJ2]"
        />
      <label loc="105 135" size="220 20"
        style="Label1"
        label="[Not supported in VnmrJ2]"
        />
      <label loc="105 160" size="220 20"
        style="Label1"
        label="[Not supported in VnmrJ2]"
        />
-->
      <entry loc="180 185" size="200 20"
        style="PlainText"
        vq="editprotpars"
        vc="if (editprotpars[6]='n') then if (editprotpars[7]='CMD') then editprotocol('setvalue','$VALUE',10) else editprotocol('setvalue','$VALUE',5) endif endif"
        set="if (editprotpars[7]='CMD') then $VALUE=editprotpars[10] else $VALUE=editprotpars[5] endif"
        show="$ENABLE=(editprotpars[6]='n')"
        />
      <check loc="105 185" size="75 20"
        style="Label1"
        label="Execute.."
        vq="editprotpars"
        vc="editprotocol('setvalue','n',6)"
        vc2="if (editprotpars[7]='CMD') then $val='n' else $val='y' endif editprotocol('setvalue',$val,6)"
        set="$VALUE=(editprotpars[6]='n')"
        />
    </group>
    <group loc="20 15" size="430 70"
      bg=""
      border="Etched"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 10" size="95 20"
        style="Heading1"
        label="My Library:"
        justify="Right"
        />
      <button loc="110 35" size="130 25"
        style="Heading2"
	fg=""
        label="Show Details"
        vq="editprotpars"
        vc="editprotocol('getinfo',editprotpars[8])"
        show="$ENABLE=(editprotpars[8]&lt;&gt;'')"
        bg=""
        decor1=""
        />
      <button loc="250 35" size="130 25"
        style="Heading2"
	fg=""
        label="Delete"
        vq="editprotpars"
        vc="editprotocol('delete',editprotpars[8])"
        show="$ENABLE=(editprotpars[8]&lt;&gt;'')"
        bg=""
        decor1=""
        />
      <filemenu loc="110 10" size="270 20"
        style="PlainText"
        vq="editprotpars"
        vq2="userdir editprotpars"
        vc="editprotocol('setvalue','$VALUE',8)"
        set="$VALUE=editprotpars[8]"
        file="$VALUE=userdir+'/persistence/CloneManager/protocol_list'"
        type="file"
        editable="No"
        statshow="yes"
        elastic="no"
        display="yes"
        />
    </group>
  </group>
</template>
