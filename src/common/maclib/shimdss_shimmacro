"macro shimdss_shimmacro"
/* shimdss_shimmacro - maccro to return height of dss to spFidValue */

      fn=130000 
      lb=.6
      wft
      setref
      aph('select',-0.5p,0.5p)
      ai vs=100k 
      lb='n' wft tmsref
      sp=-0.5p wp=1.0p
      ds dc
      peak:$hgt,$frq
      write('line3','hgt = %3.1f',$hgt)
      $hw = 0
      $splits=0

/*
     dres($frq):$hw
     dres($frq,0.0055):$hw55
     dres($frq,0.0011):$hw11
     nll:$num
     $splits=$num-1
 */

/*
 * The optimizer tries to maximize the measurement. So if you want to
 * have something decrease, use its inverse or negative or something
 * like that. If this case, subtract * the half-width and the
 * line-splitting penalty
 */
/*
 * The relative importance of different measurements can be adjusted
 * with weighting factors
 *    return($htFactor*$hgt - $hwFactor*$hw - $splitFactor*$splits)
 * In addition to just the half-width, one might also want to factor
 * in the 0.55 and 0.11 widths
 *
 */
     return($hgt-$hw-$splits)

