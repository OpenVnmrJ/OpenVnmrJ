<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="NusSparse" element="pages" type="acquisition" >
  <group size="800 200"
    style="PlainText"
    label="NUS SPARSE"
    vq="SPARSE"
    show="if SPARSE='y' then $VALUE=1 else $VALUE=0 endif"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="NusSparse"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    >
    <button loc="420 70" size="110 20"
      style="Label3"
      label="Abort 3D Process"
      vq="curexp"
      vc="xcln3d(curexp+'/procdir/cln3d.fid')"
      bg="transparent"
      decor1="no"
      />
    <entry loc="10 80" size="190 20"
      style="Label4"
      vq="svfname"
      vc="svfname='$VALUE'"
      set="$VALUE=svfname"
      />
    <button loc="40 140" size="130 20"
      style="Label3"
      label="Restore Raw Data"
      vq="svfdif svfname"
      vc=" rt(svfdir+'/'+svfname) cp(svfdir+'/'+svfname + '/sampling.sch',curexp) "
      bg="transparent"
      decor1="no"
      />
    <button loc="550 170" size="140 20"
      style="Label3"
      label="restore original data"
      vq="curexp"
      vc="rt(curexp+'/procdir/orig') parCS  cp(curexp+'/procdir/orig.fid/sampling.sch',curexp)   wft(1) ds shell('rm -r ' +curexp+'/procdir') CSppp "
      show="exists(curexp + '/procdir/orig.fid','directory'):$edir if ($edir=1) then $VALUE=1 else $VALUE=0 endif "
      bg="transparent"
      decor1="no"
      />
    <label loc="650 30" size="30 20"
      style="Label3"
      label="-or-"
      />
    <button loc="40 110" size="130 20"
      style="Label3"
      label="Save Raw Data"
      vq="svfdif svfname"
      vc="BPsvf(svfdir+'/'+svfname)"
      bg="transparent"
      decor1="no"
      />
    <entry loc="10 40" size="190 20"
      style="Label4"
      vq="svfdir"
      vc="svfdir='$VALUE'"
      set="$VALUE=svfdir"
      />
    <button loc="140 20" size="60 20"
      style="Label3"
      label="Create"
      vq="svfdir"
      vc="mkdir(svfdir)"
      bg="transparent"
      decor1="no"
      />
    <group loc="210 120" size="190 40"
      vq="CS_cln"
      show="if CS_cln='y' then $VALUE=1 else $VALUE=0 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <label loc="30 20" size="80 20"
        style="Label4"
        label="Threshold:"
        vq="CS_cln"
        show="if(CS_cln='y') then $SHOW=1 else $SHOW=0 endif"
        />
      <check loc="0 0" size="90 20"
        style="Label4"
        label="de-noise"
        vq="CSdnoise CS_cln"
        vc="CSdnoise='y'"
        vc2="CSdnoise='n'"
        set="if (CSdnoise='y') then $VALUE=1 else $VALUE=0 endif"
        show="if (CS_cln='y') then $SHOW=1 else $SHOW=0 endif"
        />
      <entry loc="110 20" size="80 20"
        style="Label4"
        vq="CSthr CS_cln"
        vc="CSthr=$VALUE if (CSthr&lt;1.0) then CSthr = 1.0 endif"
        set="if (CSthr&lt;1.0) then CSthr = 1.0 endif $VALUE=CSthr"
        show="if (CS_cln='y') then $SHOW=1 else $SHOW=0 endif"
        digits="1"
        />
    </group>
    <check loc="210 100" size="60 20"
      style="Label4"
      label="Clean"
      vq="CS_cln"
      vc="CS_cln='y'"
      vc2="CS_cln='n'"
      set="if CS_cln='y' then $VALUE=1 else $VALUE=0 endif"
      />
    <check loc="210 80" size="190 20"
      style="Label4"
      label="inflate"
      vq="CS_inf"
      vc="CS_inf='y'"
      vc2="CS_inf='n'"
      set="if CS_inf='y' then $VALUE=1 else $VALUE=0 endif"
      />
    <check loc="210 60" size="170 20"
      style="Label4"
      label="Sensitivity Enhanced Data"
      vq="CS_se"
      vc="CS_se='y'"
      vc2="CS_se='n'"
      set="if CS_se='y' then $VALUE=1 else $VALUE=0 endif"
      />
    <check loc="210 40" size="100 20"
      style="Label4"
      label="Partial Region"
      vq="crmode"
      vc="CS_select(0) if not (crmode='b') then ds('toggle') endif"
      vc2="CSwp=0 if(crmode='b') then ds('toggle') endif"
      set="$VALUE=CSwp"
      />
    <group loc="310 40" size="90 20"
      vq="CSwp"
      show="if CSwp=0 then $VALUE=0 else $VALUE=1 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      useref="no"
      subtype="Untitled"
      >
      <selmenu loc="10 0" size="80 20"
        style="Label3"
        label="Width"
        vq="crmode"
        vc="CS_select($VALUE) if not (crmode='b') then ds('toggle') endif"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="sw/2"
          chval="2"
          />
        <mlabel 
          label="sw/4"
          chval="4"
          />
        <mlabel 
          label="sw/8"
          chval="8"
          />
        <mlabel 
          label="sw/16"
          chval="16"
          />
      </selmenu>
    </group>
    <check loc="210 20" size="180 20"
      style="Label4"
      label="Use Default Processing"
      vq="CS_dpars"
      vc="CS_dpars='y'"
      vc2="CS_dpars='n'"
      set="if CS_dpars='y' then $VALUE=1 else $VALUE=0 endif"
      />
    <label loc="210 0" size="180 20"
      style="Heading4"
      label="Step 2: Setting Options"
      justify="Left"
      />
    <label loc="590 140" size="160 20"
      style="Label3"
      label="&quot;ft2d done&quot; or &quot;ft3d done&quot;"
      />
    <label loc="580 120" size="190 20"
      style="Label3"
      label="Then use a display page after:"
      />
    <label loc="560 90" size="220 20"
      style="Label3"
      label="&quot;cln2d or cln3d processing finished&quot;"
      />
    <label loc="580 70" size="170 20"
      style="Label3"
      label="Use data after the message:"
      />
    <button loc="690 30" size="90 20"
      style="Label3"
      label="3D"
      vq="curexp"
      vc="$f=curexp+'/procdir/cln3d.fid' exists($f,'directory'):$e if($e) then rt($f) wft('noft',1) vsadj vs=vs/10 vs2d=1 ft3d('noft','f1f3','f2f3') else ft3d('f1f3','f2f3') endif"
      bg="transparent"
      decor1="no"
      />
    <button loc="550 30" size="90 20"
      style="Label3"
      label="2D"
      vq="ni2"
      vc="exists('ni2','parameter'):$e if($e) then if(ni2&gt;1) then wft2da('ni2') else wft2da endif else wft2da endif "
      bg="transparent"
      decor1="no"
      />
    <button loc="420 30" size="90 20"
      style="Label3"
      label="Process"
      vc="CSproc"
      show="exists(curexp + '/procdir/orig.fid','directory'):$edir if ($edir=1) then $VALUE=0 else $VALUE=1 endif "
      bg="transparent"
      decor1="no"
      />
    <button loc="700 170" size="80 20"
      style="Label3"
      label="Manual"
      vc="man('CS')"
      bg="transparent"
      decor1="no"
      />
    <label loc="60 180" size="290 20"
      style="Label3"
      label="NUS Software Contributed by Eriks Kupce, Agilent"
      />
    <label loc="10 160" size="470 20"
      style="Label3"
      label="Note: The sampling schedule is  &quot;sampling.sch&quot;  in the current experiment."
      />
    <label loc="410 0" size="120 20"
      style="Heading4"
      label="Step 3: Process"
      justify="Left"
      />
    <label loc="540 0" size="240 20"
      style="Heading4"
      label="Step 4: Prepare Data for Display"
      justify="Left"
      />
    <label loc="10 60" size="130 20"
      style="Label4"
      label="Stored Under Name:"
      />
    <label loc="10 20" size="110 20"
      style="Label4"
      label="Storage Directory:"
      />
    <label loc="10 0" size="180 20"
      style="Heading4"
      label="Step 1: Save Raw Data"
      justify="Left"
      />
  </group>
</template>
