<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="bpexpress_all" element="pages" type="sample" >
  <group size="730 265"
    style="PlainText"
    label="BioPackExpress"
    vq="layout BPexpress_gui"
    vc="exists('BPexpress_gui','parameter'):$e        if ( $e&gt;0)   then if (BPexpress_gui&gt;0)  then   BPexpress_gui=2 endif endif"
    vc2="exists('BPexpress_gui','parameter'):$e        if ( $e&gt;0)   then if  (BPexpress_gui&gt;0) then   BPexpress_gui=1 endif endif"
    show="$SHOW=0 exists('BPexpress_gui','parameter'):$e        if ( $e&gt;0)  then  if   (BPexpress_gui&gt;0) then $SHOW=1   endif endif"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="bpexpress_all"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="10 225" size="705 35"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="bpexpress_msg"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <textmessage loc="5 6" size="695 25"
        style="PlainText"
        vq="nuc_obs nuc_ni nuc_ni2 ni ni2 phase phase2  customflag cppauseflg sampling CStype"
        set="$smsg= ' '        BPexpress_guess_dimensions:$msg  $VALUE='current experiment '+ seqfil +  ' is set as: ' + $msg"
        />
    </group>
    <group loc="245 15" size="230 210"
      style="Heading1"
      label="Express setup"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="bpexpress_quick_setup"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <button loc="15 100" size="200 25"
        style="Heading2"
        label="CACB x CO x IP/AP &quot;3D&quot;"
        vq="nuc_ni sampling IPAP"
        vc="ni2=1 phase2=1 ni=sw1*TC phase=1,2   IPAP='i','a'  array='IPAP,phase' if (sampling='sparse') then CSschedule endif time"
        set="$VALUE=  nuc_ni +' x ' +nuc_obs + ' x IP/AP &quot;3D&quot; '"
        bg="VJBackground"
        vq2="nuc_obs nuc_ni"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="15 65" size="200 25"
        style="Heading2"
        label="CACB x CO In-Phase"
        vq="nuc_ni sampling IPAP"
        vc="IPAP='i' ni2=1 phase2=1 ni=sw1*TC phase=1,2  if (sampling='sparse') then CSschedule endif time"
        set="$VALUE=  nuc_ni +' x ' +nuc_obs + ' In-Phase'"
        bg="VJBackground"
        vq2="nuc_obs nuc_ni"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="15 135" size="200 25"
        style="Heading2"
        label="CACB x CA x CO x IP/AP &quot;4D&quot;"
        vc="ni=sw1*TC phase=1,2 ni2=sw2*(TC-2.0*gt2-2.0*gstab)  phase2=1,2 array='phase,phase2'   IPAP='i','a' array='IPAP,phase,phase2'   if (sampling='sparse') then CSschedule endif time"
        set="$VALUE=nuc_ni +' x ' +nuc_ni2 +' x '+ nuc_obs + ' x IP/AP &quot;4D&quot; '"
        bg="VJBackground"
        vq2="nuc_obs nuc_ni nuc_ni2"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="15 30" size="200 25"
        style="Heading2"
        label="CO First Increment"
        vq="nuc_obs "
        vc="IPAP='i' exists('ni','parameter'):$e  if ( ($e&gt;0)  ) then ni=0 phase=1 endif     exists('ni2','parameter'):$e2  if ( ($e2&gt;0)  ) then ni2=0 phase2=1 endif time"
        set="$VALUE= nuc_obs + ' First Increment '"
        bg="VJBackground"
        vq2="nuc_obs"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="15 170" size="200 25"
        style="Heading4"
        label="Acquire"
        vq="arraydim customflag cppauseflg sampling  "
        vc=" if (sampling='sparse') then CSschedule endif  if (arraydim=1) then ga else go endif exists('ni','parameter'):$e if ($e&gt;0.5) then vnmrjcmd('pnew','ni')     endif"
        show="$ENABLE=((cppauseflg='n') and (customflag='n'))*2-1"
        bg="VJBackground"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
    </group>
    <group loc="10 15" size="230 210"
      style="Heading1"
      label="Express parameters"
      bg="transparent"
      border="Etched"
      tab="no"
      enable="no"
      reference="single_scan_pw90"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <check loc="10 50" size="145 25"
        style="PlainText"
        label="start from 1H"
        vq="Hstart"
        vc="Hstart='y' dm='nyyy' dmm='cppp'"
        vc2="Hstart='n' dm='yyyy' dmm='pppp'  "
        set="if Hstart='y' then $VALUE=1 else $VALUE=0 endif"
        />
      <entry loc="125 25" size="35 20"
        style="PlainText"
        vq="nt"
        vc="nt=$VALUE time"
        set="$VALUE=nt"
        />
      <check loc="175 25" size="50 20"
        style="PlainText"
        label="NUS"
        vq="sampling"
        vc="sampling='sparse'  {setup_nus_cmd} "
        vc2="sampling='uniform' time"
        set="$VALUE=0 if (sampling='sparse') then $VALUE=1 endif"
        />
      <label loc="10 25" size="120 20"
        style="Label1"
        label="# transients per fid"
        />
    </group>
    <group loc="480 15" size="230 210"
      style="Heading1"
      label="Express process"
      vq="ni sampling"
      show="$SHOW=0 exists('sampling','parameter','processed'):$es if ($es&gt;0.5) then getvalue('sampling','processed'):$s if ($s&lt;&gt;'sparse') then $SHOW=1 endif endif"
      bg="transparent"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="bpexpress_proc"
      useref="no"
      subtype="Titled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <group loc="5 60" size="220 110"
        label="Process 2D"
        vq="ni"
        show="$SHOW=0 exists('ni','parameter'):$e   exists('ni','parameter','processed'):$e2  if ( ($e&gt;0.5)  and ($e2&gt;0.5) )  then $SHOW=1 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <button loc="70 5" size="140 25"
          style="Heading2"
          label="CACB x CO 2D"
          vq="ni   nuc_ni nuc_obs IPAP"
          vc="{proc_obs} {proc_ni} wft2da('ni',1)"
          set="$VALUE=  nuc_ni +' x ' +nuc_obs + ' 2D'"
          show="$SHOW=0   getvalue('ni','processed'):$ni if    ( ($ni&gt;1) and (size('IPAP')=1)  ) then $SHOW=1 endif"
          bg="VJBackground"
          vq2="nuc_obs nuc_ni"
          decor1="yes"
          halignment="Center"
          valignment="Center"
          />
        <check loc="10 5" size="65 25"
          style="Label1"
          label="LP x2"
          vq="proc1 ni"
          vc="BP_set_2x_lp('ni'):proc1"
          vc2="proc1='ft'"
          set="$VALUE=0 if (proc1='lp')   then $VALUE=1 endif"
          show="$VALUE=-1 getvalue('ni','processed'):$ni  if ($ni&gt;1)   then $VALUE=1 endif"
          />
      </group>
      <button loc="15 30" size="200 25"
        style="Heading2"
        label="CO First Increment"
        vq="nuc_obs"
        vc="{proc_obs}  wft(1)"
        set="$VALUE= nuc_obs +  ' First Increment '"
        bg="VJBackground"
        vq2="nuc_obs"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
    </group>
  </group>
</template>
