<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="SPARSE" element="pages" type="processing" >
  <group size="815 275"
    style="PlainText"
    label="NLS"
    vq="SPARSE"
    show="$SHOW=0 exists('SPARSE','parameter'):$e if $e=1 then if SPARSE='y' then $SHOW=1 else $SHOW=0 endif endif"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="SPARSE"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="0 5" size="795 260"
      bg="transparent"
      border="Etched"
      tab="no"
      enable="no"
      reference="clean_proc"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <textmessage loc="190 180" size="20 25"
        style="PlainText"
        label="16"
        vq="ni2"
        set="$VALUE=ni2"
        digits="0"
        />
      <textmessage loc="265 205" size="25 25"
        style="PlainText"
        label="64"
        vq="ni2max"
        set="$VALUE=ni2max"
        digits="0"
        />
      <textmessage loc="235 205" size="25 25"
        style="PlainText"
        label="128"
        vq="nimax"
        set="$VALUE=nimax"
        digits="0"
        />
      <label loc="260 205" size="15 25"
        style="Label1"
        label=","
        />
      <label loc="185 180" size="15 25"
        style="Label1"
        label=","
        />
      <label loc="5 180" size="150 25"
        style="Label1"
        label="Total increments (ni,ni2)"
        />
      <textmessage loc="160 180" size="25 25"
        style="PlainText"
        label="32"
        vq="ni"
        set="$VALUE=ni"
        digits="0"
        />
      <label loc="5 205" size="230 25"
        style="Label1"
        label="Extended increments (nimax, ni2max)"
        />
      <label loc="5 90" size="130 25"
        style="Label1"
        label="Stored under Name"
        />
      <label loc="5 230" size="470 25"
        style="Label1"
        label="Note: Sampling schedule must be &quot;sampling.sch&quot; and present in current exp"
        />
      <group loc="410 0" size="115 175"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <button loc="30 145" size="55 25"
          style="Interactive"
          label="Abort"
          vq="curexp"
          vc="xcln3d(curexp+'/procdir/cln3d.fid')"
          bg="transparent"
          decor1="no"
          halignment="Center"
          valignment="Center"
          />
        <button loc="20 55" size="70 25"
          style="Menu4"
          label="process"
          vc="CSproc"
          bg="transparent"
          decor1="no"
          halignment="Center"
          valignment="Center"
          />
        <label loc="0 5" size="115 25"
          style="Heading2"
          label="Step 3: Process"
          justify="Left"
          />
      </group>
      <button loc="600 220" size="100 25"
        style="Menu4"
        label="Manual"
        vc="man('CS')"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <button loc="575 170" size="150 25"
        style="Menu4"
        label="restore original data"
        vq="curexp"
        vc="rt(curexp+'/procdir/orig') cp(curexp+'/procdir/orig.fid/sampling.sch', curexp) parCS wft(1) ds shell('rm -r ' +curexp+'/procdir') CSppp "
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="545 85" size="210 25"
        style="Label1"
        label="(use after message &quot;cln2d or cln3d"
        />
      <label loc="550 105" size="240 25"
        style="Label1"
        label="processing finished&quot;. Then use a Display"
        />
      <label loc="550 125" size="230 25"
        style="Label1"
        label="page after  &quot;ft2d done&quot; or &quot;ft3d done&quot;)"
        />
      <label loc="200 5" size="180 25"
        style="Heading2"
        label="Step 2: Setting Options"
        justify="Left"
        />
      <button loc="665 55" size="60 25"
        style="Menu4"
        label="3D"
        vq="curexp"
        vc="$f=curexp+'/procdir/cln3d.fid' exists($f,'directory'):$e if($e) then rt($f) wft('noft',1) vsadj vs=vs/10 vs2d=1 ft3d('noft','f1f3','f2f3') else ft3d('f1f3','f2f3') endif"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="635 55" size="20 25"
        style="Label1"
        label="or"
        />
      <button loc="560 55" size="60 25"
        style="Menu4"
        label="2D"
        vq="ni2"
        vc="exists('ni2','parameter'):$e if($e) then if(ni2&gt;1) then wft2da('ni2') else wft2da endif else wft2da endif "
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <group loc="270 155" size="100 50"
        vq="CS_cln"
        show="if CS_cln='y' then $VALUE=1 else $VALUE=0 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <check loc="0 25" size="80 25"
          style="PlainText"
          label="de-noise"
          vq="CSdnoise CS_cln"
          vc="CSdnoise='y'"
          vc2="CSdnoise='n'"
          set="if (CSdnoise='y') then $VALUE=1 else $VALUE=0 endif"
          show="if (CS_cln='y') then $SHOW=1 else $SHOW=0 endif"
          />
        <entry loc="60 0" size="35 25"
          style="PlainText"
          vq="CSthr CS_cln"
          vc="CSthr=$VALUE if (CSthr&lt;1.0) then CSthr = 1.0 endif"
          set="if (CSthr&lt;1.0) then CSthr = 1.0 endif $VALUE=CSthr"
          show="if (CS_cln='y') then $SHOW=1 else $SHOW=0 endif"
          digits="1"
          />
        <label loc="0 0" size="60 25"
          style="Label1"
          label="threshold"
          vq="CS_cln"
          show="if(CS_cln='y') then $SHOW=1 else $SHOW=0 endif"
          />
      </group>
      <check loc="200 155" size="65 25"
        style="PlainText"
        label="CLEAN"
        vq="CS_cln"
        vc="CS_cln='y'"
        vc2="CS_cln='n'"
        set="if CS_cln='y' then $VALUE=1 else $VALUE=0 endif"
        />
      <check loc="200 130" size="65 25"
        style="PlainText"
        label="inflate"
        vq="CS_inf"
        vc="CS_inf='y'"
        vc2="CS_inf='n'"
        set="if CS_inf='y' then $VALUE=1 else $VALUE=0 endif"
        />
      <check loc="200 105" size="170 25"
        style="PlainText"
        label="sensitivity enhanced data"
        vq="CS_se"
        vc="CS_se='y'"
        vc2="CS_se='n'"
        set="if CS_se='y' then $VALUE=1 else $VALUE=0 endif"
        />
      <check loc="200 30" size="205 25"
        style="PlainText"
        label="use default processing params"
        vq="CS_dpars"
        vc="CS_dpars='y'"
        vc2="CS_dpars='n'"
        set="if CS_dpars='y' then $VALUE=1 else $VALUE=0 endif"
        />
      <check loc="200 55" size="100 25"
        style="PlainText"
        label="Partial Region"
        vq="crmode"
        vc="CS_select(0) if not (crmode='b') then ds('toggle') endif"
        vc2="CSwp=0 if(crmode='b') then ds('toggle') endif"
        set="$VALUE=CSwp"
        />
      <group loc="220 80" size="175 25"
        vq="CSwp"
        show="if CSwp=0 then $VALUE=0 else $VALUE=1 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <selmenu loc="0 0" size="155 25"
          style="PlainText"
          label="Use Region of Width:"
          vq="crmode"
          vc="CS_select($VALUE) if not (crmode='b') then ds('toggle') endif"
          bg="VJBackground"
          editable="No"
          >
          <mlabel 
            label="sw/2"
            chval="2"
            />
          <mlabel 
            label="sw/4"
            chval="4"
            />
          <mlabel 
            label="sw/8"
            chval="8"
            />
          <mlabel 
            label="sw/16"
            chval="16"
            />
        </selmenu>
      </group>
      <button loc="15 150" size="155 25"
        style="Menu4"
        label="Save Raw Data Now"
        vq="BPsvfdir svfname"
        vc="BPsvf(BPsvfdir+'/'+svfname)"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="5 5" size="170 25"
        style="Heading2"
        label="Step 1: Save Raw Data"
        justify="Left"
        />
      <entry loc="0 115" size="175 25"
        style="PlainText"
        vq="svfname"
        vc="svfname='$VALUE'"
        set="$VALUE=svfname"
        />
      <entry loc="5 60" size="175 25"
        style="PlainText"
        vq="BPsvfdir"
        vc="BPsvfdir='$VALUE'"
        set="$VALUE=BPsvfdir"
        />
      <button loc="115 35" size="55 25"
        style="Label3"
        label="Create"
        vq="BPsvfdir"
        vc="mkdir(BPsvfdir)"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="5 35" size="105 25"
        style="Label1"
        label="Storage Directory"
        />
      <label loc="540 5" size="240 25"
        style="Heading2"
        label="Step 4: Prepare Data for Display"
        justify="Left"
        />
    </group>
  </group>
</template>
