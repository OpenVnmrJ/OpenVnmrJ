<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<template name="DigitalFilter_BioPack" element="pages" type="acquisition" >
  <group size="835 325"
    style="PlainText"
    label="Sampling"
    bg="transparent"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="DigitalFilter_BioPack"
    useref="no"
    subtype="Untitled"
    expanded="yes"
    rows="1"
    columns="1"
    >
    <group loc="260 0" size="575 270"
      vq="sampling"
      show="if ((sampling='sparse') or (sampling='e'))  then $SHOW=1 else $SHOW=0 endif"
      bg="transparent"
      border="None"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      reference="NUSweighting_new"
      useref="no"
      subtype="Minor"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <group loc="295 0" size="270 265"
        vq="CSwt BP_sparse_advanced"
        show="if ((CSwt='y') and (BP_sparse_advanced='y')) then $SHOW=1 else $SHOW=0 endif"
        bg="transparent"
        border="Etched"
        tab="no"
        enable="no"
        reference="NUS_scheduler"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <group loc="5 95" size="265 65"
          vq="CSinp"
          show="$SHOW=1 if(CSinp='n') then $SHOW=0 endif"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          rows="1"
          columns="1"
          >
          <group loc="0 25" size="225 30"
            vq="CSshape"
            show="$SHOW=0 if(CSshape='Pbox') then $SHOW=1 endif"
            bg="transparent"
            border="Etched"
            tab="no"
            enable="no"
            useref="no"
            subtype="Untitled"
            rows="1"
            columns="1"
            >
            <entry loc="125 0" size="85 25"
              style="PlainText"
              vq="CSinp"
              vc="CSinp='$VALUE'"
              set="$VALUE=CSinp"
              show="$ENABLE=1"
              disable="Grayed out"
              />
            <label loc="0 0" size="125 25"
              style="PlainText"
              label="Pbox input filename:"
              justify="Left"
              />
          </group>
          <selmenu loc="5 0" size="90 25"
            style="PlainText"
            vq="CSshape"
            vc="CSshape='$VALUE'"
            set="$VALUE=CSshape"
            bg="VJBackground"
            editable="Yes"
            >
            <mlabel 
              label="exp05"
              chval="gexp-0.5"
              />
            <mlabel 
              label="exp1"
              chval="gexp"
              />
            <mlabel 
              label="exp2"
              chval="gexp-2"
              />
            <mlabel 
              label="hgaus"
              chval="ghgaus"
              />
            <mlabel 
              label="cos"
              chval="gcos"
              />
            <mlabel 
              label="cos2"
              chval="gcos2"
              />
            <mlabel 
              label="ramp"
              chval="grampd"
              />
            <mlabel 
              label="sin(J)"
              chval="jsin"
              />
            <mlabel 
              label="cos(J)"
              chval="jcos"
              />
            <mlabel 
              label="Pbox"
              chval="Pbox"
              />
          </selmenu>
          <group loc="105 0" size="120 25"
            vq="CSshape"
            show="if(CSshape='jsin') or (CSshape='jcos') then $SHOW=1 else $SHOW=0 endif"
            bg="transparent"
            border="None"
            tab="no"
            enable="no"
            useref="no"
            subtype="Untitled"
            rows="1"
            columns="1"
            >
            <entry loc="30 0" size="45 25"
              style="PlainText"
              vq="r7"
              vc="r7=$VALUE"
              set="$VALUE=r7"
              />
            <label loc="75 0" size="30 25"
              style="PlainText"
              label="(Hz)"
              vq="dimension"
              justify="Left"
              />
            <label loc="5 0" size="25 25"
              style="PlainText"
              label="J ="
              justify="Left"
              />
          </group>
        </group>
        <group loc="5 200" size="250 65"
          label="Weighting Profile"
          bg="transparent"
          border="Etched"
          side="Top"
          justify="Left"
          tab="no"
          enable="no"
          reference="WeightingProfile"
          useref="no"
          subtype="Titled"
          expanded="yes"
          rows="1"
          columns="1"
          >
          <button loc="25 15" size="125 25"
            style="Menu4"
            label="Build and Show"
            vq="CSshowpro"
            vc="CSshowpro='y' CSmkpro CSdpro"
            bg="transparent"
            decor1="no"
            halignment="Center"
            valignment="Center"
            />
          <button loc="165 15" size="60 25"
            style="Label2"
            label="Delete"
            vq="CSdomain"
            vc="CSrmpro(CSdomain)"
            bg="transparent"
            decor1="no"
            halignment="Center"
            valignment="Center"
            />
          <button loc="50 45" size="130 20"
            style="PlainText"
            label="Make Schedule"
            vc="CSmksch"
            bg="transparent"
            decor1="no"
            halignment="Center"
            valignment="Center"
            />
        </group>
        <group loc="5 95" size="255 95"
          vq="CSinp"
          show="$SHOW=0 if(CSinp='n') then $SHOW=1 endif"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          reference="windowfunctions"
          useref="no"
          subtype="Untitled"
          expanded="yes"
          rows="1"
          columns="1"
          >
          <label loc="135 70" size="35 20"
            style="Label1"
            label="shift"
            justify="Center"
            />
          <entry loc="170 70" size="50 20"
            style="PlainText"
            vq="gf1 gfs1"
            vc="gfs1=$VALUE"
            set="$VALUE=gfs1"
            show="onparams('gf1','gfs1'):$VALUE"
            disable="Grayed out"
            />
          <check loc="220 70" size="20 20"
            style="Label1"
            vq="gfs1"
            vc="gfs1='y'"
            vc2="gfs1='n'"
            set="on('gfs1'):$VALUE"
            />
          <check loc="220 50" size="20 20"
            style="Label1"
            vq="sbs1"
            vc="sbs1='y'"
            vc2="sbs1='n'"
            set="on('sbs1'):$VALUE"
            />
          <entry loc="170 50" size="50 20"
            style="PlainText"
            vq="sb1 sbs1"
            vc="sbs1=$VALUE"
            set="$VALUE=sbs1"
            show="onparams('sb1','sbs1'):$VALUE"
            digits="3"
            disable="Grayed out"
            />
          <label loc="135 50" size="35 20"
            style="Label1"
            label="shift"
            justify="Center"
            />
          <entry loc="65 30" size="50 20"
            style="PlainText"
            vq="lb1"
            vc="lb1=$VALUE"
            set="$VALUE=lb1"
            show="on('lb1'):$VALUE"
            digits="1"
            disable="Grayed out"
            />
          <check loc="115 70" size="20 20"
            style="Label1"
            vq="gf1 gfs1"
            vc="gf1='y'"
            vc2="gf1='n'"
            set="on('gf1'):$VALUE"
            />
          <entry loc="65 70" size="50 20"
            style="PlainText"
            vq="gf1"
            vc="gf1=$VALUE"
            set="$VALUE=gf1"
            show="on('gf1'):$VALUE"
            digits="3"
            disable="Grayed out"
            />
          <label loc="10 70" size="55 20"
            style="Label1"
            label="Gaussian"
            justify="Left"
            />
          <label loc="10 50" size="55 20"
            style="Label1"
            label="Sinebell"
            justify="Left"
            />
          <label loc="10 30" size="55 20"
            style="Label1"
            label="Line bd."
            justify="Left"
            />
          <entry loc="65 50" size="50 20"
            style="PlainText"
            vq="sb1"
            vc="sb1=$VALUE"
            set="$VALUE=sb1"
            show="on('sb1'):$VALUE"
            digits="3"
            disable="Grayed out"
            />
          <check loc="115 50" size="20 20"
            style="Label1"
            vq="sb1 sbs1"
            vc="sb1='y'"
            vc2="sb1='n'"
            set="on('sb1'):$VALUE"
            />
          <check loc="115 30" size="20 20"
            style="Label1"
            vq="lb1"
            vc="lb1='y'"
            vc2="lb1='n'"
            set="on('lb1'):$VALUE"
            />
          <label loc="5 5" size="245 25"
            style="PlainText"
            label="Set functions below, then click &quot;Build&quot;"
            vq="dimension"
            justify="Left"
            />
        </group>
        <radio loc="105 75" size="150 25"
          style="PlainText"
          label="Use window functions"
          vq="CSinp"
          vc="CSinp='n'"
          vc2="CSinp=''"
          />
        <radio loc="5 75" size="95 25"
          style="PlainText"
          label="Use Pbox"
          vq="CSinp"
          vc="CSinp=''"
          vc2="CSinp='n'"
          set="if (CSinp='') then $VALUE=1 else $VALUE=0 endif"
          />
        <group loc="25 50" size="205 25"
          bg="transparent"
          border="None"
          tab="no"
          enable="no"
          useref="no"
          subtype="Untitled"
          rows="1"
          columns="1"
          >
          <textmessage loc="160 0" size="20 25"
            style="PlainText"
            label=" "
            vq="ni3"
            set="$VALUE='' exists('ni3','parameter'):$e if ($e=1) then if (ni3&gt;1) then $VALUE='ni3' endif endif"
            />
          <textmessage loc="135 0" size="20 25"
            style="PlainText"
            label=" "
            vq="ni2"
            set="$VALUE='' exists('ni2','parameter'):$e if $e=1 then if ni2&gt;1 then $VALUE='ni2' endif endif"
            show="$VALUE=0 exists('ni2','parameter'):$e if $e=1 then if ni2&gt;1 then $VALUE=1 endif endif"
            />
          <textmessage loc="115 0" size="20 25"
            style="PlainText"
            label="ni"
            set="$VALUE='ni'"
            />
          <label loc="5 0" size="110 25"
            style="PlainText"
            label="Active domains:"
            justify="Left"
            />
        </group>
        <selmenu loc="120 25" size="50 25"
          style="Heading3"
          vq="CSdomain"
          vc="CSdomain=$VALUE"
          set="$VALUE=CSdomain"
          bg="VJBackground"
          editable="No"
          >
          <mlabel 
            label="ni"
            chval="1"
            />
          <mlabel 
            label="ni2"
            chval="2"
            />
          <mlabel 
            label="ni3"
            chval="3"
            />
        </selmenu>
        <label loc="10 25" size="110 25"
          style="Menu4"
          label="Select domain:"
          justify="Left"
          />
        <label loc="5 5" size="225 25"
          style="Heading2"
          label="Set Up Weighted Sampling"
          />
      </group>
      <check loc="10 120" size="140 25"
        style="PlainText"
        label="Advanced Options"
        vq="BP_sparse_advanced"
        vc="BP_sparse_advanced='y'"
        vc2="BP_sparse_advanced='n'"
        set="if (BP_sparse_advanced='y')  then $VALUE=1 else $VALUE=0 endif"
        />
      <button loc="190 120" size="75 25"
        style="PlainText"
        label="manual"
        vc="man('CSschedule') vnmrjcmd('setpage','Acquire','Text Output')"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <group loc="5 155" size="285 115"
        vq="BP_sparse_advanced"
        show="if (BP_sparse_advanced='y') then $SHOW=1 else $SHOW=0 endif"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <check loc="125 90" size="55 25"
          style="PlainText"
          label="Index"
          vq="CStype"
          vc="CStype='i' "
          vc2="CStype='a'  "
          set="if CStype='i'  then $VALUE=1 else $VALUE=0 endif"
          />
        <button loc="145 0" size="130 20"
          style="PlainText"
          label="Delete Schedule"
          vc="CSrmsch"
          bg="transparent"
          decor1="no"
          halignment="Center"
          valignment="Center"
          />
        <button loc="145 20" size="130 20"
          style="PlainText"
          label="Display Schedule"
          vc="CSdsch"
          bg="transparent"
          decor1="no"
          halignment="Center"
          valignment="Center"
          />
        <button loc="0 0" size="130 20"
          style="PlainText"
          label="Make Schedule"
          vc="CSmksch"
          bg="transparent"
          decor1="no"
          halignment="Center"
          valignment="Center"
          />
        <button loc="0 20" size="130 20"
          style="PlainText"
          label="Show Schedule List"
          vc="NUSshowschedule"
          bg="transparent"
          decor1="no"
          halignment="Center"
          valignment="Center"
          />
        <label loc="5 45" size="50 25"
          style="PlainText"
          label="CSseed]"
          justify="Left"
          />
        <entry loc="55 45" size="45 25"
          style="PlainText"
          vq="CSseed"
          vc="CSseed='$VALUE'"
          set="$VALUE=CSseed"
          disable="Grayed out"
          />
        <check loc="125 45" size="140 25"
          style="PlainText"
          label="Weighted Sampling"
          vq="CSwt CStype"
          vc="CStype='i' CSwt='y'"
          vc2="CSwt='n'"
          set="if ((CSwt='y') and (CStype='i')) then $VALUE=1 else $VALUE=0 endif"
          />
        <label loc="5 70" size="60 25"
          style="Label1"
          label="Sampling:"
          />
        <check loc="65 70" size="65 20"
          style="PlainText"
          label="Sparse"
          vq="sampling "
          vc="sampling='sparse' "
          vc2="sampling='e'  "
          set="if sampling='sparse'  then $VALUE=1 else $VALUE=0 endif"
          />
        <check loc="125 70" size="65 20"
          style="PlainText"
          label="Elliptical"
          vq="sampling "
          vc="sampling='e' "
          vc2="sampling='sparse'  "
          set="if sampling='e'  then $VALUE=1 else $VALUE=0 endif"
          />
        <check loc="195 70" size="90 20"
          style="Label1"
          label="Sequential"
          vq="CSseed"
          vc="if (CSseed&lt;0) then CSseed=-CSseed endif  if (CStype='a' or CStype='y' or CStype='') then CSschedule endif"
          vc2="if (CSseed&gt;0) then CSseed=-CSseed endif  if (CStype='a' or CStype='y' or CStype='') then CSschedule endif"
          set="$VALUE=(CSseed&gt;=0)*2-1"
          />
        <label loc="5 90" size="60 25"
          style="Label1"
          label="Schedule:"
          />
        <check loc="65 90" size="55 25"
          style="PlainText"
          label="Auto"
          vq="CStype CSwt"
          vc="CStype='a' CSwt='n'"
          vc2="CStype='i'  "
          set="if ((CStype='a') and (CSwt='n')) then $VALUE=1 else $VALUE=0 endif"
          />
        <check loc="195 90" size="55 25"
          style="PlainText"
          label="Delays"
          vq="CStype CSwt"
          vc="CStype='d' CSwt='n'"
          vc2="CStype='a'  CSwt='n'"
          set="if ((CStype='d') and (CSwt='n'))  then $VALUE=1 else $VALUE=0 endif"
          />
      </group>
      <group loc="195 5" size="45 110"
        vq="ni2"
        show="exists('ni2','parameter'):$SHOW"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <check loc="5 80" size="35 25"
          style="PlainText"
          vq="phase2"
          vc="exists('phase2','parameter'):$e if $e=1 then phase2=1,2 endif"
          vc2="exists('phase2','parameter'):$e if $e=1 then phase2=1 endif"
          set="$VALUE=0 exists('phase2','parameter'):$e if $e=1 then $s=size('phase2') if($s&gt;1) then $VALUE=1 else $VALUE=0 endif endif"
          />
        <label loc="0 0" size="45 25"
          style="PlainText"
          label="ni2(t2)"
          justify="Left"
          />
        <entry loc="5 55" size="35 25"
          style="PlainText"
          vq="CSdensity2"
          vc="CSdensity2=$VALUE"
          set="$VALUE=CSdensity2 "
          disable="Grayed out"
          />
        <entry loc="5 30" size="35 25"
          style="PlainText"
          vq="ni2"
          vc="exists('ni2','parameter'):$e if ($e=1) then ni2=$VALUE endif "
          set="$VALUE=0 exists('ni2','parameter'):$e if ($e=1) then $VALUE=ni2 endif "
          disable="Grayed out"
          />
      </group>
      <label loc="135 60" size="25 25"
        style="Label1"
        label="(%)"
        />
      <check loc="160 85" size="30 25"
        style="PlainText"
        vq="phase"
        vc="phase=1,2"
        vc2="phase=1"
        set="$s=size('phase') if($s&gt;1) then $VALUE=1 else $VALUE=0 endif"
        />
      <label loc="30 85" size="100 25"
        style="PlainText"
        label="Hypercomplex"
        justify="Left"
        />
      <label loc="30 35" size="100 25"
        style="PlainText"
        label="Final Increment"
        justify="Left"
        />
      <label loc="30 60" size="110 25"
        style="Label1"
        label="Sampling Density:"
        />
      <entry loc="160 60" size="30 25"
        style="PlainText"
        vq="CSdensity"
        vc="CSdensity=$VALUE "
        set="$VALUE=CSdensity"
        disable="Grayed out"
        />
      <entry loc="160 35" size="30 25"
        style="PlainText"
        vq="ni phase"
        vc="ni=$VALUE"
        set="$VALUE=ni"
        disable="Grayed out"
        />
      <label loc="155 5" size="40 25"
        style="PlainText"
        label="ni (t1)"
        justify="Left"
        />
      <group loc="240 5" size="45 110"
        vq="ni3"
        show="exists('ni3','parameter'):$SHOW"
        bg="transparent"
        border="None"
        side="Top"
        justify="Left"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <label loc="5 0" size="40 25"
          style="PlainText"
          label="ni3(t3)"
          justify="Left"
          />
        <entry loc="5 30" size="30 25"
          style="PlainText"
          vq="ni3"
          vc="exists('ni3','parameter'):$e if ($e=1) then  ni3=$VALUE endif "
          set="$VALUE=0 exists('ni3','parameter'):$e if ($e=1) then $VALUE=ni3 endif "
          disable="Grayed out"
          />
        <entry loc="5 55" size="30 25"
          style="PlainText"
          vq="CSdensity3"
          vc="CSdensity3=$VALUE"
          set="$VALUE=CSdensity3"
          disable="Grayed out"
          />
        <check loc="5 80" size="50 25"
          style="PlainText"
          vq="phase3"
          vc="exists('phase3','parameter'):$e if $e=1 then phase3=1,2 endif"
          vc2="exists('phase3','parameter'):$e if $e=1 then phase3=1 endif"
          set="$VALUE=0 exists('phase3','parameter'):$e if $e=1 then $s=size('phase3') if($s&gt;1) then $VALUE=1 else $VALUE=0 endif endif"
          />
      </group>
      <label loc="10 5" size="130 25"
        style="Heading2"
        label="Sparse Sampling"
        />
    </group>
    <group loc="255 0" size="525 315"
      vq="sampling"
      show="if sampling='o' then $SHOW=1 else $SHOW=0 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="MDD_acq"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="235 280" size="250 25"
        style="Label1"
        label="Orekov, Swedish NMR Center, Gothenburg"
        />
      <label loc="10 280" size="230 25"
        style="Label1"
        label="NUS Software Contributed by Vladislav"
        />
      <check loc="230 245" size="175 25"
        style="PlainText"
        label="Show First Line of Schedule"
        vq="printSP"
        vc="printSP='y'"
        vc2="printSP='n'"
        set="if printSP='y' then $VALUE=1 else $VALUE=0 endif"
        />
      <selmenu loc="5 245" size="170 25"
        style="PlainText"
        label="Similar Peak Intensities"
        vq="CEXP"
        vc="CEXP='$VALUE'"
        set="$VALUE=CEXP"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="In t1 only"
          chval="ynn"
          />
        <mlabel 
          label="In t2 only"
          chval="nyn"
          />
        <mlabel 
          label="In t1 and t2"
          chval="yyn"
          />
        <mlabel 
          label="none"
          chval="nnn"
          />
      </selmenu>
      <selmenu loc="5 210" size="110 25"
        style="PlainText"
        label="Constant Time"
        vq="CT_SP"
        vc="CT_SP='$VALUE'"
        set="$VALUE=CT_SP"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="CT in t1 only"
          chval="ynn"
          />
        <mlabel 
          label="CT in t2 only"
          chval="nyn"
          />
        <mlabel 
          label="CT in t1 and t2"
          chval="yyn"
          />
        <mlabel 
          label="no CT"
          chval="nnn"
          />
      </selmenu>
      <label loc="5 0" size="240 25"
        style="Heading2"
        label="Orekhov Method for NUS"
        justify="Left"
        />
      <button loc="320 180" size="160 25"
        style="Label2"
        label="Set Sampling Schedule"
        vc="BP_NLSset"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <button loc="320 215" size="160 25"
        style="Label2"
        label="Check Conditions"
        vc="BP_NLScheck"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <button loc="190 215" size="120 25"
        style="PlainText"
        label="Show Manual"
        vc="clear man('NLS')"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <button loc="192 184" size="120 24"
        style="PlainText"
        label="Show Parameters"
        vc="clear dgnls write('line3','Use Text Output Page to View Parameter Values')"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="8 120" size="224 24"
        style="PlainText"
        label="Active Coupling (for non-CT case)"
        justify="Left"
        />
      <label loc="8 96" size="240 24"
        style="PlainText"
        label="Estimated T2 (sec) for Sampled Nucleus"
        justify="Left"
        />
      <label loc="8 72" size="240 24"
        style="PlainText"
        label="Increment multipliers (product = #incrs)"
        justify="Left"
        />
      <entry loc="264 120" size="48 24"
        style="PlainText"
        vq="Jsp"
        vc="Jsp=$VALUE"
        set="$VALUE=Jsp"
        digits="1"
        disable="Grayed out"
        />
      <entry loc="264 96" size="48 24"
        style="PlainText"
        vq="T2sp"
        vc="T2sp=$VALUE"
        set="$VALUE=T2sp"
        digits="3"
        disable="Grayed out"
        />
      <entry loc="264 72" size="48 24"
        style="PlainText"
        vq="ni"
        vc="ni=$VALUE"
        set="$VALUE=ni"
        disable="Grayed out"
        />
      <entry loc="264 48" size="48 24"
        style="PlainText"
        vq="nimax"
        vc="nimax=$VALUE"
        set="$VALUE=nimax"
        disable="Grayed out"
        />
      <label loc="8 48" size="264 24"
        style="PlainText"
        label="Max. Increments for Linear Sampling Case"
        justify="Left"
        />
      <group loc="376 24" size="48 120"
        vq="ni3"
        show="exists('ni3','parameter'):$SHOW"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <entry loc="0 24" size="48 24"
          style="PlainText"
          vq="ni3max"
          vc="ni3max=$VALUE"
          set="$VALUE=ni3max"
          disable="Grayed out"
          />
        <entry loc="0 48" size="48 24"
          style="PlainText"
          vq="ni3"
          vc="ni3=$VALUE"
          set="$VALUE=ni3"
          disable="Grayed out"
          />
        <entry loc="0 72" size="48 24"
          style="PlainText"
          vq="T2sp3"
          vc="T2sp3=$VALUE"
          set="$VALUE=T2sp3"
          digits="3"
          disable="Grayed out"
          />
        <entry loc="0 96" size="48 24"
          style="PlainText"
          vq="Jsp3"
          vc="Jsp3=$VALUE"
          set="$VALUE=Jsp3"
          digits="1"
          disable="Grayed out"
          />
        <label loc="8 0" size="32 24"
          style="PlainText"
          label="In t3"
          justify="Left"
          />
      </group>
      <group loc="320 24" size="48 120"
        vq="ni2"
        show="exists('ni2','parameter'):$SHOW"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <entry loc="0 96" size="48 24"
          style="PlainText"
          vq="Jsp2"
          vc="Jsp2=$VALUE"
          set="$VALUE=Jsp2"
          digits="1"
          disable="Grayed out"
          />
        <entry loc="0 72" size="48 24"
          style="PlainText"
          vq="T2sp2"
          vc="T2sp2=$VALUE"
          set="$VALUE=T2sp2"
          digits="3"
          disable="Grayed out"
          />
        <entry loc="0 48" size="48 24"
          style="PlainText"
          vq="ni2"
          vc="ni2=$VALUE"
          set="$VALUE=ni2"
          disable="Grayed out"
          />
        <entry loc="0 24" size="48 24"
          style="PlainText"
          vq="ni2max"
          vc="ni2max=$VALUE"
          set="$VALUE=ni2max"
          disable="Grayed out"
          />
        <label loc="8 0" size="32 24"
          style="PlainText"
          label="In t2"
          justify="Left"
          />
      </group>
      <label loc="272 24" size="32 24"
        style="PlainText"
        label="In t1"
        justify="Left"
        />
      <entry loc="96 24" size="24 24"
        style="PlainText"
        vq="NDIM"
        vc="NDIM=$VALUE"
        set="$VALUE=NDIM"
        disable="Grayed out"
        />
      <label loc="8 24" size="88 24"
        style="PlainText"
        label="# Dimensions"
        justify="Left"
        />
    </group>
    <group loc="255 0" size="515 310"
      vq="sampling"
      show="if sampling='a' then $SHOW=1 else $SHOW=0 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="ASCOM"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="15 260" size="435 25"
        style="PlainText"
        label="Contributed by Lescop, Schanda, Rasia and Brutscher, Grenoble"
        />
      <button loc="112 224" size="176 24"
        style="PlainText"
        label="Show Manual (Text Output Page)"
        vc="man('ASCOMP')"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <button loc="208 192" size="72 24"
        style="PlainText"
        label="Process"
        vc="BPBestSW='y' BPBestSW1b(r4,r5) destroy('BPBestSW')"
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <label loc="48 192" size="168 24"
        style="PlainText"
        label="Then Click Process Button:"
        />
      <entry loc="312 168" size="32 24"
        style="PlainText"
        vq="r5"
        vc="r5=$VALUE "
        set="$VALUE=r5"
        disable="Grayed out"
        />
      <label loc="208 168" size="104 24"
        style="PlainText"
        label="F2 Linewidth (Hz):"
        />
      <entry loc="152 168" size="32 24"
        style="PlainText"
        vq="r4"
        vc="r4=$VALUE "
        set="$VALUE=r4"
        disable="Grayed out"
        />
      <label loc="48 168" size="104 24"
        style="PlainText"
        label="F1 Linewidth (Hz):"
        />
      <label loc="16 144" size="288 24"
        style="PlainText"
        label="Enter Representative Linewidths in F1 and F2:"
        />
      <label loc="120 120" size="64 24"
        style="Label3"
        label="or,"
        />
      <label loc="88 88" size="184 24"
        style="PlainText"
        label=", and then use the &quot;Enter&quot; key"
        />
      <entry loc="40 88" size="40 24"
        style="PlainText"
        vq="BPBestSW n1"
        vc="n1='$VALUE' BPBestSW='y' BPBestSW1b destroy('BPBestSW')"
        set="$VALUE=n1"
        disable="Grayed out"
        />
      <label loc="16 64" size="272 24"
        style="PlainText"
        label="Enter # of Peak with Representative Linewidth"
        />
      <button loc="272 32" size="48 24"
        style="PlainText"
        label="Edit"
        vc="$path=curexp+'/peaks.txt' shelli('vnmr_vi','&quot;'+$path+'&quot;'):$dum "
        bg="transparent"
        decor1="yes"
        halignment="Center"
        valignment="Center"
        />
      <label loc="16 32" size="272 24"
        style="PlainText"
        label="Adjust Peak Pick List (in curexp), if needed:"
        />
      <label loc="0 0" size="248 24"
        style="Heading2"
        label="Automatic Spectral Compression"
        />
    </group>
    <group loc="255 0" size="500 315"
      vq="sampling"
      show="if sampling='k' then $SHOW=1 else $SHOW=0 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="MFT"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <radio loc="400 270" size="80 25"
        style="PlainText"
        label="NMRdraw"
        vq="output_format"
        vc="output_format='d'"
        vc2="output_format='s'"
        set="$VALUE=output_format"
        />
      <radio loc="400 250" size="80 25"
        style="PlainText"
        label="Sparky"
        vq="ourput_format"
        vc="output_format='s'"
        vc2="output_format='d'"
        set="$VALUE=output_format"
        />
      <label loc="355 255" size="50 20"
        style="Label1"
        label="Output:"
        />
      <label loc="345 100" size="65 25"
        style="Label1"
        label="t2max"
        />
      <check loc="125 45" size="40 25"
        style="PlainText"
        label="opt"
        vq="tab_opt"
        vc="tab_opt='y'"
        vc2="tab_opt='n'"
        set="if(tab_opt='y') then $VALUE=1 else $VALUE=0 endif"
        show="if(samp_type='u' or samp_type='g' or samp_type='e') then $SHOW=1 else $SHOW=0 endif"
        />
      <label loc="15 10" size="235 25"
        style="Heading2"
        label="Kozminski Method for NUS"
        />
      <selmenu loc="10 45" size="105 25"
        style="PlainText"
        label="Set Method"
        vq="samp_type"
        vc="samp_type='$VALUE'"
        set="$VALUE=samp_type"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="gauss"
          chval="g"
          />
        <mlabel 
          label="exp"
          chval="e"
          />
        <mlabel 
          label="random"
          chval="u"
          />
        <mlabel 
          label="g/r"
          chval="m"
          />
        <mlabel 
          label="e/r"
          chval="n"
          />
        <mlabel 
          label="spiral"
          chval="s"
          />
        <mlabel 
          label="radial"
          chval="r"
          />
      </selmenu>
      <selmenu loc="240 45" size="255 25"
        style="PlainText"
        label="See Text Output Page for  Manual For:"
        vc="man('$VALUE')"
        bg="VJBackground"
        editable="No"
        >
        <mlabel 
          label="Explicit Sampling"
          chval="EXPL_samp"
          />
        <mlabel 
          label="Changing Pulse Sequence"
          chval="EXPL_samp_seq"
          />
        <mlabel 
          label="MFT Processing"
          chval="EXPL_samp2"
          />
        <mlabel 
          label="Files"
          chval="README_ESMFT"
          />
        <mlabel 
          label="License"
          chval="LICENSE_ESMFT"
          />
      </selmenu>
      <label loc="240 75" size="50 25"
        style="Label1"
        label="ni"
        />
      <entry loc="290 75" size="50 25"
        style="PlainText"
        vq="ni"
        vc="ni=$VALUE density=ni/sw1/sw2/t1max/t2max*100"
        set="$VALUE=ni"
        />
      <label loc="240 100" size="65 25"
        style="Label1"
        label="t1max"
        />
      <entry loc="290 100" size="50 25"
        style="PlainText"
        vq="t1max"
        vc="t1max=$VALUE density=ni/sw1/sw2/t1max/t2max*100"
        set="$VALUE=t1max"
        />
      <label loc="345 75" size="50 25"
        style="Label1"
        label="array"
        />
      <textmessage loc="390 75" size="95 25"
        style="PlainText"
        label=" "
        vq="array"
        set="$VALUE=array"
        digits="0"
        />
      <entry loc="390 100" size="55 25"
        style="PlainText"
        vq="t2max"
        vc="t2max=$VALUE density=ni/sw1/sw2/t1max/t2max*100"
        set="$VALUE=t2max"
        />
      <group loc="10 110" size="185 25"
        label="spiral"
        vq="samp_type"
        show="if (samp_type='s') then $SHOW=1 else $SHOW=0 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="spiral"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <label loc="0 0" size="60 20"
          style="Label1"
          label="n rounds"
          />
        <entry loc="73 0" size="80 20"
          style="PlainText"
          vq="n_rounds"
          vc="n_rounds=$VALUE"
          set="$VALUE=n_rounds"
          />
      </group>
      <group loc="25 105" size="150 30"
        label="gauss"
        vq="samp_type"
        show="if (samp_type='g' or samp_type='e' or samp_type='m' or samp_type='n') then $SHOW=1 else $SHOW=0 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="gauss"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <entry loc="70 0" size="80 20"
          style="PlainText"
          vq="sigma"
          vc="sigma=$VALUE"
          set="$VALUE=sigma"
          />
        <label loc="0 0" size="60 20"
          style="Label1"
          label="sigma"
          />
      </group>
      <group loc="10 75" size="150 80"
        label="radial"
        vq="samp_type"
        show="if(samp_type='r') then $SHOW=1 else $SHOW=0 endif"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        reference="radial"
        useref="no"
        subtype="Untitled"
        expanded="yes"
        rows="1"
        columns="1"
        >
        <entry loc="60 0" size="80 20"
          style="PlainText"
          vq="phi_0"
          vc="phi_0=$VALUE"
          set="$VALUE=phi_0"
          />
        <entry loc="60 30" size="80 20"
          style="PlainText"
          vq="d_phi"
          vc="d_phi=$VALUE"
          set="$VALUE=d_phi"
          />
        <entry loc="60 60" size="80 20"
          style="PlainText"
          vq="n_phi"
          vc="n_phi=$VALUE"
          set="$VALUE=n_phi"
          />
        <label loc="0 60" size="60 20"
          style="Label1"
          label="n lines"
          />
        <label loc="0 30" size="60 20"
          style="Label1"
          label="delta phi"
          />
        <label loc="0 0" size="60 20"
          style="Label1"
          label="first phi"
          />
      </group>
      <button loc="215 130" size="145 25"
        style="PlainText"
        label="Create New Schedule"
        vc="BP_TABset"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <button loc="375 130" size="110 25"
        style="PlainText"
        label="View Schedule"
        vc="BP_PLOTset"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="350 160" size="65 25"
        style="Label1"
        label="F3F1 diff"
        />
      <entry loc="415 160" size="55 25"
        style="PlainText"
        vq="sfshift1"
        vc="sfshift1=$VALUE"
        set="$VALUE=sfshift1"
        show="if (axis='pp1' or axis='pp2' or axis='ppd') then $SHOW=1 else $SHOW=0 endif"
        />
      <button loc="350 190" size="130 25"
        style="Label2"
        label="Begin Acquisition"
        vc="BP_ESgo"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <entry loc="255 160" size="40 25"
        style="PlainText"
        vq="range1"
        vc="range1=$VALUE"
        set="$VALUE=range1"
        show="on('range1'):$VALUE"
        />
      <check loc="300 160" size="25 25"
        style="PlainText"
        vq="range1"
        vc="range1='y' range0='y'"
        vc2="range1='n' ssorder='n'"
        set="on('range1'):$VALUE"
        />
      <label loc="170 160" size="90 25"
        style="Label1"
        label="F3 end (ppm)"
        />
      <check loc="145 160" size="25 25"
        style="PlainText"
        vq="range0"
        vc="range0='y'"
        vc2="range0='n' range1='n' ssorder='n'"
        set="on('range0'):$VALUE"
        />
      <entry loc="105 160" size="40 25"
        style="PlainText"
        vq="range0"
        vc="range0=$VALUE"
        set="$VALUE=range0"
        show="on('range0'):$VALUE"
        />
      <label loc="10 160" size="95 25"
        style="Label1"
        label="F3 start (ppm)"
        />
      <label loc="150 180" size="110 25"
        style="Label1"
        label="Sampling Density:"
        />
      <textmessage loc="260 185" size="60 20"
        style="PlainText"
        label="---"
        vq="density"
        set="$VALUE=ni/sw1/sw2/t1max/t2max*100"
        />
      <label loc="320 185" size="20 20"
        style="Label1"
        label="%"
        />
      <button loc="360 220" size="110 25"
        style="Label2"
        label="MFT !"
        vc="BP_MFTset"
        bg="transparent"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="10 195" size="145 25"
        style="Label1"
        label="Sampling Schedule File:"
        />
      <entry loc="15 220" size="330 25"
        style="PlainText"
        vq="timetab_name"
        vc="timetab_name='$VALUE'"
        set="$VALUE=timetab_name"
        />
      <label loc="280 250" size="60 25"
        style="Label1"
        label="Krzysztof"
        />
      <label loc="40 270" size="295 25"
        style="Label1"
        label="Kazimierczuk and Anna Zawadzka, University of Warsaw"
        />
      <label loc="5 250" size="285 25"
        style="Label1"
        label="NUS Software Contributed by Wiktor Kozminski,"
        />
    </group>
    <check loc="75 25" size="75 25"
      style="PlainText"
      label="Orekhov"
      vq="sampling SPARSE "
      vc="sampling='o' exists('ni2','parameter'):$3D exists('ni3','parameter'):$4D if $4D=1 then BP_NLSinit(4) elseif $3D=1 then BP_NLSinit(3) else BP_NLSinit(2) endif SPARSE='y'"
      vc2="sampling=''  BP_NLSstop"
      set="if sampling='o'  then $VALUE=1 else $VALUE=0 endif"
      />
    <check loc="5 25" size="85 25"
      style="PlainText"
      label="Sparse"
      vq="sampling "
      vc="sampling='sparse' BP_NLSstop CStype='a'"
      vc2="sampling=''  "
      set="if ((sampling='sparse') or (sampling='e'))  then $VALUE=1 else $VALUE=0 endif"
      />
    <check loc="155 25" size="85 25"
      style="PlainText"
      label="Kozminski"
      vq="sampling SPARSE"
      vc="sampling='k' BP_ESset SPARSE='n'"
      vc2="sampling=''  BP_NLSstop"
      set="if sampling='k'  then $VALUE=1 else $VALUE=0 endif"
      />
    <check loc="10 95" size="210 25"
      style="PlainText"
      label="Select ASCOM (display 2D first)"
      vq="sampling r4 r5 n1 ll2dmode"
      vc="sampling='a'  n1='' r4=0 r5=0 BPBestSW1a"
      vc2="sampling=''  ll2dmode='n'"
      set="if (sampling='a')  then $VALUE=1 else $VALUE=0 endif"
      />
    <label loc="5 50" size="235 25"
      style="Heading2"
      label="Linear nD Sampling"
      />
    <check loc="10 70" size="150 25"
      style="PlainText"
      label="Select Linear Sampling"
      vq="sampling "
      vc="if ((sampling='o') or (sampling='k')) then BP_NLSstop endif sampling=''  "
      vc2="sampling=''  "
      set="if sampling=''  then $VALUE=1 else $VALUE=0 endif"
      />
    <group loc="5 125" size="245 160"
      vq="Console"
      show="if Console='vnmrs' then $SHOW=1 else $SHOW=0 endif"
      bg="transparent"
      border="None"
      tab="no"
      enable="no"
      reference="ddrtc"
      useref="no"
      subtype="Untitled"
      expanded="yes"
      rows="1"
      columns="1"
      >
      <label loc="165 25" size="50 25"
        style="Label1"
        label="ddrpm"
        />
      <entry loc="215 25" size="20 25"
        style="PlainText"
        vq="ddrpm"
        vc="ddrpm='$VALUE'"
        set="$VALUE=ddrpm"
        />
      <entry loc="80 25" size="50 25"
        style="PlainText"
        vq="ddrtc"
        vc="ddrtc=$VALUE"
        set="$VALUE=ddrtc"
        digits="1"
        />
      <label loc="10 25" size="70 25"
        style="Label1"
        label="ddrtc(usec)"
        />
      <group loc="15 130" size="225 30"
        show="BPsetddrtc(1):$VALUE"
        bg="transparent"
        border="None"
        tab="no"
        enable="no"
        useref="no"
        subtype="Untitled"
        rows="1"
        columns="1"
        >
        <button loc="0 0" size="208 24"
          style="PlainText"
          label="Update Probe File with this value"
          vq="ddrtc"
          vc="exists('ddrtc','parameter'):$e if $e=1 then  $ddrtc=''  format(ddrtc,4,2):$ddrtc  setparams('ddrtc',$ddrtc,tn) endif write('line3','Probefile Updated for new value of ddrtc')"
          bg="VJBackground"
          decor1="no"
          halignment="Center"
          valignment="Center"
          />
      </group>
      <button loc="40 105" size="160 25"
        style="PlainText"
        label="Find best value of ddrtc"
        vq="ni ni2 phase phase2"
        vc="setlp0 ddrtc=10*ddrtc ddrtc=trunc(ddrtc)/10.0 exists('ni','parameter'):$e exists('ni2','parameter'):$e2 if $e then ni=0 phase=1 endif if $e2 then ni2=0 phase2=0 endif ga"
        bg="VJBackground"
        decor1="no"
        halignment="Center"
        valignment="Center"
        />
      <label loc="10 80" size="240 25"
        style="Label1"
        label="a new 1D spectrum (Press this button):"
        />
      <label loc="10 55" size="205 25"
        style="Label1"
        label="Phase the Spectrum and then run"
        />
      <label loc="8 0" size="208 24"
        style="Heading2"
        label="Direct Dimension Sampling"
        />
    </group>
    <label loc="5 5" size="235 25"
      style="Heading2"
      label="Select NUS nD Sampling Method"
      />
  </group>
</template>
